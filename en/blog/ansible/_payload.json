[{"data":1,"prerenderedAt":1987},["ShallowReactive",2],{"blog-ansible":3,"search":192,"related-posts-ansible":478,"all-post":479},{"id":4,"title":5,"body":6,"date":179,"description":180,"extension":181,"image":182,"keywords":183,"meta":184,"navigation":185,"path":186,"published":185,"seo":187,"stem":188,"tags":189,"__hash__":191},"blog/blog/ansible.md","Tá»•ng quan vÃ  cáº¥u hÃ¬nh Ansible",{"type":7,"value":8,"toc":176},"minimal",[9,16,19,22,27,30,34,37,40,42,46,49,52,63,65,69,72,75,77,81,88,97,100,108,111,113,117,120,123,128,131,133,137,163,165,168,173],[10,11,12],"p",{},[13,14,15],"strong",{},"HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t vÃ  triá»ƒn khai Ansible",[10,17,18],{},"Ansible lÃ  má»™t cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a máº¡nh máº½, giÃºp quáº£n lÃ½ cáº¥u hÃ¬nh, triá»ƒn khai á»©ng dá»¥ng vÃ  Ä‘iá»u phá»‘i há»‡ thá»‘ng má»™t cÃ¡ch dá»… dÃ ng. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu cÃ¡ch cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  sá»­ dá»¥ng Ansible thÃ´ng qua cÃ¡c vÃ­ dá»¥ thá»±c táº¿.",[20,21],"hr",{},[23,24,26],"h1",{"id":25},"ï¸-cÃ i-Ä‘áº·t-ansible","ğŸ› ï¸ CÃ i Ä‘áº·t Ansible",[10,28,29],{},"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Ansible trÃªn Ubuntu:",[31,32],"code-block",{":files":33},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo apt update -y\\nsudo apt install software-properties-common -y\\nsudo apt-add-repository --yes --update ppa:ansible/ansible\\nsudo apt install ansible -y\\n\"}]",[10,35,36],{},"Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra phiÃªn báº£n Ansible:",[31,38],{":files":39},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible --version\"}]",[20,41],{},[23,43,45],{"id":44},"cáº¥u-hÃ¬nh-ssh","ğŸ”‘ Cáº¥u hÃ¬nh SSH",[10,47,48],{},"Äá»ƒ Ansible cÃ³ thá»ƒ káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ tá»« xa, báº¡n cáº§n cáº¥u hÃ¬nh SSH. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch sao chÃ©p SSH key Ä‘áº¿n mÃ¡y chá»§ khÃ¡c:",[31,50],{":files":51},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ssh-copy-id -i ~/.ssh/id_rsa.pub vinhtieng@123.3123.12\"}]",[10,53,54,57,58,62],{},[13,55,56],{},"LÆ°u Ã½:"," Thay ",[59,60,61],"code",{},"vinhtieng@123.3123.12"," báº±ng tÃªn ngÆ°á»i dÃ¹ng vÃ  Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ tá»« xa.",[20,64],{},[23,66,68],{"id":67},"hosts-inventory","ğŸ“‹ Hosts - Inventory",[10,70,71],{},"File inventory lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a danh sÃ¡ch cÃ¡c mÃ¡y chá»§ mÃ  Ansible sáº½ quáº£n lÃ½. ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ cÆ¡ báº£n:",[31,73],{":files":74},"[{\"title\":\"inventory\",\"language\":\"ini\",\"content\":\"[webservers]\\nweb1.example.com\\nweb2.example.com\\n\\n[databases]\\ndb1.example.com\\n\\n[webservers:vars]\\nansible_user=your_ssh_user\\nansible_ssh_private_key_file=/path/to/private/key\\n\\n[webservers1]\\nweb1.example.com ansible_user=user1 ansible_ssh_private_key_file=/path/to/key1\\nweb2.example.com ansible_user=user2 ansible_ssh_private_key_file=/path/to/key2\\n\"}]",[20,76],{},[23,78,80],{"id":79},"kiá»ƒm-tra-káº¿t-ná»‘i-ping","ğŸ“ Kiá»ƒm tra káº¿t ná»‘i (Ping)",[10,82,83,84,87],{},"Báº¡n cÃ³ thá»ƒ kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ báº±ng lá»‡nh ",[59,85,86],{},"ping",":",[89,90,91],"ol",{},[92,93,94],"li",{},[13,95,96],{},"Ping vá»›i file hosts máº·c Ä‘á»‹nh:",[31,98],{":files":99},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -m ping all\"}]",[89,101,103],{"start":102},2,[92,104,105],{},[13,106,107],{},"Ping vá»›i file inventory tÃ¹y chá»‰nh:",[31,109],{":files":110},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -i my_hosts all -m ping\"}]",[20,112],{},[23,114,116],{"id":115},"playbook-task-module","ğŸ“œ Playbook - Task - Module",[10,118,119],{},"Playbook lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c tÃ¡c vá»¥ (tasks) cáº§n thá»±c hiá»‡n trÃªn cÃ¡c mÃ¡y chá»§. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch cháº¡y má»™t playbook:",[31,121],{":files":122},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible-playbook my_playbook.yml -i inventory_file\"}]",[10,124,125],{},[13,126,127],{},"VÃ­ dá»¥ vá» Playbook Ä‘Æ¡n giáº£n:",[31,129],{":files":130},"[{\"title\":\"my_playbook.yml\",\"language\":\"yaml\",\"content\":\"---\\n- name: CÃ i Ä‘áº·t vÃ  khá»Ÿi Ä‘á»™ng Apache\\n  hosts: webservers\\n  become: yes\\n  tasks:\\n    - name: CÃ i Ä‘áº·t Apache\\n      apt:\\n        name: apache2\\n        state: present\\n    - name: Äáº£m báº£o Apache Ä‘ang cháº¡y\\n      service:\\n        name: apache2\\n        state: started\\n\"}]",[20,132],{},[23,134,136],{"id":135},"tÃ i-liá»‡u-tham-kháº£o","ğŸ“š TÃ i liá»‡u tham kháº£o",[138,139,140,149,156],"ul",{},[92,141,142],{},[143,144,148],"a",{"href":145,"rel":146},"https://docs.ansible.com/",[147],"nofollow","Ansible Documentation",[92,150,151],{},[143,152,155],{"href":153,"rel":154},"https://galaxy.ansible.com/",[147],"Ansible Galaxy",[92,157,158],{},[143,159,162],{"href":160,"rel":161},"https://docs.ansible.com/ansible/latest/user_guide/playbooks.html",[147],"Ansible Playbook Guide",[20,164],{},[166,167],"br",{},[10,169,170],{},[13,171,172],{},"TÃ³m láº¡i:",[10,174,175],{},"Ansible lÃ  cÃ´ng cá»¥ máº¡nh máº½ giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥ quáº£n trá»‹ há»‡ thá»‘ng. Viá»‡c náº¯m vá»¯ng cÃ¡ch sá»­ dá»¥ng Ansible sáº½ giÃºp báº¡n tiáº¿t kiá»‡m thá»i gian vÃ  giáº£m thiá»ƒu lá»—i trong quÃ¡ trÃ¬nh quáº£n lÃ½ há»‡ thá»‘ng.",{"title":177,"searchDepth":102,"depth":102,"links":178},"",[],"2025-04-25T00:00:00.000Z","HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t, cáº¥u hÃ¬nh SSH, inventory vÃ  sá»­ dá»¥ng Playbook trong Ansible.","md","/images/blog/ansible/banner.webp","ansible, automation, configuration management",{},true,"/blog/ansible",{"title":5,"description":180},"blog/ansible",[190],"ansible","TDOKqPCKfBmvSL-G-wacqQdrgbcbAiBJrgMPYjtJtIc",[193,197,201,205,208,212,216,220,225,230,235,240,245,250,255,260,265,270,275,280,284,289,294,299,304,309,314,319,324,329,334,339,344,349,354,359,364,369,374,379,383,388,393,398,403,408,413,418,423,428,433,437,443,448,453,458,463,468,473],{"id":186,"title":5,"titles":194,"content":195,"level":196},[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t, cáº¥u hÃ¬nh SSH, inventory vÃ  sá»­ dá»¥ng Playbook trong Ansible. HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t vÃ  triá»ƒn khai Ansible Ansible lÃ  má»™t cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a máº¡nh máº½, giÃºp quáº£n lÃ½ cáº¥u hÃ¬nh, triá»ƒn khai á»©ng dá»¥ng vÃ  Ä‘iá»u phá»‘i há»‡ thá»‘ng má»™t cÃ¡ch dá»… dÃ ng. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu cÃ¡ch cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  sá»­ dá»¥ng Ansible thÃ´ng qua cÃ¡c vÃ­ dá»¥ thá»±c táº¿.",1,{"id":198,"title":26,"titles":199,"content":200,"level":196},"/blog/ansible#ï¸-cÃ i-Ä‘áº·t-ansible",[],"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Ansible trÃªn Ubuntu: Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra phiÃªn báº£n Ansible:",{"id":202,"title":45,"titles":203,"content":204,"level":196},"/blog/ansible#cáº¥u-hÃ¬nh-ssh",[],"Äá»ƒ Ansible cÃ³ thá»ƒ káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ tá»« xa, báº¡n cáº§n cáº¥u hÃ¬nh SSH. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch sao chÃ©p SSH key Ä‘áº¿n mÃ¡y chá»§ khÃ¡c: LÆ°u Ã½: Thay vinhtieng@123.3123.12 báº±ng tÃªn ngÆ°á»i dÃ¹ng vÃ  Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ tá»« xa.",{"id":206,"title":68,"titles":207,"content":71,"level":196},"/blog/ansible#hosts-inventory",[],{"id":209,"title":80,"titles":210,"content":211,"level":196},"/blog/ansible#kiá»ƒm-tra-káº¿t-ná»‘i-ping",[],"Báº¡n cÃ³ thá»ƒ kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ báº±ng lá»‡nh ping: Ping vá»›i file hosts máº·c Ä‘á»‹nh: Ping vá»›i file inventory tÃ¹y chá»‰nh:",{"id":213,"title":116,"titles":214,"content":215,"level":196},"/blog/ansible#playbook-task-module",[],"Playbook lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c tÃ¡c vá»¥ (tasks) cáº§n thá»±c hiá»‡n trÃªn cÃ¡c mÃ¡y chá»§. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch cháº¡y má»™t playbook: VÃ­ dá»¥ vá» Playbook Ä‘Æ¡n giáº£n:",{"id":217,"title":136,"titles":218,"content":219,"level":196},"/blog/ansible#tÃ i-liá»‡u-tham-kháº£o",[],"Ansible DocumentationAnsible GalaxyAnsible Playbook Guide TÃ³m láº¡i: Ansible lÃ  cÃ´ng cá»¥ máº¡nh máº½ giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥ quáº£n trá»‹ há»‡ thá»‘ng. Viá»‡c náº¯m vá»¯ng cÃ¡ch sá»­ dá»¥ng Ansible sáº½ giÃºp báº¡n tiáº¿t kiá»‡m thá»i gian vÃ  giáº£m thiá»ƒu lá»—i trong quÃ¡ trÃ¬nh quáº£n lÃ½ há»‡ thá»‘ng.",{"id":221,"title":222,"titles":223,"content":224,"level":196},"/blog/basic-nginx","Tá»•ng quan vÃ  cáº¥u hÃ¬nh thÃ´ng dá»¥ng Nginx",[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cáº¥u hÃ¬nh vÃ  triá»ƒn khai Nginx nhÆ° web server, reverse proxy, load balancer, vÃ  cÃ¡c thiáº¿t láº­p nÃ¢ng cao. Giá»›i thiá»‡u vá» Nginx nginx (\"engine x\") is an HTTP web server, reverse proxy, content cache, load balancer, TCP/UDP proxy server, and mail proxy server. Originally written by Igor Sysoev and distributed under the 2-clause BSD License. Enterprise distributions, commercial support and training are available from F5, Inc. Nginx lÃ  má»™t web server, pháº§n má»m cháº¡y trÃªn mÃ¡y chá»§ Ä‘á»ƒ nháº­n vÃ  xá»­ lÃ½ cÃ¡c request (yÃªu cáº§u) tá»« trÃ¬nh duyá»‡t hoáº·c client (nhÆ° API request). Ban Ä‘áº§u, Nginx Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ xá»­ lÃ½ nhiá»u káº¿t ná»‘i cÃ¹ng lÃºc vá»›i hiá»‡u nÄƒng cao, vÃ  ngÃ y nay nÃ³ cÃ²n Ä‘Æ°á»£c dÃ¹ng nhÆ°:\nâ€¢\tWeb Server (mÃ¡y chá»§ web)\nâ€¢\tReverse Proxy (proxy ngÆ°á»£c)\nâ€¢\tLoad Balancer (cÃ¢n báº±ng táº£i)\nâ€¢\tCache server (bá»™ nhá»› Ä‘á»‡m)\nâ€¢\tAPI Gateway (á»Ÿ má»©c cÆ¡ báº£n)",{"id":226,"title":227,"titles":228,"content":229,"level":196},"/blog/basic-nginx#cÃ i-Ä‘áº·t-nginx","CÃ i Ä‘áº·t Nginx",[],"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu: Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra tráº¡ng thÃ¡i Nginx: Kiá»ƒm tra tÆ°á»ng lá»­a:\nÄá»ƒ kiá»ƒm tra cÃ¡c cáº¥u hÃ¬nh Ä‘ang Ä‘Æ°á»£c cháº¡y thÃ¬ cháº¡y lá»‡nh Káº¿t quáº£ hiá»‡n ra á»Ÿ terminal sáº½ dáº¡ng nhÆ° sau: Sau khi cÃ i Ä‘áº·t Nginx, báº¡n nÃªn Ä‘áº£m báº£o ráº±ng tÆ°á»ng lá»­a (firewall) cho phÃ©p lÆ°u lÆ°á»£ng HTTP vÃ  HTTPS Ä‘á»ƒ mÃ¡y chá»§ cÃ³ thá»ƒ phá»¥c vá»¥ ná»™i dung web. Lá»‡nh sudo ufw allow 'Nginx Full' sáº½ má»Ÿ cáº£ hai cá»•ng 80 (HTTP) vÃ  443 (HTTPS).\nSau Ä‘Ã³, dÃ¹ng sudo ufw status Ä‘á»ƒ xÃ¡c nháº­n ráº±ng cÃ¡c cá»•ng nÃ y Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ. Náº¿u báº¡n chÆ°a báº­t ufw (Uncomplicated Firewall), báº¡n cÃ³ thá»ƒ báº­t báº±ng lá»‡nh sudo ufw enable. Tuy nhiÃªn, hÃ£y Ä‘áº£m báº£o cáº¥u hÃ¬nh chÃ­nh xÃ¡c Ä‘á»ƒ khÃ´ng bá»‹ khÃ³a SSH. Kiá»ƒm tra hoáº¡t Ä‘á»™ng cá»§a Nginx: Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p Ä‘á»‹a chá»‰:\nğŸ‘‰ http://\u003CÄ‘á»‹a_chá»‰_IP_cá»§a_báº¡n> hoáº·c http://localhost náº¿u kiá»ƒm tra cá»¥c bá»™. Báº¡n sáº½ tháº¥y trang máº·c Ä‘á»‹nh â€œWelcome to nginx!â€ náº¿u má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch.",{"id":231,"title":232,"titles":233,"content":234,"level":196},"/blog/basic-nginx#ï¸-cáº¥u-hÃ¬nh-default-host-trong-nginx","âš™ï¸ Cáº¥u hÃ¬nh Default Host trong Nginx",[],"TrÃªn Ubuntu, file cáº¥u hÃ¬nh cá»§a Nginx thÆ°á»ng Ä‘Æ°á»£c lÆ°u táº¡i cÃ¡c vá»‹ trÃ­ sau: /etc/nginx/sites-available/default (Náº¿u sá»­ dá»¥ng thÆ° má»¥c sites-available vÃ  sites-enabled)./etc/nginx/conf.d/default.conf (ThÃ´ng dá»¥ng cho cÃ¡c cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n). Máº·c Ä‘á»‹nh, khi cÃ i Ä‘áº·t Nginx, sáº½ cÃ³ má»™t file cáº¥u hÃ¬nh default trong thÆ° má»¥c /etc/nginx/sites-available/ vá»›i má»™t sá»‘ cáº¥u hÃ¬nh cÆ¡ báº£n. Báº¡n cÃ³ thá»ƒ sá»­a file nÃ y Ä‘á»ƒ cáº¥u hÃ¬nh server block cho website cá»§a mÃ¬nh. Cáº¥u hÃ¬nh Default Host Má»Ÿ file cáº¥u hÃ¬nh Nginx máº·c Ä‘á»‹nh: Máº·c Ä‘á»‹nh, Nginx sáº½ chá»n block Ä‘áº§u tiÃªn khi khÃ´ng tÃ¬m tháº¥y server_name tÆ°Æ¡ng á»©ng. Äá»ƒ cáº¥u hÃ¬nh rÃµ rÃ ng host máº·c Ä‘á»‹nh, báº¡n thÃªm default_server vÃ o dÃ²ng listen: Ghi chÃº: listen 80 default_server;: Cáº¥u hÃ¬nh Nginx láº¯ng nghe cá»•ng 80 (HTTP) vÃ  Ä‘Ã¡nh dáº¥u Ä‘Ã¢y lÃ  default_server (server máº·c Ä‘á»‹nh cho cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c).root /var/www/html;: ÄÆ°á»ng dáº«n tá»›i thÆ° má»¥c chá»©a cÃ¡c tá»‡p tin cá»§a website. Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y thÃ nh thÆ° má»¥c cá»§a website báº¡n muá»‘n phá»¥c vá»¥.server_name _;: Chá»‰ thá»‹ nÃ y cho phÃ©p server cháº¥p nháº­n táº¥t cáº£ cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c. Náº¿u báº¡n cÃ³ tÃªn miá»n cá»¥ thá»ƒ, hÃ£y thay tháº¿ dáº¥u gáº¡ch dÆ°á»›i (_) báº±ng tÃªn miá»n cá»§a báº¡n.location /: ÄÃ¢y lÃ  pháº§n cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n cho cÃ¡c yÃªu cáº§u Ä‘áº¿n. Cáº¥u hÃ¬nh nÃ y giÃºp Nginx tÃ¬m kiáº¿m cÃ¡c tá»‡p tin khi ngÆ°á»i dÃ¹ng truy cáº­p vÃ o website.try_files $uri $uri/ =404;: Náº¿u yÃªu cáº§u khÃ´ng trÃ¹ng khá»›p vá»›i tá»‡p tin hoáº·c thÆ° má»¥c, sáº½ tráº£ vá» lá»—i 404. Sau khi chá»‰nh sá»­a xong, báº¡n cáº§n kiá»ƒm tra xem cáº¥u hÃ¬nh cÃ³ chÃ­nh xÃ¡c khÃ´ng: Náº¿u khÃ´ng cÃ³ lá»—i nÃ o, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i Nginx Ä‘á»ƒ Ã¡p dá»¥ng cáº¥u hÃ¬nh má»›i: Giá»›i thiá»‡u vá» sites-available vÃ  sites-enabled Trong Nginx, thÆ° má»¥c sites-available vÃ  sites-enabled lÃ  má»™t cÆ¡ cháº¿ Ä‘á»ƒ quáº£n lÃ½ cÃ¡c website (virtual hosts) mÃ  Nginx cÃ³ thá»ƒ phá»¥c vá»¥. Cáº¥u trÃºc nÃ y giÃºp dá»… dÃ ng báº­t/táº¯t cÃ¡c website mÃ  khÃ´ng cáº§n pháº£i xÃ³a hoáº·c thay Ä‘á»•i cáº¥u hÃ¬nh trá»±c tiáº¿p. sites-available: ÄÃ¢y lÃ  nÆ¡i báº¡n táº¡o vÃ  lÆ°u trá»¯ táº¥t cáº£ cÃ¡c file cáº¥u hÃ¬nh cá»§a cÃ¡c website hoáº·c á»©ng dá»¥ng mÃ  báº¡n muá»‘n Nginx phá»¥c vá»¥.Má»—i file cáº¥u hÃ¬nh trong sites-available Ä‘áº¡i diá»‡n cho má»™t website hoáº·c á»©ng dá»¥ng riÃªng biá»‡t.VÃ­ dá»¥: /etc/nginx/sites-available/example.com lÃ  cáº¥u hÃ¬nh cho website example.com. sites-enabled: ÄÃ¢y lÃ  nÆ¡i chá»©a cÃ¡c liÃªn káº¿t tÆ°á»£ng trÆ°ng (symlink) Ä‘áº¿n cÃ¡c file cáº¥u hÃ¬nh trong sites-available mÃ  báº¡n muá»‘n Nginx thá»±c thi.CÃ¡c liÃªn káº¿t nÃ y cho phÃ©p Nginx biáº¿t Ä‘Æ°á»£c website nÃ o sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t.Báº¡n khÃ´ng nÃªn trá»±c tiáº¿p chá»‰nh sá»­a cÃ¡c file trong sites-enabled. Thay vÃ o Ä‘Ã³, báº¡n táº¡o symlink tá»« sites-available. CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng: Khi báº¡n táº¡o má»™t file cáº¥u hÃ¬nh trong sites-available, báº¡n cÃ³ thá»ƒ kÃ­ch hoáº¡t nÃ³ báº±ng cÃ¡ch táº¡o má»™t symlink Ä‘áº¿n file Ä‘Ã³ trong thÆ° má»¥c sites-enabled.Äá»ƒ táº¡o symlink, sá»­ dá»¥ng lá»‡nh ln -s. VÃ­ dá»¥, náº¿u báº¡n cÃ³ cáº¥u hÃ¬nh example.com trong sites-available, báº¡n cÃ³ thá»ƒ táº¡o symlink vÃ o sites-enabled nhÆ° sau:",{"id":236,"title":237,"titles":238,"content":239,"level":196},"/blog/basic-nginx#cáº¥u-hÃ¬nh-deploy-page-tÄ©nh","Cáº¥u hÃ¬nh Deploy page tÄ©nh",[],"Äá»ƒ phá»¥c vá»¥ má»™t trang web tÄ©nh vá»›i Nginx, báº¡n cáº§n cáº¥u hÃ¬nh server block Ä‘á»ƒ trá» Ä‘áº¿n thÆ° má»¥c chá»©a cÃ¡c tá»‡p HTML, CSS, JavaScript vÃ  cÃ¡c tÃ i nguyÃªn khÃ¡c cá»§a trang web. Trong Ä‘Ã³: root /var/www/my_static_site;: ÄÆ°á»ng dáº«n tá»›i thÆ° má»¥c chá»©a cÃ¡c tá»‡p tin cá»§a trang web tÄ©nh. HÃ£y thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y thÃ nh thÆ° má»¥c thá»±c táº¿ cá»§a báº¡n.index index.html index.htm;: XÃ¡c Ä‘á»‹nh cÃ¡c tá»‡p tin máº·c Ä‘á»‹nh khi truy cáº­p vÃ o thÆ° má»¥c gá»‘c.",{"id":241,"title":242,"titles":243,"content":244,"level":196},"/blog/basic-nginx#cáº¥u-hÃ¬nh-revert-proxy","Cáº¥u hÃ¬nh revert proxy",[],"Äá»ƒ cáº¥u hÃ¬nh Nginx lÃ m reverse proxy, báº¡n cáº§n thiáº¿t láº­p má»™t server block Ä‘á»ƒ chuyá»ƒn tiáº¿p cÃ¡c yÃªu cáº§u tá»« Nginx Ä‘áº¿n má»™t server backend khÃ¡c (vÃ­ dá»¥: má»™t á»©ng dá»¥ng web cháº¡y trÃªn cá»•ng khÃ¡c hoáº·c trÃªn má»™t mÃ¡y chá»§ khÃ¡c).",{"id":246,"title":247,"titles":248,"content":249,"level":196},"/blog/basic-nginx#load-balancer-trong-nginx","Load Balancer trong Nginx",[],"Nginx há»— trá»£ cáº¥u hÃ¬nh cÃ¢n báº±ng táº£i vá»›i nhiá»u thuáº­t toÃ¡n lá»±a chá»n backend: round-robin: Máº·c Ä‘á»‹nh, phÃ¢n phá»‘i Ä‘á»u cho cÃ¡c request.least_conn: Chá»n server Ã­t káº¿t ná»‘i nháº¥t.ip_hash: Duy trÃ¬ session cho client.least_time: chá»n server cÃ³ thá»i gian pháº£n há»“i Ã­t nháº¥t CÃ³ thá»ƒ thÃªm trá»ng sá»‘ cho server báº±ng cÃ¡ch thÃªm sá»‘ sau ip:port Ex: server 192.168.1.0:8000 weight=3; Cáº¥u hÃ¬nh server block proxy Ä‘áº¿n upstream:",{"id":251,"title":252,"titles":253,"content":254,"level":196},"/blog/basic-nginx#gzip-compression","Gzip Compression",[],"Báº­t gzip giÃºp tÄƒng tá»‘c Ä‘á»™ táº£i trang báº±ng cÃ¡ch nÃ©n ná»™i dung tráº£ vá»:",{"id":256,"title":257,"titles":258,"content":259,"level":196},"/blog/basic-nginx#kÃ­ch-hoáº¡t-http2","KÃ­ch hoáº¡t HTTP/2",[],"HTTP/2 cáº£i thiá»‡n hiá»‡u suáº¥t thÃ´ng qua multiplexing vÃ  header compression:",{"id":261,"title":262,"titles":263,"content":264,"level":196},"/blog/basic-nginx#rate-limiting","Rate Limiting",[],"Giá»›i háº¡n sá»‘ lÆ°á»£ng request Ä‘á»ƒ trÃ¡nh DDoS vÃ  abuse:",{"id":266,"title":267,"titles":268,"content":269,"level":196},"/blog/basic-nginx#redirect-vÃ -rewrites","Redirect vÃ  Rewrites",[],"Chuyá»ƒn hÆ°á»›ng toÃ n bá»™ traffic HTTP sang HTTPS: Viáº¿t láº¡i URL cho SPA:",{"id":271,"title":272,"titles":273,"content":274,"level":196},"/blog/basic-nginx#hardening-security","Hardening & Security",[],"Báº£o vá»‡ server báº±ng cÃ¡ch tá»« chá»‘i truy cáº­p file nháº¡y cáº£m: áº¨n thÃ´ng tin server: Chá»‘ng clickjacking vÃ  XSS:",{"id":276,"title":277,"titles":278,"content":279,"level":196},"/blog/basic-nginx#logging-nÃ¢ng-cao","Logging nÃ¢ng cao",[],"Cáº¥u hÃ¬nh custom log format Ä‘á»ƒ dá»… debug:",{"id":281,"title":136,"titles":282,"content":283,"level":196},"/blog/basic-nginx#tÃ i-liá»‡u-tham-kháº£o",[],"Nginx DocumentationNginx Load Balancing GuideNginx + PHP-FPM SetupOWASP Nginx Hardening Guide TÃ³m láº¡i: Nginx lÃ  cÃ´ng cá»¥ cá»±c ká»³ máº¡nh máº½ vÃ  linh hoáº¡t, khÃ´ng chá»‰ giá»›i háº¡n á»Ÿ web server mÃ  cÃ²n lÃ  reverse proxy, caching layer, vÃ  load balancer. Viá»‡c náº¯m vá»¯ng vÃ  khai thÃ¡c tá»‘t cÃ¡c tÃ­nh nÄƒng sáº½ giÃºp há»‡ thá»‘ng cá»§a báº¡n hiá»‡u suáº¥t cao, báº£o máº­t vÃ  dá»… má»Ÿ rá»™ng.",{"id":285,"title":286,"titles":287,"content":288,"level":196},"/blog/basic-redis","CÆ¡ Báº£n Vá» Redis vÃ  TÃ­ch Há»£p Vá»›i Node.js",[],"TÃ¬m hiá»ƒu cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» Redis bao gá»“m cÃ¡c kiá»ƒu dá»¯ liá»‡u vÃ  phÆ°Æ¡ng thá»©c, cÅ©ng nhÆ° cÃ¡ch tÃ­ch há»£p Redis vÃ o á»©ng dá»¥ng Node.js Ä‘á»ƒ sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c tÃ­nh nÄƒng thá»i gian thá»±c. CÆ¡ Báº£n Vá» Redis vÃ  TÃ­ch Há»£p Vá»›i Node.js Redis lÃ  má»™t kho dá»¯ liá»‡u key-value trong bá»™ nhá»›, mÃ£ nguá»“n má»Ÿ, ná»•i tiáº¿ng vá»›i hiá»‡u suáº¥t vÃ  tÃ­nh linh hoáº¡t. Redis há»— trá»£ nhiá»u kiá»ƒu dá»¯ liá»‡u, phÃ¹ há»£p cho viá»‡c sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m, á»©ng dá»¥ng thá»i gian thá»±c, há»‡ thá»‘ng pub/sub, vÃ  nhiá»u hÆ¡n ná»¯a. Trong hÆ°á»›ng dáº«n nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu: CÃ¡c kiá»ƒu dá»¯ liá»‡u trong RedisCÃ¡c lá»‡nh phá»• biáº¿n cá»§a RedisCÃ¡ch tÃ­ch há»£p Redis vÃ o dá»± Ã¡n Node.js",{"id":290,"title":291,"titles":292,"content":293,"level":196},"/blog/basic-redis#cÃ¡c-kiá»ƒu-dá»¯-liá»‡u-lá»‡nh-redis","ğŸ“¦ CÃ¡c Kiá»ƒu Dá»¯ Liá»‡u & Lá»‡nh Redis",[],"Redis há»— trá»£ nhiá»u cáº¥u trÃºc dá»¯ liá»‡u khÃ¡c nhau:",{"id":295,"title":296,"titles":297,"content":298,"level":102},"/blog/basic-redis#_1-chuá»—i-strings","1. Chuá»—i (Strings)",[291],"Chuá»—i lÃ  kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n nháº¥t trong Redis. Báº¡n cÃ³ thá»ƒ lÆ°u trá»¯ báº¥t ká»³ giÃ¡ trá»‹ nÃ o dÆ°á»›i dáº¡ng chuá»—i, bao gá»“m cáº£ sá»‘ nguyÃªn vÃ  JSON Ä‘Æ°á»£c tuáº§n tá»± hÃ³a.",{"id":300,"title":301,"titles":302,"content":303,"level":102},"/blog/basic-redis#_2-danh-sÃ¡ch-lists","2. Danh sÃ¡ch (Lists)",[291],"Danh sÃ¡ch lÃ  cÃ¡c táº­p há»£p cÃ³ thá»© tá»± cá»§a chuá»—i. Báº¡n cÃ³ thá»ƒ thÃªm pháº§n tá»­ vÃ o Ä‘áº§u hoáº·c cuá»‘i danh sÃ¡ch.",{"id":305,"title":306,"titles":307,"content":308,"level":102},"/blog/basic-redis#_3-táº­p-há»£p-sets","3. Táº­p há»£p (Sets)",[291],"Táº­p há»£p lÃ  cÃ¡c táº­p há»£p khÃ´ng cÃ³ thá»© tá»± cá»§a cÃ¡c chuá»—i duy nháº¥t. ChÃºng há»— trá»£ cÃ¡c phÃ©p toÃ¡n nhÆ° há»£p, giao, vÃ  hiá»‡u.",{"id":310,"title":311,"titles":312,"content":313,"level":102},"/blog/basic-redis#_4-bÄƒm-hashes","4. BÄƒm (Hashes)",[291],"BÄƒm lÃ  cÃ¡c báº£n Ä‘á»“ giá»¯a trÆ°á»ng chuá»—i vÃ  giÃ¡ trá»‹ chuá»—i, ráº¥t lÃ½ tÆ°á»Ÿng Ä‘á»ƒ biá»ƒu diá»…n cÃ¡c Ä‘á»‘i tÆ°á»£ng.",{"id":315,"title":316,"titles":317,"content":318,"level":102},"/blog/basic-redis#_5-táº­p-há»£p-cÃ³-thá»©-tá»±-sorted-sets","5. Táº­p há»£p cÃ³ thá»© tá»± (Sorted Sets)",[291],"Táº­p há»£p cÃ³ thá»© tá»± tÆ°Æ¡ng tá»± nhÆ° táº­p há»£p nhÆ°ng cÃ³ má»™t Ä‘iá»ƒm sá»‘ liÃªn káº¿t vá»›i má»—i pháº§n tá»­, cho phÃ©p truy xuáº¥t theo thá»© tá»±.",{"id":320,"title":321,"titles":322,"content":323,"level":102},"/blog/basic-redis#_6-bitmaps-hyperloglogs-streams","6. Bitmaps, HyperLogLogs, Streams",[291],"ÄÃ¢y lÃ  cÃ¡c cáº¥u trÃºc nÃ¢ng cao hÆ¡n:\nBitmaps Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c thao tÃ¡c cáº¥p bit, cho phÃ©p báº¡n thao tÃ¡c cÃ¡c bit riÃªng láº» trong má»™t chuá»—i. HyperLogLogs Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Æ°á»›c tÃ­nh sá»‘ lÆ°á»£ng pháº§n tá»­ duy nháº¥t trong má»™t táº­p há»£p, ráº¥t há»¯u Ã­ch cho cÃ¡c trÆ°á»ng há»£p nhÆ° theo dÃµi sá»‘ lÆ°á»£ng khÃ¡ch truy cáº­p duy nháº¥t. Streams Ä‘Æ°á»£c thiáº¿t káº¿ cho cÃ¡c Ä‘Æ°á»ng dáº«n dá»¯ liá»‡u thá»i gian thá»±c vÃ  nguá»“n sá»± kiá»‡n, cho phÃ©p báº¡n thÃªm vÃ  truy váº¥n dá»¯ liá»‡u theo chuá»—i thá»i gian.",{"id":325,"title":326,"titles":327,"content":328,"level":196},"/blog/basic-redis#tÃ­ch-há»£p-redis-vá»›i-nodejs","ğŸ”§ TÃ­ch Há»£p Redis Vá»›i Node.js",[],"Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng thÆ° viá»‡n ioredis hoáº·c redis client phá»• biáº¿n. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá»›i ioredis.",{"id":330,"title":331,"titles":332,"content":333,"level":102},"/blog/basic-redis#_1-cÃ i-Ä‘áº·t-redis-vÃ -ioredis","1. CÃ i Äáº·t Redis vÃ  ioredis",[326],"Äáº£m báº£o ráº±ng báº¡n Ä‘Ã£ cÃ i Ä‘áº·t vÃ  cháº¡y Redis. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Docker Ä‘á»ƒ cháº¡y Redis má»™t cÃ¡ch dá»… dÃ ng:",{"id":335,"title":336,"titles":337,"content":338,"level":102},"/blog/basic-redis#_2-thiáº¿t-láº­p-cÆ¡-báº£n","2. Thiáº¿t Láº­p CÆ¡ Báº£n",[326],"Táº¡o má»™t tá»‡p cÃ³ tÃªn redis.js vÃ  thÃªm Ä‘oáº¡n mÃ£ sau:",{"id":340,"title":341,"titles":342,"content":343,"level":102},"/blog/basic-redis#_3-sá»­-dá»¥ng-redis-trong-á»©ng-dá»¥ng","3. Sá»­ Dá»¥ng Redis Trong á»¨ng Dá»¥ng",[326],"BÃ¢y giá» báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Redis trong á»©ng dá»¥ng cá»§a mÃ¬nh. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» viá»‡c thiáº¿t láº­p vÃ  láº¥y giÃ¡ trá»‹:",{"id":345,"title":346,"titles":347,"content":348,"level":102},"/blog/basic-redis#_4-vÃ­-dá»¥-vá»-bá»™-nhá»›-Ä‘á»‡m","4. VÃ­ Dá»¥ Vá» Bá»™ Nhá»› Äá»‡m",[326],"Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Redis lÃ m bá»™ nhá»› Ä‘á»‡m Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c truy cáº­p thÆ°á»ng xuyÃªn. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» viá»‡c lÆ°u trá»¯ káº¿t quáº£ truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ o bá»™ nhá»› Ä‘á»‡m:",{"id":350,"title":351,"titles":352,"content":353,"level":102},"/blog/basic-redis#_5-káº¿t-luáº­n","5. Káº¿t Luáº­n",[326],"Redis lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ cho bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c á»©ng dá»¥ng thá»i gian thá»±c. Báº±ng cÃ¡ch tÃ­ch há»£p Redis vÃ o cÃ¡c dá»± Ã¡n Node.js, báº¡n cÃ³ thá»ƒ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng. HÆ°á»›ng dáº«n nÃ y Ä‘Ã£ bao quÃ¡t cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» kiá»ƒu dá»¯ liá»‡u, lá»‡nh, vÃ  cÃ¡ch sá»­ dá»¥ng Redis trong á»©ng dá»¥ng Node.js.\nHÃ£y khÃ¡m phÃ¡ thÃªm cÃ¡c tÃ­nh nÄƒng nÃ¢ng cao nhÆ° giao dá»‹ch, scripting Lua, vÃ  clustering khi báº¡n Ä‘Ã£ quen thuá»™c hÆ¡n vá»›i Redis.\nRedis lÃ  má»™t cÃ´ng cá»¥ Ä‘a nÄƒng cÃ³ thá»ƒ nÃ¢ng cao Ä‘Ã¡ng ká»ƒ á»©ng dá»¥ng cá»§a báº¡n. Happy Coding",{"id":355,"title":356,"titles":357,"content":358,"level":102},"/blog/basic-redis#_6-tÃ i-nguyÃªn-tham-kháº£o","6. TÃ i NguyÃªn Tham Kháº£o",[326],"TÃ i liá»‡u RedisTÃ i liá»‡u ioredis",{"id":360,"title":361,"titles":362,"content":363,"level":196},"/blog/common-docker-file","CÃ¡c Dockerfile Phá»• Biáº¿n Cho Nhiá»u Dá»± Ãn KhÃ¡c Nhau",[],"TÃ¬m hiá»ƒu vá» Docker vÃ  khÃ¡m phÃ¡ cÃ¡c Dockerfile phá»• biáº¿n cho nhiá»u dá»± Ã¡n nhÆ° Node.js, PHP vá»›i Laravel, React, Vue, Nuxt vÃ  Next.js. KhÃ¡m phÃ¡ cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u vÃ  thá»±c hÃ nh tá»‘t nháº¥t. CÃ¡c Dockerfile Phá»• Biáº¿n Cho Nhiá»u Dá»± Ãn KhÃ¡c Nhau Docker lÃ  má»™t cÃ´ng cá»¥ áº£o hÃ³a nháº¹ giÃºp phÃ¡t triá»ƒn, triá»ƒn khai vÃ  cháº¡y á»©ng dá»¥ng trong cÃ¡c container. NÃ³ cho phÃ©p báº¡n Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vÃ  táº¥t cáº£ cÃ¡c phá»¥ thuá»™c cá»§a nÃ³ vÃ o má»™t container duy nháº¥t, giÃºp dá»… dÃ ng triá»ƒn khai trÃªn báº¥t ká»³ mÃ´i trÆ°á»ng nÃ o mÃ  khÃ´ng cáº§n lo láº¯ng vá» sá»± khÃ¡c biá»‡t giá»¯a cÃ¡c mÃ´i trÆ°á»ng. ÄÃ¢y lÃ  má»™t sá»‘ Dockerfile cho cÃ¡c dá»± Ã¡n thÆ°á»ng gáº·p, báº¡n cÃ³ thá»ƒ tham kháº£o vÃ  Ä‘iá»u chá»‰nh theo nhu cáº§u cá»§a mÃ¬nh. Ná»™i dung bÃ i viáº¿t Ä‘Æ°á»£c tá»•ng há»£p vÃ  tÃ­ch gÃ³p tá»« nhiá»u nguá»“n khÃ¡c nhau, bao gá»“m cáº£ cÃ¡c dá»± Ã¡n thá»±c táº¿ mÃ  mÃ¬nh Ä‘Ã£ lÃ m.",{"id":365,"title":366,"titles":367,"content":368,"level":102},"/blog/common-docker-file#dockerfile-cho-nodejs","Dockerfile cho Node.js",[361],"Dockerfile cho Node.js ráº¥t quan trá»ng khi triá»ƒn khai á»©ng dá»¥ng JavaScript phÃ­a server. ÄÃ¢y lÃ  má»™t Dockerfile Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u cho má»™t dá»± Ã¡n Node.js Ä‘iá»ƒn hÃ¬nh: CÃ¡ch 2, sá»­ dá»¥ng pm2. Vá» cÆ¡ báº£n thÃ¬ cÃ¡ch nÃ y nháº¹ hÆ¡n kha khÃ¡ so vá»›i npm",{"id":370,"title":371,"titles":372,"content":373,"level":102},"/blog/common-docker-file#dockerfile-reactjs","Dockerfile ReactJs",[361],"CÃ³ thá»ƒ sá»­ dá»¥ng Dockerfile nÃ y cho cÃ¡c dá»± Ã¡n nhÆ° Vue, Angular,... LÆ°u Ã½: á»Ÿ Ä‘Ã¢y thÆ° má»¥c chá»©a nginx/nginx.conf Ä‘áº·t cÃ¹ng cáº¥p vá»›i Dockerfile",{"id":375,"title":376,"titles":377,"content":378,"level":102},"/blog/common-docker-file#dockerfile-cho-php-vá»›i-laravel","Dockerfile cho PHP vá»›i Laravel",[361],"LÆ°u Ã½: thÆ° má»¥c conf/nginx.conf vÃ  conf/supervisord.conf cÃ¹ng cáº¥p vá»›i Dockerfile",{"id":380,"title":381,"titles":382,"content":177,"level":102},"/blog/common-docker-file#dockerfile-cho-nextjs","Dockerfile cho NextJs",[361],{"id":384,"title":385,"titles":386,"content":387,"level":102},"/blog/common-docker-file#tham-kháº£o","Tham kháº£o",[361],"Má»™t sá»‘ Dockerfile Ä‘Æ°á»£c tham kháº£o tá»« Devops Edu",{"id":389,"title":390,"titles":391,"content":392,"level":196},"/blog/jwt","JWT lÃ  gÃ¬? CÃ¡ch hoáº¡t Ä‘á»™ng vÃ  á»©ng dá»¥ng thá»±c táº¿",[],"JWT (JSON Web Token) lÃ  gÃ¬? CÃ¡ch JWT hoáº¡t Ä‘á»™ng, cáº¥u trÃºc gá»“m Header, Payload, Signature vÃ  cÃ¡ch á»©ng dá»¥ng trong xÃ¡c thá»±c báº£o máº­t.",{"id":394,"title":395,"titles":396,"content":397,"level":196},"/blog/jwt#_1-giá»›i-thiá»‡u-vá»-jwt","1. Giá»›i thiá»‡u vá» JWT",[],"JSON Web Token (JWT) lÃ  má»™t tiÃªu chuáº©n má»Ÿ ( RFC 7519 ) Ä‘á»‹nh nghÄ©a má»™t cÃ¡ch thá»©c nhá» gá»n vÃ  Ä‘á»™c láº­p Ä‘á»ƒ truyá»n thÃ´ng tin an toÃ n giá»¯a cÃ¡c bÃªn dÆ°á»›i dáº¡ng Ä‘á»‘i tÆ°á»£ng JSON. ThÃ´ng tin nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¡c minh vÃ  tin cáº­y vÃ¬ nÃ³ Ä‘Æ°á»£c kÃ½ ká»¹ thuáº­t sá»‘. JWT cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ½ báº±ng má»™t bÃ­ máº­t (vá»›i thuáº­t toÃ¡n HMAC ) hoáº·c má»™t cáº·p khÃ³a cÃ´ng khai/riÃªng tÆ° báº±ng RSA hoáº·c ECDSA . TrÃ­ch tá»«: https://jwt.io/introduction",{"id":399,"title":400,"titles":401,"content":402,"level":196},"/blog/jwt#_2-cÃ¡c-thÃ nh-pháº§n-cá»§a-jwt","2. CÃ¡c thÃ nh pháº§n cá»§a JWT",[],"JWT bao gá»“m ba thÃ nh pháº§n chÃ­nh: Header, Payload vÃ  Signature. Má»—i pháº§n Ä‘á»u Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng Base64Url vÃ  Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng dáº¥u cháº¥m (.).\nMá»™t JWT token thÆ°á»ng sáº½ trÃ´ng nhÆ° sau: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c nhÆ° váº­y vá»›i JWT token á»Ÿ trÃªn thÃ¬ cÃ¡c thÃ nh pháº§n sau khi Ä‘Æ°á»£c mÃ£ hÃ³a sáº½ lÃ : Header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9Payload: eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQSignature: SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c Chi tiáº¿t vá» cÃ¡c thÃ nh pháº§n Header: ThÆ°á»ng sáº½ chá»©a thÃ´ng tin vá» thuáº­t toÃ¡n mÃ£ hÃ³a vÃ  loáº¡i token. VÃ­ dá»¥: Payload: ÄÃ¢y lÃ  pháº§n sáº½ chá»©a cÃ¡c thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i. ThÆ°á»ng thÃ¬ chÃºng ta sáº½ lÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng, user_id,... LÆ°u Ã½ ráº±ng JWT token khÃ´ng cÃ³ háº¿t háº¡n, tuy nhiÃªn chÃºng ta cÃ³ thá»ƒ giá»›i háº¡n thá»i gian sá»‘ng cá»§a token báº±ng cÃ¡ch thÃªm cÃ¡c trÆ°á»ng nhÆ° exp, nbf, iat vÃ o payload. VÃ  khi chÃºng ta xÃ¡c thá»±c token chÃºng ta sáº½ cáº§n thÃªm má»™t bÆ°á»›c kiá»ƒm tra thá»i gian sá»‘ng cá»§a token. NhÆ° váº­y chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng JWT token nhÆ° má»™t session token. VÃ­ dá»¥ vá» payload: Signature: ÄÆ°á»£c táº¡o báº±ng cÃ¡ch mÃ£ hÃ³a Header vÃ  Payload vá»›i má»™t khÃ³a bÃ­ máº­t vÃ  thuáº­t toÃ¡n Ä‘Ã£ chá»‰ Ä‘á»‹nh trong Header. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o ráº±ng token khÃ´ng bá»‹ thay Ä‘á»•i trong quÃ¡ trÃ¬nh truyá»n táº£i. VÃ­ dá»¥:",{"id":404,"title":405,"titles":406,"content":407,"level":196},"/blog/jwt#_3-viáº¿t-láº¡i-hÃ m-Ä‘á»ƒ-generate-jwt-token-vÃ -verify-jwt-token-trong-nodejs","3. Viáº¿t láº¡i hÃ m Ä‘á»ƒ generate JWT token vÃ  verify JWT token trong NodeJs",[],"Khi lÃ m viá»‡c vá»›i jwt vÃ  nodeJs, háº§u háº¿t má»i ngÆ°á»i sáº½ sá»­ dá»¥ng thÆ° viá»‡n jsonwebtoken Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token. Tuy nhiÃªn, Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, chÃºng ta cÃ³ thá»ƒ tá»± viáº¿t hÃ m Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token. Giáº£ sá»­ chÃºng ta muá»‘n táº¡o JWT token tá»« thÃ´ng tin user_id=123, khi Ä‘Ã³ pháº§n payload sáº½ lÃ : á» pháº§n header, chÃºng ta sáº½ sá»­ dá»¥ng thuáº­t toÃ¡n HS256 Ä‘á»ƒ mÃ£ hÃ³a JWT token. NÃªn payload sáº½ cÃ³ dáº¡ng nhÆ° sau: Äá»ƒ táº¡o JWT token, chÃºng ta cáº§n mÃ£ hÃ³a Header vÃ  Payload báº±ng Base64Url. Sau Ä‘Ã³, chÃºng ta sáº½ táº¡o chá»¯ kÃ½ báº±ng cÃ¡ch sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256 vá»›i khÃ³a bÃ­ máº­t (secret key) vÃ  káº¿t há»£p Header vÃ  Payload. Äáº§u tiÃªn chÃºng ta cáº§n viáº¿t 1 hÃ m Ä‘á»ƒ mÃ£ hÃ³a Base64Url: á» Ä‘Ã¢y, vÃ¬ chÃºng ta sá»­ dá»¥ng NodeJs nÃªn cÃ³ thá»ƒ sá»­ dá»¥ng Buffer Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i JavaScript trÃªn trÃ¬nh duyá»‡t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng btoa() Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Khi muá»‘n giáº£i mÃ£, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng atob(). HÃ m nÃ y lÃ  hÃ m cÃ³ sáºµn trong trÃ¬nh duyá»‡t. Tiáº¿p theo, chÃºng ta sáº½ triá»ƒn khai hÃ m táº¡o JWT token. Trong Node.js, chÃºng ta cÃ³ thá»ƒ dá»… dÃ ng thá»±c hiá»‡n Ä‘iá»u nÃ y báº±ng cÃ¡ch dÃ¹ng thÆ° viá»‡n tÃ­ch há»£p sáºµn lÃ  crypto, cá»¥ thá»ƒ lÃ  hÃ m createHmac. HÃ m nÃ y sáº½ giÃºp chÃºng ta táº¡o ra chá»¯ kÃ½ (signature) tá»« chuá»—i Ä‘Ã£ mÃ£ hÃ³a gá»“m Header vÃ  Payload, káº¿t há»£p vá»›i secret key Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n vÃ  xÃ¡c thá»±c cá»§a token. Full code mÃ£ hÃ³a JWT token sáº½ nhÆ° sau: NhÆ° váº­y chÃºng ta Ä‘Ã£ cÃ³ hÃ m createJWT Ä‘á»ƒ táº¡o JWT token. HÃ m nÃ y sáº½ nháº­n vÃ o 2 tham sá»‘ lÃ  payload vÃ  secret. payload lÃ  thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i, cÃ²n secret lÃ  khÃ³a bÃ­ máº­t mÃ  chÃºng ta sáº½ sá»­ dá»¥ng Ä‘á»ƒ táº¡o chá»¯ kÃ½ cho token. Äá»‘i vá»›i JWT token, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng báº¥t ká»³ chuá»—i nÃ o lÃ m khÃ³a bÃ­ máº­t. Tuy nhiÃªn, Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t, chÃºng ta nÃªn sá»­ dá»¥ng má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i. VÃ¬ khi sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256, náº¿u káº» táº¥n cÃ´ng biáº¿t Ä‘Æ°á»£c khÃ³a bÃ­ máº­t, há» cÃ³ thá»ƒ táº¡o ra token giáº£ máº¡o vÃ  truy cáº­p vÃ o há»‡ thá»‘ng cá»§a báº¡n. CÃ³ thá»ƒ sá»­ dá»¥ng trang web randomkeygen.com Ä‘á»ƒ táº¡o ra má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i lÃ m khÃ³a bÃ­ máº­t.",{"id":409,"title":410,"titles":411,"content":412,"level":196},"/blog/jwt#_4-xÃ¡c-thá»±c-jwt-token","4. XÃ¡c thá»±c JWT token",[],"Token JWT gá»“m ba pháº§n: Header, Payload vÃ  Signature, Ä‘Æ°á»£c ná»‘i vá»›i nhau báº±ng dáº¥u cháº¥m (.). QuÃ¡ trÃ¬nh xÃ¡c thá»±c diá»…n ra nhÆ° sau: TÃ¡ch token thÃ nh ba pháº§n: Header, Payload vÃ  Signature.Táº¡o láº¡i chá»¯ kÃ½ báº±ng cÃ¡ch káº¿t há»£p Header vÃ  Payload Ä‘Ã£ mÃ£ hÃ³a báº±ng Base64Url, sau Ä‘Ã³ sá»­ dá»¥ng cÃ¹ng thuáº­t toÃ¡n vÃ  khÃ³a bÃ­ máº­t (secret key) Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng khi táº¡o token ban Ä‘áº§u.So sÃ¡nh chá»¯ kÃ½ má»›i táº¡o vá»›i chá»¯ kÃ½ ban Ä‘áº§u trong token:\nNáº¿u hai chá»¯ kÃ½ giá»‘ng nhau, token Ä‘Æ°á»£c xÃ¡c nháº­n lÃ  há»£p lá»‡ (khÃ´ng bá»‹ chá»‰nh sá»­a).Náº¿u khÃ¡c nhau, token Ä‘Ã£ bá»‹ thay Ä‘á»•i hoáº·c khÃ´ng há»£p lá»‡. NgoÃ i ra, Ä‘á»ƒ kiá»ƒm tra xem token cÃ³ háº¿t háº¡n hay chÆ°a, báº¡n cÃ³ thá»ƒ thÃªm trÆ°á»ng exp (expiration) vÃ o Payload. TrÆ°á»ng nÃ y lÆ°u thá»i gian háº¿t háº¡n dÆ°á»›i dáº¡ng timestamp (sá»‘ giÃ¢y ká»ƒ tá»« ngÃ y 1/1/1970). Khi xÃ¡c thá»±c, chá»‰ cáº§n so sÃ¡nh giÃ¡ trá»‹ exp vá»›i thá»i gian hiá»‡n táº¡i Ä‘á»ƒ biáº¿t token cÃ²n hiá»‡u lá»±c hay khÃ´ng.",{"id":414,"title":415,"titles":416,"content":417,"level":196},"/blog/jwt#_5-káº¿t-luáº­n","5. Káº¿t luáº­n",[],"JWT lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ Ä‘á»ƒ xÃ¡c thá»±c vÃ  phÃ¢n quyá»n trong cÃ¡c á»©ng dá»¥ng web. Báº±ng cÃ¡ch hiá»ƒu rÃµ cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, báº¡n cÃ³ thá»ƒ tá»± táº¡o vÃ  xÃ¡c thá»±c JWT token mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o thÆ° viá»‡n bÃªn ngoÃ i. Tuy nhiÃªn, trong thá»±c táº¿, báº¡n nÃªn sá»­ dá»¥ng thÆ° viá»‡n jsonwebtoken Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c. Hy vá»ng bÃ i viáº¿t nÃ y Ä‘Ã£ giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» JWT vÃ  cÃ¡ch sá»­ dá»¥ng nÃ³ trong á»©ng dá»¥ng cá»§a mÃ¬nh. Náº¿u báº¡n cÃ³ báº¥t ká»³ cÃ¢u há»i nÃ o, hÃ£y liÃªn há»‡ vá»›i mÃ¬nh qua cÃ¡c kÃªnh liÃªn láº¡c nhÆ° email, facebook, zalo hoáº·c telegram nhÃ©!",{"id":419,"title":420,"titles":421,"content":422,"level":196},"/blog/jwt#_6-tÃ i-liá»‡u-tham-kháº£o","6. TÃ i liá»‡u tham kháº£o",[],"jwt.ioRFC 7519 - JSON Web Token (JWT)jsonwebtoken",{"id":424,"title":425,"titles":426,"content":427,"level":196},"/blog/use-effect-and-use-layout-effect","PhÃ¢n biá»‡t useEffect vÃ  useLayoutEffect trong React",[],"TÃ¬m hiá»ƒu Ä‘iá»ƒm khÃ¡c nhau giá»¯a useEffect vÃ  useLayoutEffect trong React, giÃºp báº¡n sá»­ dá»¥ng Ä‘Ãºng hook trong tá»«ng tÃ¬nh huá»‘ng cá»¥ thá»ƒ Ä‘á»ƒ tá»‘i Æ°u hiá»‡u nÄƒng vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.",{"id":429,"title":430,"titles":431,"content":432,"level":196},"/blog/use-effect-and-use-layout-effect#useeffect-vÃ -uselayouteffect-trong-react","useEffect vÃ  useLayoutEffect trong React",[],"React cung cáº¥p hai hook máº¡nh máº½ Ä‘á»ƒ xá»­ lÃ½ hiá»‡u á»©ng phá»¥: useEffect vÃ  useLayoutEffect. Tuy chÃºng cÃ³ cÃº phÃ¡p giá»‘ng nhau, nhÆ°ng cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng khÃ¡c biá»‡t vÃ  áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng cÅ©ng nhÆ° hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng.",{"id":434,"title":435,"titles":436,"content":177,"level":102},"/blog/use-effect-and-use-layout-effect#tÃ³m-táº¯t-quy-trÃ¬nh-thá»±c-thi","TÃ³m táº¯t quy trÃ¬nh thá»±c thi",[430],{"id":438,"title":439,"titles":440,"content":441,"level":442},"/blog/use-effect-and-use-layout-effect#useeffect","useEffect",[430,435],"Cháº¡y sau khi React cáº­p nháº­t DOM xong vÃ  render UI xong.ThÃ­ch há»£p cho cÃ¡c tÃ¡c vá»¥ khÃ´ng áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n layout, nhÆ° gá»i API, Ä‘Äƒng kÃ½ sá»± kiá»‡n, log, animation nháº¹â€¦ Quy trÃ¬nh: Cáº­p nháº­t láº¡i stateCáº­p nháº­t DOM (mutated)React render láº¡i UIClean up náº¿u cÃ³Gá»i useEffect callback",3,{"id":444,"title":445,"titles":446,"content":447,"level":442},"/blog/use-effect-and-use-layout-effect#uselayouteffect","useLayoutEffect",[430,435],"Cháº¡y ngay sau khi DOM Ä‘Æ°á»£c cáº­p nháº­t, nhÆ°ng trÆ°á»›c khi browser váº½ láº¡i giao diá»‡n (paint).DÃ¹ng khi báº¡n cáº§n Ä‘o lÆ°á»ng DOM, thay Ä‘á»•i layout hoáº·c ngÄƒn nháº¥p nhÃ¡y giao diá»‡n. Quy trÃ¬nh: Cáº­p nháº­t láº¡i stateCáº­p nháº­t DOM (mutated)Clean up náº¿u dependencies thay Ä‘á»•iGá»i useLayoutEffect callbackReact render láº¡i UI Khi nÃ o dÃ¹ng cÃ¡i nÃ o? TÃ¬nh huá»‘ngNÃªn dÃ¹ngGá»i API, thao tÃ¡c khÃ´ng áº£nh hÆ°á»Ÿng layoutuseEffectÄo kÃ­ch thÆ°á»›c DOM, scroll, positionuseLayoutEffectCáº­p nháº­t class, focus vÃ o inputuseLayoutEffectHiá»‡u á»©ng animation nháº¹ sau renderuseEffectNgÄƒn nhÃ¡y layout (flicker) khi hiá»ƒn thá»‹ componentsuseLayoutEffectCáº­p nháº­t DOM trÆ°á»›c khi browser váº½ láº¡iuseLayoutEffect",{"id":449,"title":450,"titles":451,"content":452,"level":196},"/blog/useful-npm-package","Tá»•ng há»£p cÃ¡c npm package há»¯u Ã­ch cho Frontend vÃ  Backend",[],"Danh sÃ¡ch cÃ¡c npm package há»¯u Ã­ch cho láº­p trÃ¬nh Frontend vÃ  Backend, Ä‘Æ°á»£c tá»•ng há»£p tá»« kinh nghiá»‡m thá»±c táº¿ vÃ  cÃ¡c chia sáº» trong cá»™ng Ä‘á»“ng.",{"id":454,"title":455,"titles":456,"content":457,"level":196},"/blog/useful-npm-package#frontend","Frontend",[],"react-query - React Query ThÆ° viá»‡n quáº£n lÃ½ tráº¡ng thÃ¡i cho React, giÃºp xá»­ lÃ½ cÃ¡c yÃªu cáº§u API vÃ  cache dá»¯ liá»‡u má»™t cÃ¡ch dá»… dÃ ng.@progress/kendo-react-pdf - ThÆ° viá»‡n táº¡o PDF cho React, hay hÆ¡n cÃ¡c thÆ° viá»‡n khÃ¡c á»Ÿ chá»— hÃ¬nh áº£nh sáº½ Ä‘Æ°á»£c xuáº¥t ra dÆ°á»›i Ä‘á»‹nh dáº¡ng SVG, giÃºp cho viá»‡c xuáº¥t áº£nh cháº¥t lÆ°á»£ng cao vÃ  nÃ©t hÆ¡n, khÃ´ng bá»‹ vá»¡ áº£nh khi zoom in.react-split-pane - ThÆ° viá»‡n táº¡o giao diá»‡n chia tÃ¡ch (split view) cho React, giÃºp dá»… dÃ ng táº¡o cÃ¡c layout vá»›i cÃ¡c pháº§n tá»­ cÃ³ thá»ƒ kÃ©o vÃ  tháº£.react-window - ThÆ° viá»‡n giÃºp tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho báº£ng vÃ  danh sÃ¡ch lá»›n trong React báº±ng cÃ¡ch chá»‰ render cÃ¡c pháº§n tá»­ Ä‘ang hiá»ƒn thá»‹ trÃªn UI nháº¹ vÃ  dá»… sá»­ dá»¥ng.",{"id":459,"title":460,"titles":461,"content":462,"level":196},"/blog/useful-npm-package#backend","Backend",[],"Updating...",{"id":464,"title":465,"titles":466,"content":467,"level":196},"/blog/useful-npm-package#cÃ¡c-Ä‘oáº¡n-code-máº«u-há»¯u-dá»¥ng","CÃ¡c Ä‘oáº¡n code máº«u há»¯u dá»¥ng",[],"Code template cho custom send and listen event document",{"id":469,"title":470,"titles":471,"content":472,"level":196},"/blog/useful-script","Tá»•ng há»£p cÃ¡c scripts há»¯u Ã­ch",[],"Danh sÃ¡ch cÃ¡c scripts há»¯u Ã­ch cho láº­p trÃ¬nh viÃªn, giÃºp tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m.",{"id":474,"title":475,"titles":476,"content":477,"level":196},"/blog/useful-script#nÃ©n-áº£nh-vÃ -convert-áº£nh-sang-Ä‘á»‹nh-dáº¡ng-webp","NÃ©n áº£nh vÃ  convert áº£nh sang Ä‘á»‹nh dáº¡ng webp",[],"CÃ i Ä‘áº·t cwebp Äá»‘i vá»›i window thÃ¬ cÃ³ thá»ƒ xem hÆ°á»›ng dáº«n táº¡i: https://developers.google.com/speed/webp/download?hl=vi Script nÃ©n áº£nh Sau khi táº¡o xong file, cáº§n pháº£i gÃ¡n quyá»n thá»±c thi cho file script báº±ng lá»‡nh sau: Sau Ä‘Ã³ cÃ³ thá»ƒ cháº¡y script Ä‘á»ƒ cÃ³ thá»ƒ thá»±c hiá»‡n nÃ©n áº£nh vÃ  chuyá»ƒn Ä‘á»•i sang Ä‘á»‹nh dáº¡ng webp.",[],[480,597,1066,1256,1362,1678,1870,1935],{"id":4,"title":5,"body":481,"date":179,"description":180,"extension":181,"image":182,"keywords":183,"meta":594,"navigation":185,"path":186,"published":185,"seo":595,"stem":188,"tags":596,"__hash__":191},{"type":7,"value":482,"toc":592},[483,487,489,491,493,495,497,499,501,503,505,507,509,515,517,519,521,523,525,527,531,537,539,545,547,549,551,553,555,559,561,563,565,582,584,586,590],[10,484,485],{},[13,486,15],{},[10,488,18],{},[20,490],{},[23,492,26],{"id":25},[10,494,29],{},[31,496],{":files":33},[10,498,36],{},[31,500],{":files":39},[20,502],{},[23,504,45],{"id":44},[10,506,48],{},[31,508],{":files":51},[10,510,511,57,513,62],{},[13,512,56],{},[59,514,61],{},[20,516],{},[23,518,68],{"id":67},[10,520,71],{},[31,522],{":files":74},[20,524],{},[23,526,80],{"id":79},[10,528,83,529,87],{},[59,530,86],{},[89,532,533],{},[92,534,535],{},[13,536,96],{},[31,538],{":files":99},[89,540,541],{"start":102},[92,542,543],{},[13,544,107],{},[31,546],{":files":110},[20,548],{},[23,550,116],{"id":115},[10,552,119],{},[31,554],{":files":122},[10,556,557],{},[13,558,127],{},[31,560],{":files":130},[20,562],{},[23,564,136],{"id":135},[138,566,567,572,577],{},[92,568,569],{},[143,570,148],{"href":145,"rel":571},[147],[92,573,574],{},[143,575,155],{"href":153,"rel":576},[147],[92,578,579],{},[143,580,162],{"href":160,"rel":581},[147],[20,583],{},[166,585],{},[10,587,588],{},[13,589,172],{},[10,591,175],{},{"title":177,"searchDepth":102,"depth":102,"links":593},[],{},{"title":5,"description":180},[190],{"id":598,"title":222,"body":599,"date":179,"description":1057,"extension":181,"image":1058,"keywords":1059,"meta":1060,"navigation":185,"path":221,"published":185,"seo":1061,"stem":1062,"tags":1063,"__hash__":1065},"blog/blog/basic-nginx.md",{"type":7,"value":600,"toc":1055},[601,606,613,616,619,621,624,627,630,633,636,642,645,648,651,654,657,660,666,669,680,683,686,689,703,706,711,714,717,731,734,739,771,774,777,780,783,786,789,796,807,814,825,828,840,843,846,849,852,855,858,872,875,877,880,883,886,912,915,920,923,926,929,931,934,936,939,941,944,946,949,951,954,956,959,961,964,967,970,973,976,978,981,984,987,990,993,996,999,1001,1004,1006,1009,1011,1013,1044,1046,1048,1052],[10,602,603],{},[13,604,605],{},"Giá»›i thiá»‡u vá» Nginx",[607,608,610],"alert",{"type":609},"info",[10,611,612],{},"nginx (\"engine x\") is an HTTP web server, reverse proxy, content cache, load balancer, TCP/UDP proxy server, and mail proxy server. Originally written by Igor Sysoev and distributed under the 2-clause BSD License. Enterprise distributions, commercial support and training are available from F5, Inc.",[10,614,615],{},"Nginx lÃ  má»™t web server, pháº§n má»m cháº¡y trÃªn mÃ¡y chá»§ Ä‘á»ƒ nháº­n vÃ  xá»­ lÃ½ cÃ¡c request (yÃªu cáº§u) tá»« trÃ¬nh duyá»‡t hoáº·c client (nhÆ° API request).",[10,617,618],{},"Ban Ä‘áº§u, Nginx Ä‘Æ°á»£c táº¡o ra Ä‘á»ƒ xá»­ lÃ½ nhiá»u káº¿t ná»‘i cÃ¹ng lÃºc vá»›i hiá»‡u nÄƒng cao, vÃ  ngÃ y nay nÃ³ cÃ²n Ä‘Æ°á»£c dÃ¹ng nhÆ°:\nâ€¢\tWeb Server (mÃ¡y chá»§ web)\nâ€¢\tReverse Proxy (proxy ngÆ°á»£c)\nâ€¢\tLoad Balancer (cÃ¢n báº±ng táº£i)\nâ€¢\tCache server (bá»™ nhá»› Ä‘á»‡m)\nâ€¢\tAPI Gateway (á»Ÿ má»©c cÆ¡ báº£n)",[20,620],{},[23,622,227],{"id":623},"cÃ i-Ä‘áº·t-nginx",[10,625,626],{},"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu:",[31,628],{":files":629},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo apt update\\nsudo apt install nginx\\n\"}]",[10,631,632],{},"Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra tráº¡ng thÃ¡i Nginx:",[31,634],{":files":635},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo systemctl status nginx\"}]",[10,637,638,641],{},[13,639,640],{},"Kiá»ƒm tra tÆ°á»ng lá»­a:","\nÄá»ƒ kiá»ƒm tra cÃ¡c cáº¥u hÃ¬nh Ä‘ang Ä‘Æ°á»£c cháº¡y thÃ¬ cháº¡y lá»‡nh",[31,643],{":files":644},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo ufw app list\"}]",[10,646,647],{},"Káº¿t quáº£ hiá»‡n ra á»Ÿ terminal sáº½ dáº¡ng nhÆ° sau:",[31,649],{":files":650},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"Available applications:\\nNginx Full\\nNginx HTTP\\nNginx HTTPS\\nOpenSSH\\n\"}]",[10,652,653],{},"Sau khi cÃ i Ä‘áº·t Nginx, báº¡n nÃªn Ä‘áº£m báº£o ráº±ng tÆ°á»ng lá»­a (firewall) cho phÃ©p lÆ°u lÆ°á»£ng HTTP vÃ  HTTPS Ä‘á»ƒ mÃ¡y chá»§ cÃ³ thá»ƒ phá»¥c vá»¥ ná»™i dung web.",[31,655],{":files":656},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo ufw allow 'Nginx Full'\\nsudo ufw status\\n\"}]",[10,658,659],{},"Lá»‡nh sudo ufw allow 'Nginx Full' sáº½ má»Ÿ cáº£ hai cá»•ng 80 (HTTP) vÃ  443 (HTTPS).\nSau Ä‘Ã³, dÃ¹ng sudo ufw status Ä‘á»ƒ xÃ¡c nháº­n ráº±ng cÃ¡c cá»•ng nÃ y Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ.",[607,661,663],{"type":662},"warning",[10,664,665],{},"Náº¿u báº¡n chÆ°a báº­t ufw (Uncomplicated Firewall), báº¡n cÃ³ thá»ƒ báº­t báº±ng lá»‡nh sudo ufw enable. Tuy nhiÃªn, hÃ£y Ä‘áº£m báº£o cáº¥u hÃ¬nh chÃ­nh xÃ¡c Ä‘á»ƒ khÃ´ng bá»‹ khÃ³a SSH.",[10,667,668],{},"Kiá»ƒm tra hoáº¡t Ä‘á»™ng cá»§a Nginx:",[10,670,671,672,675,676,679],{},"Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p Ä‘á»‹a chá»‰:\nğŸ‘‰ ",[59,673,674],{},"http://\u003CÄ‘á»‹a_chá»‰_IP_cá»§a_báº¡n>"," hoáº·c ",[59,677,678],{},"http://localhost"," náº¿u kiá»ƒm tra cá»¥c bá»™.",[10,681,682],{},"Báº¡n sáº½ tháº¥y trang máº·c Ä‘á»‹nh â€œWelcome to nginx!â€ náº¿u má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch.",[23,684,232],{"id":685},"ï¸-cáº¥u-hÃ¬nh-default-host-trong-nginx",[10,687,688],{},"TrÃªn Ubuntu, file cáº¥u hÃ¬nh cá»§a Nginx thÆ°á»ng Ä‘Æ°á»£c lÆ°u táº¡i cÃ¡c vá»‹ trÃ­ sau:",[138,690,691,697],{},[92,692,693,696],{},[59,694,695],{},"/etc/nginx/sites-available/default"," (Náº¿u sá»­ dá»¥ng thÆ° má»¥c sites-available vÃ  sites-enabled).",[92,698,699,702],{},[59,700,701],{},"/etc/nginx/conf.d/default.conf"," (ThÃ´ng dá»¥ng cho cÃ¡c cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n).",[10,704,705],{},"Máº·c Ä‘á»‹nh, khi cÃ i Ä‘áº·t Nginx, sáº½ cÃ³ má»™t file cáº¥u hÃ¬nh default trong thÆ° má»¥c /etc/nginx/sites-available/ vá»›i má»™t sá»‘ cáº¥u hÃ¬nh cÆ¡ báº£n. Báº¡n cÃ³ thá»ƒ sá»­a file nÃ y Ä‘á»ƒ cáº¥u hÃ¬nh server block cho website cá»§a mÃ¬nh.",[10,707,708],{},[13,709,710],{},"Cáº¥u hÃ¬nh Default Host",[10,712,713],{},"Má»Ÿ file cáº¥u hÃ¬nh Nginx máº·c Ä‘á»‹nh:",[31,715],{":files":716},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"sudo nano /etc/nginx/sites-available/default\"}]",[10,718,719,720,723,724,727,728,87],{},"Máº·c Ä‘á»‹nh, Nginx sáº½ chá»n block Ä‘áº§u tiÃªn khi khÃ´ng tÃ¬m tháº¥y ",[59,721,722],{},"server_name"," tÆ°Æ¡ng á»©ng. Äá»ƒ cáº¥u hÃ¬nh rÃµ rÃ ng host máº·c Ä‘á»‹nh, báº¡n thÃªm ",[59,725,726],{},"default_server"," vÃ o dÃ²ng ",[59,729,730],{},"listen",[31,732],{":files":733},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80 default_server;\\n    server_name _;\\n    root /var/www/html;\\n    index index.html index.htm;\\n\\n    location / {\\n        try_files $uri $uri/ =404;\\n    }\\n}\\n\"}]",[10,735,736],{},[13,737,738],{},"Ghi chÃº:",[138,740,741,747,753,759,765],{},[92,742,743,746],{},[59,744,745],{},"listen 80 default_server;",": Cáº¥u hÃ¬nh Nginx láº¯ng nghe cá»•ng 80 (HTTP) vÃ  Ä‘Ã¡nh dáº¥u Ä‘Ã¢y lÃ  default_server (server máº·c Ä‘á»‹nh cho cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c).",[92,748,749,752],{},[59,750,751],{},"root /var/www/html;",": ÄÆ°á»ng dáº«n tá»›i thÆ° má»¥c chá»©a cÃ¡c tá»‡p tin cá»§a website. Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y thÃ nh thÆ° má»¥c cá»§a website báº¡n muá»‘n phá»¥c vá»¥.",[92,754,755,758],{},[59,756,757],{},"server_name _;",": Chá»‰ thá»‹ nÃ y cho phÃ©p server cháº¥p nháº­n táº¥t cáº£ cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c. Náº¿u báº¡n cÃ³ tÃªn miá»n cá»¥ thá»ƒ, hÃ£y thay tháº¿ dáº¥u gáº¡ch dÆ°á»›i (_) báº±ng tÃªn miá»n cá»§a báº¡n.",[92,760,761,764],{},[59,762,763],{},"location /",": ÄÃ¢y lÃ  pháº§n cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n cho cÃ¡c yÃªu cáº§u Ä‘áº¿n. Cáº¥u hÃ¬nh nÃ y giÃºp Nginx tÃ¬m kiáº¿m cÃ¡c tá»‡p tin khi ngÆ°á»i dÃ¹ng truy cáº­p vÃ o website.",[92,766,767,770],{},[59,768,769],{},"try_files $uri $uri/ =404;",": Náº¿u yÃªu cáº§u khÃ´ng trÃ¹ng khá»›p vá»›i tá»‡p tin hoáº·c thÆ° má»¥c, sáº½ tráº£ vá» lá»—i 404.",[10,772,773],{},"Sau khi chá»‰nh sá»­a xong, báº¡n cáº§n kiá»ƒm tra xem cáº¥u hÃ¬nh cÃ³ chÃ­nh xÃ¡c khÃ´ng:",[31,775],{":files":776},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo nginx -t\"}]",[10,778,779],{},"Náº¿u khÃ´ng cÃ³ lá»—i nÃ o, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i Nginx Ä‘á»ƒ Ã¡p dá»¥ng cáº¥u hÃ¬nh má»›i:",[31,781],{":files":782},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo systemctl restart nginx\"}]",[10,784,785],{},"Giá»›i thiá»‡u vá» sites-available vÃ  sites-enabled",[10,787,788],{},"Trong Nginx, thÆ° má»¥c sites-available vÃ  sites-enabled lÃ  má»™t cÆ¡ cháº¿ Ä‘á»ƒ quáº£n lÃ½ cÃ¡c website (virtual hosts) mÃ  Nginx cÃ³ thá»ƒ phá»¥c vá»¥. Cáº¥u trÃºc nÃ y giÃºp dá»… dÃ ng báº­t/táº¯t cÃ¡c website mÃ  khÃ´ng cáº§n pháº£i xÃ³a hoáº·c thay Ä‘á»•i cáº¥u hÃ¬nh trá»±c tiáº¿p.",[89,790,791],{},[92,792,793,87],{},[59,794,795],{},"sites-available",[138,797,798,801,804],{},[92,799,800],{},"ÄÃ¢y lÃ  nÆ¡i báº¡n táº¡o vÃ  lÆ°u trá»¯ táº¥t cáº£ cÃ¡c file cáº¥u hÃ¬nh cá»§a cÃ¡c website hoáº·c á»©ng dá»¥ng mÃ  báº¡n muá»‘n Nginx phá»¥c vá»¥.",[92,802,803],{},"Má»—i file cáº¥u hÃ¬nh trong sites-available Ä‘áº¡i diá»‡n cho má»™t website hoáº·c á»©ng dá»¥ng riÃªng biá»‡t.",[92,805,806],{},"VÃ­ dá»¥: /etc/nginx/sites-available/example.com lÃ  cáº¥u hÃ¬nh cho website example.com.",[89,808,809],{"start":102},[92,810,811,87],{},[59,812,813],{},"sites-enabled",[138,815,816,819,822],{},[92,817,818],{},"ÄÃ¢y lÃ  nÆ¡i chá»©a cÃ¡c liÃªn káº¿t tÆ°á»£ng trÆ°ng (symlink) Ä‘áº¿n cÃ¡c file cáº¥u hÃ¬nh trong sites-available mÃ  báº¡n muá»‘n Nginx thá»±c thi.",[92,820,821],{},"CÃ¡c liÃªn káº¿t nÃ y cho phÃ©p Nginx biáº¿t Ä‘Æ°á»£c website nÃ o sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t.",[92,823,824],{},"Báº¡n khÃ´ng nÃªn trá»±c tiáº¿p chá»‰nh sá»­a cÃ¡c file trong sites-enabled. Thay vÃ o Ä‘Ã³, báº¡n táº¡o symlink tá»« sites-available.",[10,826,827],{},"CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng:",[138,829,830,833],{},[92,831,832],{},"Khi báº¡n táº¡o má»™t file cáº¥u hÃ¬nh trong sites-available, báº¡n cÃ³ thá»ƒ kÃ­ch hoáº¡t nÃ³ báº±ng cÃ¡ch táº¡o má»™t symlink Ä‘áº¿n file Ä‘Ã³ trong thÆ° má»¥c sites-enabled.",[92,834,835,836,839],{},"Äá»ƒ táº¡o symlink, sá»­ dá»¥ng lá»‡nh ",[59,837,838],{},"ln -s",".",[10,841,842],{},"VÃ­ dá»¥, náº¿u báº¡n cÃ³ cáº¥u hÃ¬nh example.com trong sites-available, báº¡n cÃ³ thá»ƒ táº¡o symlink vÃ o sites-enabled nhÆ° sau:",[31,844],{":files":845},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/\"}]",[23,847,237],{"id":848},"cáº¥u-hÃ¬nh-deploy-page-tÄ©nh",[10,850,851],{},"Äá»ƒ phá»¥c vá»¥ má»™t trang web tÄ©nh vá»›i Nginx, báº¡n cáº§n cáº¥u hÃ¬nh server block Ä‘á»ƒ trá» Ä‘áº¿n thÆ° má»¥c chá»©a cÃ¡c tá»‡p HTML, CSS, JavaScript vÃ  cÃ¡c tÃ i nguyÃªn khÃ¡c cá»§a trang web.",[31,853],{":files":854},"[{\"title\":\"static-site.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80 default_server;\\n    server_name _;\\n    root /var/www/my_static_site;\\n    index index.html index.htm;\\n\\n    location / {\\n        try_files $uri $uri/ =404;\\n    }\\n}\\n\"}]",[10,856,857],{},"Trong Ä‘Ã³:",[138,859,860,866],{},[92,861,862,865],{},[59,863,864],{},"root /var/www/my_static_site;",": ÄÆ°á»ng dáº«n tá»›i thÆ° má»¥c chá»©a cÃ¡c tá»‡p tin cá»§a trang web tÄ©nh. HÃ£y thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y thÃ nh thÆ° má»¥c thá»±c táº¿ cá»§a báº¡n.",[92,867,868,871],{},[59,869,870],{},"index index.html index.htm;",": XÃ¡c Ä‘á»‹nh cÃ¡c tá»‡p tin máº·c Ä‘á»‹nh khi truy cáº­p vÃ o thÆ° má»¥c gá»‘c.",[23,873,242],{"id":874},"cáº¥u-hÃ¬nh-revert-proxy",[10,876,244],{},[31,878],{":files":879},"[{\"title\":\"reverse-proxy.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80;\\n    server_name example.com;\\n\\n    location / {\\n        proxy_pass http://backend;\\n        proxy_set_header Host $host;\\n        proxy_set_header X-Real-IP $remote_addr;\\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n        proxy_set_header X-Forwarded-Proto $scheme;\\n    }\\n}\\n\"}]",[23,881,247],{"id":882},"load-balancer-trong-nginx",[10,884,885],{},"Nginx há»— trá»£ cáº¥u hÃ¬nh cÃ¢n báº±ng táº£i vá»›i nhiá»u thuáº­t toÃ¡n lá»±a chá»n backend:",[138,887,888,894,900,906],{},[92,889,890,893],{},[59,891,892],{},"round-robin",": Máº·c Ä‘á»‹nh, phÃ¢n phá»‘i Ä‘á»u cho cÃ¡c request.",[92,895,896,899],{},[59,897,898],{},"least_conn",": Chá»n server Ã­t káº¿t ná»‘i nháº¥t.",[92,901,902,905],{},[59,903,904],{},"ip_hash",": Duy trÃ¬ session cho client.",[92,907,908,911],{},[59,909,910],{},"least_time",": chá»n server cÃ³ thá»i gian pháº£n há»“i Ã­t nháº¥t",[10,913,914],{},"CÃ³ thá»ƒ thÃªm trá»ng sá»‘ cho server báº±ng cÃ¡ch thÃªm sá»‘ sau ip:port",[138,916,917],{},[92,918,919],{},"Ex: server 192.168.1.0:8000 weight=3;",[31,921],{":files":922},"[{\"title\":\"upstream.conf\",\"language\":\"nginx\",\"content\":\"upstream myapp1 {\\n    ip_hash;\\n    server 192.168.1.10:8000;\\n    server 192.168.2.10:8000;\\n    # server 192.168.1.10:8000 weight=3;\\n}\\n\"}]",[10,924,925],{},"Cáº¥u hÃ¬nh server block proxy Ä‘áº¿n upstream:",[31,927],{":files":928},"[{\"title\":\"proxy.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80 default_server;\\n  server_name _;\\n  root /var/www/html;\\n  index index.html index.htm;\\n\\n  location / {\\n      proxy_pass http://myapp1;\\n      proxy_set_header Host $host;\\n      proxy_set_header X-Real-IP $remote_addr;\\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n      proxy_set_header X-Forwarded-Proto $scheme;\\n  }\\n}\\n\"}]",[20,930],{},[23,932,252],{"id":933},"gzip-compression",[10,935,254],{},[31,937],{":files":938},"[{\"title\":\"gzip.conf\",\"language\":\"nginx\",\"content\":\"gzip on;\\ngzip_disable \\\"msie6\\\";\\ngzip_vary on;\\ngzip_proxied any;\\ngzip_comp_level 6;\\ngzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n\"}]",[20,940],{},[23,942,257],{"id":943},"kÃ­ch-hoáº¡t-http2",[10,945,259],{},[31,947],{":files":948},"[{\"title\":\"http2.conf\",\"language\":\"nginx\",\"content\":\"listen 443 ssl http2;\\n\"}]",[20,950],{},[23,952,262],{"id":953},"rate-limiting",[10,955,264],{},[31,957],{":files":958},"[{\"title\":\"rate-limiting.conf\",\"language\":\"nginx\",\"content\":\"limit_req_zone $binary_remote_addr zone=mylimit:10m rate=1r/s;\\n\\nlocation /api/ {\\n    limit_req zone=mylimit burst=5;\\n}\\n\"}]",[20,960],{},[23,962,267],{"id":963},"redirect-vÃ -rewrites",[10,965,966],{},"Chuyá»ƒn hÆ°á»›ng toÃ n bá»™ traffic HTTP sang HTTPS:",[31,968],{":files":969},"[{\"title\":\"redirect.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80;\\n    server_name example.com;\\n    return 301 https://$host$request_uri;\\n}\\nserver {\\n    listen 443 ssl;\\n    server_name example.com;\\n    ssl_certificate /path/to/cert.pem;\\n    ssl_certificate_key /path/to/key.pem;\\n}\\n\"}]",[10,971,972],{},"Viáº¿t láº¡i URL cho SPA:",[31,974],{":files":975},"[{\"title\":\"rewrite.conf\",\"language\":\"nginx\",\"content\":\"location /api/ {\\n    rewrite ^/api/(.*)$ /$1 break;\\n}\\n\"}]",[20,977],{},[23,979,272],{"id":980},"hardening-security",[10,982,983],{},"Báº£o vá»‡ server báº±ng cÃ¡ch tá»« chá»‘i truy cáº­p file nháº¡y cáº£m:",[31,985],{":files":986},"[{\"title\":\"deny.conf\",\"language\":\"nginx\",\"content\":\"location ~* \\\\\\\\.(git|env|bak|log)$ {\\n  deny all;\\n}\\n\"}]",[10,988,989],{},"áº¨n thÃ´ng tin server:",[31,991],{":files":992},"[{\"title\":\"security.conf\",\"language\":\"nginx\",\"content\":\"server_tokens off;\\n\"}]",[10,994,995],{},"Chá»‘ng clickjacking vÃ  XSS:",[31,997],{":files":998},"[{\"title\":\"headers.conf\",\"language\":\"nginx\",\"content\":\"add_header X-Content-Security-Policy \\\"default-src 'self'\\\";\\nadd_header X-Frame-Options \\\"DENY\\\";\\nadd_header X-XSS-Protection \\\"1; mode=block\\\";\\nadd_header Referrer-Policy \\\"no-referrer\\\";\\n\"}]",[20,1000],{},[23,1002,277],{"id":1003},"logging-nÃ¢ng-cao",[10,1005,279],{},[31,1007],{":files":1008},"[{\"title\":\"logging.conf\",\"language\":\"nginx\",\"content\":\"log_format main '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n               '$status $body_bytes_sent \\\"$http_referer\\\" '\\n               '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\naccess_log /var/log/nginx/access.log main;\\n\"}]",[20,1010],{},[23,1012,136],{"id":135},[138,1014,1015,1023,1030,1037],{},[92,1016,1017],{},[143,1018,1022],{":target":1019,"href":1020,"rel":1021},"_blank","https://nginx.org/en/docs/",[147],"Nginx Documentation",[92,1024,1025],{},[143,1026,1029],{":target":1019,"href":1027,"rel":1028},"https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/",[147],"Nginx Load Balancing Guide",[92,1031,1032],{},[143,1033,1036],{":target":1019,"href":1034,"rel":1035},"https://www.php.net/manual/en/install.fpm.configuration.php",[147],"Nginx + PHP-FPM Setup",[92,1038,1039],{},[143,1040,1043],{":target":1019,"href":1041,"rel":1042},"https://owasp.org/www-project-secure-headers/",[147],"OWASP Nginx Hardening Guide",[20,1045],{},[166,1047],{},[10,1049,1050],{},[13,1051,172],{},[10,1053,1054],{},"Nginx lÃ  cÃ´ng cá»¥ cá»±c ká»³ máº¡nh máº½ vÃ  linh hoáº¡t, khÃ´ng chá»‰ giá»›i háº¡n á»Ÿ web server mÃ  cÃ²n lÃ  reverse proxy, caching layer, vÃ  load balancer. Viá»‡c náº¯m vá»¯ng vÃ  khai thÃ¡c tá»‘t cÃ¡c tÃ­nh nÄƒng sáº½ giÃºp há»‡ thá»‘ng cá»§a báº¡n hiá»‡u suáº¥t cao, báº£o máº­t vÃ  dá»… má»Ÿ rá»™ng.",{"title":177,"searchDepth":102,"depth":102,"links":1056},[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cáº¥u hÃ¬nh vÃ  triá»ƒn khai Nginx nhÆ° web server, reverse proxy, load balancer, vÃ  cÃ¡c thiáº¿t láº­p nÃ¢ng cao.","/images/blog/basic-nginx/banner.webp","nginx, cáº¥u hÃ¬nh, load balancer",{},{"title":222,"description":1057},"blog/basic-nginx",[1064],"nginx","TD5hnNlhMFCWWA0CxMj845uztymqmFDXVyZdRnUCuN4",{"id":1067,"title":286,"body":1068,"date":179,"description":1247,"extension":181,"image":1248,"keywords":1249,"meta":1250,"navigation":185,"path":285,"published":185,"seo":1251,"stem":1252,"tags":1253,"__hash__":1255},"blog/blog/basic-redis.md",{"type":7,"value":1069,"toc":1233},[1070,1074,1077,1080,1091,1093,1096,1098,1102,1104,1107,1110,1112,1115,1118,1120,1123,1126,1128,1131,1134,1136,1139,1142,1145,1148,1151,1154,1157,1160,1163,1165,1168,1171,1173,1176,1179,1186,1189,1192,1194,1197,1200,1202,1205,1208,1211,1216,1219],[10,1071,1072],{},[13,1073,286],{},[10,1075,1076],{},"Redis lÃ  má»™t kho dá»¯ liá»‡u key-value trong bá»™ nhá»›, mÃ£ nguá»“n má»Ÿ, ná»•i tiáº¿ng vá»›i hiá»‡u suáº¥t vÃ  tÃ­nh linh hoáº¡t. Redis há»— trá»£ nhiá»u kiá»ƒu dá»¯ liá»‡u, phÃ¹ há»£p cho viá»‡c sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m, á»©ng dá»¥ng thá»i gian thá»±c, há»‡ thá»‘ng pub/sub, vÃ  nhiá»u hÆ¡n ná»¯a.",[10,1078,1079],{},"Trong hÆ°á»›ng dáº«n nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu:",[138,1081,1082,1085,1088],{},[92,1083,1084],{},"CÃ¡c kiá»ƒu dá»¯ liá»‡u trong Redis",[92,1086,1087],{},"CÃ¡c lá»‡nh phá»• biáº¿n cá»§a Redis",[92,1089,1090],{},"CÃ¡ch tÃ­ch há»£p Redis vÃ o dá»± Ã¡n Node.js",[20,1092],{},[23,1094,291],{"id":1095},"cÃ¡c-kiá»ƒu-dá»¯-liá»‡u-lá»‡nh-redis",[10,1097,293],{},[1099,1100,296],"h2",{"id":1101},"_1-chuá»—i-strings",[10,1103,298],{},[31,1105],{":files":1106},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SET name \\\"Jay\\\"\\nGET name\\nINCR counter\\n\"}]",[1099,1108,301],{"id":1109},"_2-danh-sÃ¡ch-lists",[10,1111,303],{},[31,1113],{":files":1114},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"LPUSH mylist \\\"apple\\\"\\nRPUSH mylist \\\"banana\\\"\\nLRANGE mylist 0 -1\\n\"}]",[1099,1116,306],{"id":1117},"_3-táº­p-há»£p-sets",[10,1119,308],{},[31,1121],{":files":1122},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SADD myset \\\"apple\\\"\\nSADD myset \\\"banana\\\"\\nSADD myset \\\"apple\\\" # TrÃ¹ng láº·p, sáº½ khÃ´ng Ä‘Æ°á»£c thÃªm\\nSMEMBERS myset\\n\"}]",[1099,1124,311],{"id":1125},"_4-bÄƒm-hashes",[10,1127,313],{},[31,1129],{":files":1130},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"HSET user:1000 name \\\"Jay\\\" age 30\\nHGETALL user:1000\\n\"}]",[1099,1132,316],{"id":1133},"_5-táº­p-há»£p-cÃ³-thá»©-tá»±-sorted-sets",[10,1135,318],{},[31,1137],{":files":1138},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ZADD mysortedset 1 \\\"apple\\\"\\nZADD mysortedset 2 \\\"banana\\\"\\nZRANGE mysortedset 0 -1\\n\"}]",[1099,1140,321],{"id":1141},"_6-bitmaps-hyperloglogs-streams",[10,1143,1144],{},"ÄÃ¢y lÃ  cÃ¡c cáº¥u trÃºc nÃ¢ng cao hÆ¡n:\nBitmaps Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c thao tÃ¡c cáº¥p bit, cho phÃ©p báº¡n thao tÃ¡c cÃ¡c bit riÃªng láº» trong má»™t chuá»—i.",[31,1146],{":files":1147},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SETBIT mybitmap 0 1\\nSETBIT mybitmap 1 1\\nBITCOUNT mybitmap\\n\"}]",[10,1149,1150],{},"HyperLogLogs Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Æ°á»›c tÃ­nh sá»‘ lÆ°á»£ng pháº§n tá»­ duy nháº¥t trong má»™t táº­p há»£p, ráº¥t há»¯u Ã­ch cho cÃ¡c trÆ°á»ng há»£p nhÆ° theo dÃµi sá»‘ lÆ°á»£ng khÃ¡ch truy cáº­p duy nháº¥t.",[31,1152],{":files":1153},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"PFADD myhll \\\"apple\\\" \\\"banana\\\" \\\"orange\\\"\\nPFCOUNT myhll\\n\"}]",[10,1155,1156],{},"Streams Ä‘Æ°á»£c thiáº¿t káº¿ cho cÃ¡c Ä‘Æ°á»ng dáº«n dá»¯ liá»‡u thá»i gian thá»±c vÃ  nguá»“n sá»± kiá»‡n, cho phÃ©p báº¡n thÃªm vÃ  truy váº¥n dá»¯ liá»‡u theo chuá»—i thá»i gian.",[31,1158],{":files":1159},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"XADD mystream * name \\\"Jay\\\" age 30\\nXRANGE mystream - +\\n\"}]",[23,1161,326],{"id":1162},"tÃ­ch-há»£p-redis-vá»›i-nodejs",[10,1164,328],{},[1099,1166,331],{"id":1167},"_1-cÃ i-Ä‘áº·t-redis-vÃ -ioredis",[31,1169],{":files":1170},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"npm install ioredis\\n# hoáº·c\\nyarn add ioredis\\n\"}]",[10,1172,333],{},[31,1174],{":files":1175},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"docker run -d -p 6379:6379 redis\\n\"}]",[1099,1177,336],{"id":1178},"_2-thiáº¿t-láº­p-cÆ¡-báº£n",[10,1180,1181,1182,1185],{},"Táº¡o má»™t tá»‡p cÃ³ tÃªn ",[59,1183,1184],{},"redis.js"," vÃ  thÃªm Ä‘oáº¡n mÃ£ sau:",[31,1187],{":files":1188},"[{\"title\":\"redis.js\",\"language\":\"javascript\",\"content\":\"// redis.ts\\nimport Redis from 'ioredis';\\n\\nconst redis = new Redis({\\n  host: '127.0.0.1',\\n  port: 6379,\\n  // password: 'máº­t_kháº©u_náº¿u_cÃ³'\\n});\\n\\nexport default redis;\\n\"}]",[1099,1190,341],{"id":1191},"_3-sá»­-dá»¥ng-redis-trong-á»©ng-dá»¥ng",[10,1193,343],{},[31,1195],{":files":1196},"[{\"title\":\"example.js\",\"language\":\"javascript\",\"content\":\"// example.ts\\nimport redis from './redis';\\n\\n// Chuá»—i\\nawait redis.set('greeting', 'Hello Redis');\\nconst greeting = await redis.get('greeting');\\nconsole.log(greeting); // Hello Redis\\n\\n// Danh sÃ¡ch\\nawait redis.lpush('queue', 'task1');\\nconst task = await redis.rpop('queue');\\nconsole.log(task); // task1\\n\\n// BÄƒm\\nawait redis.hset('user:1', { name: 'Jay', role: 'admin' });\\nconst user = await redis.hgetall('user:1');\\nconsole.log(user); // { name: 'Jay', role: 'admin' }\\n\\n// Táº­p há»£p cÃ³ thá»© tá»±\\nawait redis.zadd('scores', 100, 'Jay');\\nconst scores = await redis.zrange('scores', 0, -1, 'WITHSCORES');\\nconsole.log(scores);\\n\\n// Pub/Sub\\nredis.subscribe('news');\\nredis.on('message', (channel, message) => {\\n  console.log(`Nháº­n tin nháº¯n tá»« ${channel}: ${message}`);\\n});\\n\\nconst publisher = new Redis();\\npublisher.publish('news', 'Tin nÃ³ng!');\\n\"}]",[1099,1198,346],{"id":1199},"_4-vÃ­-dá»¥-vá»-bá»™-nhá»›-Ä‘á»‡m",[10,1201,348],{},[31,1203],{":files":1204},"[{\"title\":\"cache.js\",\"language\":\"javascript\",\"content\":\"import redis from './redis';\\n\\nasync function getUserData(userId) {\\n  const cacheKey = `user:${userId}`;\\n  const cachedData = await redis.get(cacheKey);\\n\\n  if (cachedData) {\\n    return JSON.parse(cachedData);\\n  }\\n\\n  // MÃ´ phá»ng truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u\\n  const userData = await queryDatabase(userId);\\n  await redis.set(cacheKey, JSON.stringify(userData), 'EX', 3600); // LÆ°u vÃ o bá»™ nhá»› Ä‘á»‡m trong 1 giá»\\n  return userData;\\n}\\n\\nasync function queryDatabase(userId) {\\n  // MÃ´ phá»ng truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u\\n  return { id: userId, name: 'Jay', age: 30 };\\n}\\n\"}]",[1099,1206,351],{"id":1207},"_5-káº¿t-luáº­n",[10,1209,1210],{},"Redis lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ cho bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c á»©ng dá»¥ng thá»i gian thá»±c. Báº±ng cÃ¡ch tÃ­ch há»£p Redis vÃ o cÃ¡c dá»± Ã¡n Node.js, báº¡n cÃ³ thá»ƒ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng. HÆ°á»›ng dáº«n nÃ y Ä‘Ã£ bao quÃ¡t cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» kiá»ƒu dá»¯ liá»‡u, lá»‡nh, vÃ  cÃ¡ch sá»­ dá»¥ng Redis trong á»©ng dá»¥ng Node.js.\nHÃ£y khÃ¡m phÃ¡ thÃªm cÃ¡c tÃ­nh nÄƒng nÃ¢ng cao nhÆ° giao dá»‹ch, scripting Lua, vÃ  clustering khi báº¡n Ä‘Ã£ quen thuá»™c hÆ¡n vá»›i Redis.\nRedis lÃ  má»™t cÃ´ng cá»¥ Ä‘a nÄƒng cÃ³ thá»ƒ nÃ¢ng cao Ä‘Ã¡ng ká»ƒ á»©ng dá»¥ng cá»§a báº¡n.",[10,1212,1213],{},[13,1214,1215],{},"Happy Coding",[1099,1217,356],{"id":1218},"_6-tÃ i-nguyÃªn-tham-kháº£o",[138,1220,1221,1227],{},[92,1222,1223],{},[143,1224,1226],{"href":1225,"target":1019},"https://redis.io/documentation","TÃ i liá»‡u Redis",[92,1228,1229],{},[143,1230,1232],{"href":1231,"target":1019},"https://github.com/redis/ioredis","TÃ i liá»‡u ioredis",{"title":177,"searchDepth":102,"depth":102,"links":1234},[1235,1236,1237,1238,1239,1240,1241,1242,1243,1244,1245,1246],{"id":1101,"depth":102,"text":296},{"id":1109,"depth":102,"text":301},{"id":1117,"depth":102,"text":306},{"id":1125,"depth":102,"text":311},{"id":1133,"depth":102,"text":316},{"id":1141,"depth":102,"text":321},{"id":1167,"depth":102,"text":331},{"id":1178,"depth":102,"text":336},{"id":1191,"depth":102,"text":341},{"id":1199,"depth":102,"text":346},{"id":1207,"depth":102,"text":351},{"id":1218,"depth":102,"text":356},"TÃ¬m hiá»ƒu cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» Redis bao gá»“m cÃ¡c kiá»ƒu dá»¯ liá»‡u vÃ  phÆ°Æ¡ng thá»©c, cÅ©ng nhÆ° cÃ¡ch tÃ­ch há»£p Redis vÃ o á»©ng dá»¥ng Node.js Ä‘á»ƒ sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c tÃ­nh nÄƒng thá»i gian thá»±c.","/images/blog/basic-redis/banner.webp","redis, nodejs, cache, in-memory database",{},{"title":286,"description":1247},"blog/basic-redis",[1254],"redis","3d0XvNroUY6-txkS2aldMngWhf075Own2Hqsb5sjDmM",{"id":1257,"title":361,"body":1258,"date":179,"description":1353,"extension":181,"image":1354,"keywords":1355,"meta":1356,"navigation":185,"path":360,"published":185,"seo":1357,"stem":1358,"tags":1359,"__hash__":1361},"blog/blog/common-docker-file.md",{"type":7,"value":1259,"toc":1346},[1260,1264,1267,1272,1277,1280,1283,1286,1293,1296,1299,1302,1307,1310,1313,1326,1329,1332,1335,1338],[10,1261,1262],{},[13,1263,361],{},[10,1265,1266],{},"Docker lÃ  má»™t cÃ´ng cá»¥ áº£o hÃ³a nháº¹ giÃºp phÃ¡t triá»ƒn, triá»ƒn khai vÃ  cháº¡y á»©ng dá»¥ng trong cÃ¡c container. NÃ³ cho phÃ©p báº¡n Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vÃ  táº¥t cáº£ cÃ¡c phá»¥ thuá»™c cá»§a nÃ³ vÃ o má»™t container duy nháº¥t, giÃºp dá»… dÃ ng triá»ƒn khai trÃªn báº¥t ká»³ mÃ´i trÆ°á»ng nÃ o mÃ  khÃ´ng cáº§n lo láº¯ng vá» sá»± khÃ¡c biá»‡t giá»¯a cÃ¡c mÃ´i trÆ°á»ng.",[607,1268,1269],{"type":609},[10,1270,1271],{},"ÄÃ¢y lÃ  má»™t sá»‘ Dockerfile cho cÃ¡c dá»± Ã¡n thÆ°á»ng gáº·p, báº¡n cÃ³ thá»ƒ tham kháº£o vÃ  Ä‘iá»u chá»‰nh theo nhu cáº§u cá»§a mÃ¬nh.",[10,1273,1274,1275],{},"Ná»™i dung bÃ i viáº¿t Ä‘Æ°á»£c tá»•ng há»£p vÃ  tÃ­ch gÃ³p tá»« nhiá»u nguá»“n khÃ¡c nhau, bao gá»“m cáº£ cÃ¡c dá»± Ã¡n thá»±c táº¿ mÃ  mÃ¬nh Ä‘Ã£ lÃ m.\n",[166,1276],{},[1099,1278,366],{"id":1279},"dockerfile-cho-nodejs",[10,1281,1282],{},"Dockerfile cho Node.js ráº¥t quan trá»ng khi triá»ƒn khai á»©ng dá»¥ng JavaScript phÃ­a server. ÄÃ¢y lÃ  má»™t Dockerfile Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u cho má»™t dá»± Ã¡n Node.js Ä‘iá»ƒn hÃ¬nh:",[31,1284],{":files":1285},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM node:10-alpine\\n\\nRUN mkdir -p /home/node/app/node_modules && chown -R node:node /home/node/app\\nWORKDIR /home/node/app\\nCOPY package*.json ./\\nUSER node\\nRUN npm install\\nCOPY --chown=node:node . .\\n\\nEXPOSE 8080\\nCMD [ \\\"node\\\", \\\"app.js\\\" ]\\n\"}]",[10,1287,1288,1289,1292],{},"CÃ¡ch 2, sá»­ dá»¥ng ",[59,1290,1291],{},"pm2",". Vá» cÆ¡ báº£n thÃ¬ cÃ¡ch nÃ y nháº¹ hÆ¡n kha khÃ¡ so vá»›i npm",[31,1294],{":files":1295},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci --only=production\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nRUN npm install -g pm2\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"pm2-runtime\\\", \\\"start\\\", \\\"server.js\\\"]\\n\"}]",[1099,1297,371],{"id":1298},"dockerfile-reactjs",[10,1300,1301],{},"CÃ³ thá»ƒ sá»­ dá»¥ng Dockerfile nÃ y cho cÃ¡c dá»± Ã¡n nhÆ° Vue, Angular,...",[10,1303,1304,1306],{},[13,1305,56],{}," á»Ÿ Ä‘Ã¢y thÆ° má»¥c chá»©a nginx/nginx.conf Ä‘áº·t cÃ¹ng cáº¥p vá»›i Dockerfile",[31,1308],{":files":1309},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"## build stage ##\\nFROM node:18.18-alpine as build\\nWORKDIR /app\\nCOPY . .\\nRUN npm install\\nRUN npm run build\\n\\n## run stage ##\\nFROM nginx:alpine\\nRUN mkdir /run\\nCOPY --from=build /app/build /run\\nCOPY nginx.conf /etc/nginx/nginx.conf\\n\"},{\"title\":\"nginx.conf\",\"language\":\"nginx\",\"content\":\"user  nginx;\\nworker_processes  1;\\nerror_log  /var/log/nginx/error.log warn;\\npid        /var/run/nginx.pid;\\nevents {\\n  worker_connections  1024;\\n}\\nhttp {\\n  include       /etc/nginx/mime.types;\\n  default_type  application/octet-stream;\\n  log_format  main  '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n                    '$status $body_bytes_sent \\\"$http_referer\\\" '\\n                    '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\n  access_log  /var/log/nginx/access.log  main;\\n  sendfile        on;\\n  keepalive_timeout  65;\\n  server {\\n    listen       80;\\n    server_name  webclient;\\n    location / {\\n      root   /run;\\n      index  index.html;\\n      try_files $uri $uri/ /index.html;\\n    }\\n    error_page   500 502 503 504  /50x.html;\\n    location = /50x.html {\\n      root   /usr/share/nginx/html;\\n    }\\n  }\\n}\\n\"}]",[1099,1311,376],{"id":1312},"dockerfile-cho-php-vá»›i-laravel",[10,1314,1315,1317,1318,1321,1322,1325],{},[13,1316,56],{}," thÆ° má»¥c ",[13,1319,1320],{},"conf/nginx.conf"," vÃ  ",[13,1323,1324],{},"conf/supervisord.conf"," cÃ¹ng cáº¥p vá»›i Dockerfile",[31,1327],{":files":1328},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Composer Dependencies\\nFROM composer:2 AS composer\\n\\nWORKDIR /app\\nCOPY composer.json composer.lock ./\\n\\nRUN composer install --no-dev --optimize-autoloader --no-interaction\\n\\n# Stage 2: Build\\nFROM php:8.2-fpm-alpine AS php\\n\\nWORKDIR /var/www/html\\nCOPY --from=composer /app/vendor ./vendor\\nCOPY . .\\n\\nRUN apk add --no-cache \\\\\\n        libzip-dev \\\\\\n        libpng-dev \\\\\\n        libjpeg-turbo-dev \\\\\\n        freetype-dev \\\\\\n        && docker-php-ext-configure gd --with-freetype --with-jpeg \\\\\\n        && docker-php-ext-install -j$(nproc) gd pdo_mysql zip opcache\\n\\nRUN { \\\\\\n        echo 'opcache.enable=1'; \\\\\\n        echo 'opcache.revalidate_freq=0'; \\\\\\n        echo 'opcache.validate_timestamps=1'; \\\\\\n        echo 'opcache.max_accelerated_files=10000'; \\\\\\n        echo 'opcache.memory_consumption=192'; \\\\\\n        echo 'opcache.max_wasted_percentage=10'; \\\\\\n        echo 'opcache.interned_strings_buffer=16'; \\\\\\n        echo 'opcache.fast_shutdown=1'; \\\\\\n    } > /usr/local/etc/php/conf.d/opcache-recommended.ini\\n\\nRUN chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache\\n\\n# Stage 3: Nginx vÃ  Supervisord\\nFROM nginx:alpine AS nginx\\n\\nWORKDIR /var/www/html\\nCOPY --from=php /var/www/html /var/www/html\\nCOPY conf/nginx.conf /etc/nginx/conf.d/default.conf\\n\\nRUN apk add --no-cache supervisor\\n\\nCOPY conf/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\\n\\nEXPOSE 80\\nCMD [\\\"supervisord\\\", \\\"-c\\\", \\\"/etc/supervisor/conf.d/supervisord.conf\\\"]\\n\"},{\"title\":\"nginx.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80;\\n  server_name localhost;\\n\\n  root /var/www/html/public;\\n  index index.php index.html index.htm;\\n\\n  location / {\\n      try_files $uri $uri/ /index.php?$query_string;\\n  }\\n\\n  location ~ \\\\.php$ {\\n      include fastcgi_params;\\n      fastcgi_pass 127.0.0.1:9000;\\n      fastcgi_index index.php;\\n      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n  }\\n\\n  location ~ /\\\\.ht {\\n      deny all;\\n  }\\n\\n  error_log /var/log/nginx/error.log;\\n  access_log /var/log/nginx/access.log;\\n}\\n\"},{\"title\":\"conf/supervisord.conf\",\"language\":\"ini\",\"content\":\"[supervisord]\\nnodaemon=true\\n\\n[program:php-fpm]\\ncommand=php-fpm\\nautostart=true\\nautorestart=true\\nstderr_logfile=/var/log/php-fpm.err.log\\nstdout_logfile=/var/log/php-fpm.out.log\\n\\n[program:nginx]\\ncommand=nginx -g \\\"daemon off;\\\"\\nautostart=true\\nautorestart=true\\nstderr_logfile=/var/log/nginx.err.log\\nstdout_logfile=/var/log/nginx.out.log\\n\"}]",[1099,1330,381],{"id":1331},"dockerfile-cho-nextjs",[31,1333],{":files":1334},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM node:18-alpine AS base\\n\\nFROM base AS deps\\nRUN apk add --no-cache libc6-compat\\nWORKDIR /app\\n\\nCOPY package.json yarn.lock* package-lock.json* pnpm-lock.yaml* ./\\nRUN npm install\\nFROM base AS builder\\nWORKDIR /app\\nCOPY --from=deps /app/node_modules ./node_modules\\nCOPY . .\\nRUN npm run build\\n\\n\\nFROM base AS runner\\nWORKDIR /app\\n\\nENV NODE_ENV production\\n\\nRUN addgroup --system --gid 1001 nodejs\\nRUN adduser --system --uid 1001 nextjs\\n\\nCOPY --from=builder /app/public ./public\\n\\nRUN mkdir .next\\nRUN chown nextjs:nodejs .next\\n\\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/standalone ./\\nCOPY --from=builder --chown=nextjs:nodejs /app/.next/static ./.next/static\\n\\nUSER nextjs\\n\\nEXPOSE 3000\\n\\nENV PORT 3000\\nENV HOSTNAME \\\"0.0.0.0\\\"\\n\\nCMD [\\\"node\\\", \\\"server.js\\\"]\\n\"}]",[1099,1336,385],{"id":1337},"tham-kháº£o",[10,1339,1340,1341],{},"Má»™t sá»‘ Dockerfile Ä‘Æ°á»£c tham kháº£o tá»« ",[143,1342,1345],{":target":1019,"href":1343,"rel":1344},"https://elroydevops.tech/mau-dockerfile-cac-du-an/",[147],"Devops Edu",{"title":177,"searchDepth":102,"depth":102,"links":1347},[1348,1349,1350,1351,1352],{"id":1279,"depth":102,"text":366},{"id":1298,"depth":102,"text":371},{"id":1312,"depth":102,"text":376},{"id":1331,"depth":102,"text":381},{"id":1337,"depth":102,"text":385},"TÃ¬m hiá»ƒu vá» Docker vÃ  khÃ¡m phÃ¡ cÃ¡c Dockerfile phá»• biáº¿n cho nhiá»u dá»± Ã¡n nhÆ° Node.js, PHP vá»›i Laravel, React, Vue, Nuxt vÃ  Next.js. KhÃ¡m phÃ¡ cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u vÃ  thá»±c hÃ nh tá»‘t nháº¥t.","/images/blog/common-docker-file/banner.webp","docker, dockerfile, file docker máº«u, dockerfile cho nodejs, dockerfile cho php, dockerfile cho react, dockerfile cho vue, dockerfile cho nuxt, dockerfile cho next",{},{"title":361,"description":1353},"blog/common-docker-file",[1360],"docker","CUzxmfILXnmQZUL9yB6i6Ie749cZRj4kA_32hthALuQ",{"id":1363,"title":390,"body":1364,"date":1669,"description":392,"extension":181,"image":1670,"keywords":1671,"meta":1672,"navigation":185,"path":389,"published":185,"seo":1673,"stem":1674,"tags":1675,"__hash__":1677},"blog/blog/jwt.md",{"type":7,"value":1365,"toc":1667},[1366,1369,1372,1382,1385,1399,1404,1407,1427,1429,1434,1441,1444,1447,1454,1469,1472,1475,1490,1493,1500,1503,1506,1509,1512,1524,1527,1530,1545,1556,1559,1562,1582,1588,1597,1600,1603,1622,1625,1628,1631,1633,1639,1642,1645],[23,1367,395],{"id":1368},"_1-giá»›i-thiá»‡u-vá»-jwt",[10,1370,1371],{},"JSON Web Token (JWT) lÃ  má»™t tiÃªu chuáº©n má»Ÿ ( RFC 7519 ) Ä‘á»‹nh nghÄ©a má»™t cÃ¡ch thá»©c nhá» gá»n vÃ  Ä‘á»™c láº­p Ä‘á»ƒ truyá»n thÃ´ng tin an toÃ n giá»¯a cÃ¡c bÃªn dÆ°á»›i dáº¡ng Ä‘á»‘i tÆ°á»£ng JSON. ThÃ´ng tin nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¡c minh vÃ  tin cáº­y vÃ¬ nÃ³ Ä‘Æ°á»£c kÃ½ ká»¹ thuáº­t sá»‘. JWT cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ½ báº±ng má»™t bÃ­ máº­t (vá»›i thuáº­t toÃ¡n HMAC ) hoáº·c má»™t cáº·p khÃ³a cÃ´ng khai/riÃªng tÆ° báº±ng RSA hoáº·c ECDSA .",[10,1373,1374],{},[1375,1376,1377,1378],"em",{},"TrÃ­ch tá»«: ",[143,1379,1380],{"href":1380,"rel":1381},"https://jwt.io/introduction",[147],[23,1383,400],{"id":1384},"_2-cÃ¡c-thÃ nh-pháº§n-cá»§a-jwt",[10,1386,1387,1388,1391,1392,1321,1395,1398],{},"JWT bao gá»“m ba thÃ nh pháº§n chÃ­nh: ",[59,1389,1390],{},"Header",", ",[59,1393,1394],{},"Payload",[59,1396,1397],{},"Signature",". Má»—i pháº§n Ä‘á»u Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng Base64Url vÃ  Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng dáº¥u cháº¥m (.).\nMá»™t JWT token thÆ°á»ng sáº½ trÃ´ng nhÆ° sau:",[607,1400,1401],{"type":609},[10,1402,1403],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[10,1405,1406],{},"nhÆ° váº­y vá»›i JWT token á»Ÿ trÃªn thÃ¬ cÃ¡c thÃ nh pháº§n sau khi Ä‘Æ°á»£c mÃ£ hÃ³a sáº½ lÃ :",[138,1408,1409,1415,1421],{},[92,1410,1411,1412],{},"Header: ",[59,1413,1414],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",[92,1416,1417,1418],{},"Payload: ",[59,1419,1420],{},"eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ",[92,1422,1423,1424],{},"Signature: ",[59,1425,1426],{},"SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[166,1428],{},[10,1430,1431],{},[13,1432,1433],{},"Chi tiáº¿t vá» cÃ¡c thÃ nh pháº§n",[138,1435,1436],{},[92,1437,1438,1440],{},[13,1439,1390],{},": ThÆ°á»ng sáº½ chá»©a thÃ´ng tin vá» thuáº­t toÃ¡n mÃ£ hÃ³a vÃ  loáº¡i token.",[10,1442,1443],{},"VÃ­ dá»¥:",[31,1445],{":files":1446},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"alg\\\": \\\"HS256\\\",\\n  \\\"typ\\\": \\\"JWT\\\"\\n}\\n\"}]",[138,1448,1449],{},[92,1450,1451,1453],{},[13,1452,1394],{},": ÄÃ¢y lÃ  pháº§n sáº½ chá»©a cÃ¡c thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i. ThÆ°á»ng thÃ¬ chÃºng ta sáº½ lÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng, user_id,...",[607,1455,1456],{"type":609},[10,1457,1458,1459,1391,1462,1391,1465,1468],{},"LÆ°u Ã½ ráº±ng JWT token khÃ´ng cÃ³ háº¿t háº¡n, tuy nhiÃªn chÃºng ta cÃ³ thá»ƒ giá»›i háº¡n thá»i gian sá»‘ng cá»§a token báº±ng cÃ¡ch thÃªm cÃ¡c trÆ°á»ng nhÆ° ",[59,1460,1461],{},"exp",[59,1463,1464],{},"nbf",[59,1466,1467],{},"iat"," vÃ o payload. VÃ  khi chÃºng ta xÃ¡c thá»±c token chÃºng ta sáº½ cáº§n thÃªm má»™t bÆ°á»›c kiá»ƒm tra thá»i gian sá»‘ng cá»§a token. NhÆ° váº­y chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng JWT token nhÆ° má»™t session token.",[10,1470,1471],{},"VÃ­ dá»¥ vá» payload:",[31,1473],{":files":1474},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"sub\\\": \\\"1234567890\\\",\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"iat\\\": 1516239022\\n}\\n\"}]",[138,1476,1477],{},[92,1478,1479,1481,1482,1321,1484,1486,1487],{},[13,1480,1397],{},": ÄÆ°á»£c táº¡o báº±ng cÃ¡ch mÃ£ hÃ³a ",[59,1483,1390],{},[59,1485,1394],{}," vá»›i má»™t khÃ³a bÃ­ máº­t vÃ  thuáº­t toÃ¡n Ä‘Ã£ chá»‰ Ä‘á»‹nh trong Header. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o ráº±ng token khÃ´ng bá»‹ thay Ä‘á»•i trong quÃ¡ trÃ¬nh truyá»n táº£i. VÃ­ dá»¥:",[31,1488],{":files":1489},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"HMACSHA256(\\n  base64UrlEncode(header) + \\\".\\\" +\\n  base64UrlEncode(payload),\\n  your-256-bit-secret\\n)\\n\"}]",[23,1491,405],{"id":1492},"_3-viáº¿t-láº¡i-hÃ m-Ä‘á»ƒ-generate-jwt-token-vÃ -verify-jwt-token-trong-nodejs",[10,1494,1495,1496,1499],{},"Khi lÃ m viá»‡c vá»›i jwt vÃ  nodeJs, háº§u háº¿t má»i ngÆ°á»i sáº½ sá»­ dá»¥ng thÆ° viá»‡n ",[59,1497,1498],{},"jsonwebtoken"," Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token. Tuy nhiÃªn, Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, chÃºng ta cÃ³ thá»ƒ tá»± viáº¿t hÃ m Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token.",[10,1501,1502],{},"Giáº£ sá»­ chÃºng ta muá»‘n táº¡o JWT token tá»« thÃ´ng tin user_id=123, khi Ä‘Ã³ pháº§n payload sáº½ lÃ :",[31,1504],{":files":1505},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123\\n}\\n\"}]",[10,1507,1508],{},"á» pháº§n header, chÃºng ta sáº½ sá»­ dá»¥ng thuáº­t toÃ¡n HS256 Ä‘á»ƒ mÃ£ hÃ³a JWT token. NÃªn payload sáº½ cÃ³ dáº¡ng nhÆ° sau:",[31,1510],{":files":1511},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const header = {\\n  alg: 'HS256',\\n  typ: 'JWT'\\n}\\n\"}]",[10,1513,1514,1515,1321,1517,1519,1520,1321,1522,839],{},"Äá»ƒ táº¡o JWT token, chÃºng ta cáº§n mÃ£ hÃ³a ",[59,1516,1390],{},[59,1518,1394],{}," báº±ng Base64Url. Sau Ä‘Ã³, chÃºng ta sáº½ táº¡o chá»¯ kÃ½ báº±ng cÃ¡ch sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256 vá»›i khÃ³a bÃ­ máº­t (secret key) vÃ  káº¿t há»£p ",[59,1521,1390],{},[59,1523,1394],{},[10,1525,1526],{},"Äáº§u tiÃªn chÃºng ta cáº§n viáº¿t 1 hÃ m Ä‘á»ƒ mÃ£ hÃ³a Base64Url:",[31,1528],{":files":1529},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\"}]",[10,1531,1532,1533,1536,1537,1540,1541,1544],{},"á» Ä‘Ã¢y, vÃ¬ chÃºng ta sá»­ dá»¥ng NodeJs nÃªn cÃ³ thá»ƒ sá»­ dá»¥ng ",[59,1534,1535],{},"Buffer"," Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i JavaScript trÃªn trÃ¬nh duyá»‡t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ",[59,1538,1539],{},"btoa()"," Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Khi muá»‘n giáº£i mÃ£, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ",[59,1542,1543],{},"atob()",". HÃ m nÃ y lÃ  hÃ m cÃ³ sáºµn trong trÃ¬nh duyá»‡t.",[10,1546,1547,1548,1551,1552,1555],{},"Tiáº¿p theo, chÃºng ta sáº½ triá»ƒn khai hÃ m táº¡o JWT token. Trong Node.js, chÃºng ta cÃ³ thá»ƒ dá»… dÃ ng thá»±c hiá»‡n Ä‘iá»u nÃ y báº±ng cÃ¡ch dÃ¹ng thÆ° viá»‡n tÃ­ch há»£p sáºµn lÃ  ",[59,1549,1550],{},"crypto",", cá»¥ thá»ƒ lÃ  hÃ m ",[59,1553,1554],{},"createHmac",". HÃ m nÃ y sáº½ giÃºp chÃºng ta táº¡o ra chá»¯ kÃ½ (signature) tá»« chuá»—i Ä‘Ã£ mÃ£ hÃ³a gá»“m Header vÃ  Payload, káº¿t há»£p vá»›i secret key Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n vÃ  xÃ¡c thá»±c cá»§a token.",[10,1557,1558],{},"Full code mÃ£ hÃ³a JWT token sáº½ nhÆ° sau:",[31,1560],{":files":1561},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const crypto = require('crypto');\\nfunction base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\\nfunction createJWT(payload, secret) {\\n  const header = {\\n    alg: 'HS256',\\n    typ: 'JWT'\\n  };\\n\\n  const encodedHeader = base64UrlEncode(JSON.stringify(header));\\n  const encodedPayload = base64UrlEncode(JSON.stringify(payload));\\n\\n  const signature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return `${encodedHeader}.${encodedPayload}.${signature}`;\\n}\\n\"}]",[10,1563,1564,1565,1568,1569,1321,1572,1575,1576,1578,1579,1581],{},"NhÆ° váº­y chÃºng ta Ä‘Ã£ cÃ³ hÃ m ",[59,1566,1567],{},"createJWT"," Ä‘á»ƒ táº¡o JWT token. HÃ m nÃ y sáº½ nháº­n vÃ o 2 tham sá»‘ lÃ  ",[59,1570,1571],{},"payload",[59,1573,1574],{},"secret",". ",[59,1577,1571],{}," lÃ  thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i, cÃ²n ",[59,1580,1574],{}," lÃ  khÃ³a bÃ­ máº­t mÃ  chÃºng ta sáº½ sá»­ dá»¥ng Ä‘á»ƒ táº¡o chá»¯ kÃ½ cho token.",[607,1583,1585],{"type":1584},"error",[10,1586,1587],{},"Äá»‘i vá»›i JWT token, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng báº¥t ká»³ chuá»—i nÃ o lÃ m khÃ³a bÃ­ máº­t. Tuy nhiÃªn, Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t, chÃºng ta nÃªn sá»­ dá»¥ng má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i. VÃ¬ khi sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256, náº¿u káº» táº¥n cÃ´ng biáº¿t Ä‘Æ°á»£c khÃ³a bÃ­ máº­t, há» cÃ³ thá»ƒ táº¡o ra token giáº£ máº¡o vÃ  truy cáº­p vÃ o há»‡ thá»‘ng cá»§a báº¡n.",[10,1589,1590,1591,1596],{},"CÃ³ thá»ƒ sá»­ dá»¥ng trang web ",[143,1592,1595],{"href":1593,"rel":1594},"https://randomkeygen.com/",[147],"randomkeygen.com"," Ä‘á»ƒ táº¡o ra má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i lÃ m khÃ³a bÃ­ máº­t.",[23,1598,410],{"id":1599},"_4-xÃ¡c-thá»±c-jwt-token",[10,1601,1602],{},"Token JWT gá»“m ba pháº§n: Header, Payload vÃ  Signature, Ä‘Æ°á»£c ná»‘i vá»›i nhau báº±ng dáº¥u cháº¥m (.). QuÃ¡ trÃ¬nh xÃ¡c thá»±c diá»…n ra nhÆ° sau:",[89,1604,1605,1608,1611],{},[92,1606,1607],{},"TÃ¡ch token thÃ nh ba pháº§n: Header, Payload vÃ  Signature.",[92,1609,1610],{},"Táº¡o láº¡i chá»¯ kÃ½ báº±ng cÃ¡ch káº¿t há»£p Header vÃ  Payload Ä‘Ã£ mÃ£ hÃ³a báº±ng Base64Url, sau Ä‘Ã³ sá»­ dá»¥ng cÃ¹ng thuáº­t toÃ¡n vÃ  khÃ³a bÃ­ máº­t (secret key) Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng khi táº¡o token ban Ä‘áº§u.",[92,1612,1613,1614],{},"So sÃ¡nh chá»¯ kÃ½ má»›i táº¡o vá»›i chá»¯ kÃ½ ban Ä‘áº§u trong token:\n",[138,1615,1616,1619],{},[92,1617,1618],{},"Náº¿u hai chá»¯ kÃ½ giá»‘ng nhau, token Ä‘Æ°á»£c xÃ¡c nháº­n lÃ  há»£p lá»‡ (khÃ´ng bá»‹ chá»‰nh sá»­a).",[92,1620,1621],{},"Náº¿u khÃ¡c nhau, token Ä‘Ã£ bá»‹ thay Ä‘á»•i hoáº·c khÃ´ng há»£p lá»‡.",[31,1623],{":files":1624},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function verifyJWT(token, secret) {\\n  const [encodedHeader, encodedPayload, signature] = token.split('.');\\n  const expectedSignature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return expectedSignature === signature;\\n}\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconsole.log('Token is valid:', isValid);\\n\"}]",[10,1626,1627],{},"NgoÃ i ra, Ä‘á»ƒ kiá»ƒm tra xem token cÃ³ háº¿t háº¡n hay chÆ°a, báº¡n cÃ³ thá»ƒ thÃªm trÆ°á»ng exp (expiration) vÃ o Payload. TrÆ°á»ng nÃ y lÆ°u thá»i gian háº¿t háº¡n dÆ°á»›i dáº¡ng timestamp (sá»‘ giÃ¢y ká»ƒ tá»« ngÃ y 1/1/1970). Khi xÃ¡c thá»±c, chá»‰ cáº§n so sÃ¡nh giÃ¡ trá»‹ exp vá»›i thá»i gian hiá»‡n táº¡i Ä‘á»ƒ biáº¿t token cÃ²n hiá»‡u lá»±c hay khÃ´ng.",[31,1629],{":files":1630},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123,\\n  exp: Math.floor(Date.now() / 1000) + (60 * 60) // Háº¿t háº¡n sau 1 giá»\\n};\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconst decodedPayload = JSON.parse(Buffer.from(token.split('.')[1], 'base64').toString());\\nconst isExpired = decodedPayload.exp \u003C Math.floor(Date.now() / 1000);\\nconsole.log('Token is valid:', isValid);\\nconsole.log('Token is expired:', isExpired);\\n\"}]",[23,1632,415],{"id":1207},[10,1634,1635,1636,1638],{},"JWT lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ Ä‘á»ƒ xÃ¡c thá»±c vÃ  phÃ¢n quyá»n trong cÃ¡c á»©ng dá»¥ng web. Báº±ng cÃ¡ch hiá»ƒu rÃµ cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, báº¡n cÃ³ thá»ƒ tá»± táº¡o vÃ  xÃ¡c thá»±c JWT token mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o thÆ° viá»‡n bÃªn ngoÃ i. Tuy nhiÃªn, trong thá»±c táº¿, báº¡n nÃªn sá»­ dá»¥ng thÆ° viá»‡n ",[59,1637,1498],{}," Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c.",[10,1640,1641],{},"Hy vá»ng bÃ i viáº¿t nÃ y Ä‘Ã£ giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» JWT vÃ  cÃ¡ch sá»­ dá»¥ng nÃ³ trong á»©ng dá»¥ng cá»§a mÃ¬nh. Náº¿u báº¡n cÃ³ báº¥t ká»³ cÃ¢u há»i nÃ o, hÃ£y liÃªn há»‡ vá»›i mÃ¬nh qua cÃ¡c kÃªnh liÃªn láº¡c nhÆ° email, facebook, zalo hoáº·c telegram nhÃ©!",[23,1643,420],{"id":1644},"_6-tÃ i-liá»‡u-tham-kháº£o",[138,1646,1647,1654,1661],{},[92,1648,1649],{},[143,1650,1653],{"href":1651,"rel":1652},"https://jwt.io/",[147],"jwt.io",[92,1655,1656],{},[143,1657,1660],{"href":1658,"rel":1659},"https://datatracker.ietf.org/doc/html/rfc7519",[147],"RFC 7519 - JSON Web Token (JWT)",[92,1662,1663],{},[143,1664,1498],{"href":1665,"rel":1666},"https://www.npmjs.com/package/jsonwebtoken",[147],{"title":177,"searchDepth":102,"depth":102,"links":1668},[],"2025-05-05T00:00:00.000Z","/images/blog/jwt/banner.webp","jwt, jsonwebtoken, nodejs, báº£o máº­t, xÃ¡c thá»±c",{},{"title":390,"description":392},"blog/jwt",[1676],"npm","yD1lXH-8Az6ik7WFkgSdIc4k5xNC5W8to4G-L9vWpKw",{"id":1679,"title":425,"body":1680,"date":1860,"description":427,"extension":181,"image":1861,"keywords":1862,"meta":1863,"navigation":185,"path":424,"published":185,"seo":1864,"stem":1865,"tags":1866,"__hash__":1869},"blog/blog/use-effect-and-use-layout-effect.md",{"type":7,"value":1681,"toc":1854},[1682,1685,1693,1695,1698,1704,1719,1724,1741,1746,1757,1761,1775,1780],[23,1683,430],{"id":1684},"useeffect-vÃ -uselayouteffect-trong-react",[10,1686,1687,1688,1321,1690,1692],{},"React cung cáº¥p hai hook máº¡nh máº½ Ä‘á»ƒ xá»­ lÃ½ hiá»‡u á»©ng phá»¥: ",[59,1689,439],{},[59,1691,445],{},". Tuy chÃºng cÃ³ cÃº phÃ¡p giá»‘ng nhau, nhÆ°ng cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng khÃ¡c biá»‡t vÃ  áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng cÅ©ng nhÆ° hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng.",[20,1694],{},[1099,1696,435],{"id":1697},"tÃ³m-táº¯t-quy-trÃ¬nh-thá»±c-thi",[1699,1700,1702],"h3",{"id":1701},"useeffect",[59,1703,439],{},[138,1705,1706,1712],{},[92,1707,1708,1709,839],{},"Cháº¡y ",[13,1710,1711],{},"sau khi React cáº­p nháº­t DOM xong vÃ  render UI xong",[92,1713,1714,1715,1718],{},"ThÃ­ch há»£p cho cÃ¡c ",[13,1716,1717],{},"tÃ¡c vá»¥ khÃ´ng áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n layout",", nhÆ° gá»i API, Ä‘Äƒng kÃ½ sá»± kiá»‡n, log, animation nháº¹â€¦",[10,1720,1721],{},[13,1722,1723],{},"Quy trÃ¬nh:",[89,1725,1726,1729,1732,1735,1738],{},[92,1727,1728],{},"Cáº­p nháº­t láº¡i state",[92,1730,1731],{},"Cáº­p nháº­t DOM (mutated)",[92,1733,1734],{},"React render láº¡i UI",[92,1736,1737],{},"Clean up náº¿u cÃ³",[92,1739,1740],{},"Gá»i useEffect callback",[1699,1742,1744],{"id":1743},"uselayouteffect",[59,1745,445],{},[138,1747,1748,1754],{},[92,1749,1750,1751,839],{},"Cháº¡y ngay sau khi DOM Ä‘Æ°á»£c cáº­p nháº­t, nhÆ°ng ",[13,1752,1753],{},"trÆ°á»›c khi browser váº½ láº¡i giao diá»‡n (paint)",[92,1755,1756],{},"DÃ¹ng khi báº¡n cáº§n Ä‘o lÆ°á»ng DOM, thay Ä‘á»•i layout hoáº·c ngÄƒn nháº¥p nhÃ¡y giao diá»‡n.",[10,1758,1759],{},[13,1760,1723],{},[89,1762,1763,1765,1767,1770,1773],{},[92,1764,1728],{},[92,1766,1731],{},[92,1768,1769],{},"Clean up náº¿u dependencies thay Ä‘á»•i",[92,1771,1772],{},"Gá»i useLayoutEffect callback",[92,1774,1734],{},[10,1776,1777],{},[13,1778,1779],{},"Khi nÃ o dÃ¹ng cÃ¡i nÃ o?",[1781,1782,1783,1796],"table",{},[1784,1785,1786],"thead",{},[1787,1788,1789,1793],"tr",{},[1790,1791,1792],"th",{},"TÃ¬nh huá»‘ng",[1790,1794,1795],{},"NÃªn dÃ¹ng",[1797,1798,1799,1809,1818,1827,1836,1845],"tbody",{},[1787,1800,1801,1805],{},[1802,1803,1804],"td",{},"Gá»i API, thao tÃ¡c khÃ´ng áº£nh hÆ°á»Ÿng layout",[1802,1806,1807],{},[59,1808,439],{},[1787,1810,1811,1814],{},[1802,1812,1813],{},"Äo kÃ­ch thÆ°á»›c DOM, scroll, position",[1802,1815,1816],{},[59,1817,445],{},[1787,1819,1820,1823],{},[1802,1821,1822],{},"Cáº­p nháº­t class, focus vÃ o input",[1802,1824,1825],{},[59,1826,445],{},[1787,1828,1829,1832],{},[1802,1830,1831],{},"Hiá»‡u á»©ng animation nháº¹ sau render",[1802,1833,1834],{},[59,1835,439],{},[1787,1837,1838,1841],{},[1802,1839,1840],{},"NgÄƒn nhÃ¡y layout (flicker) khi hiá»ƒn thá»‹ components",[1802,1842,1843],{},[59,1844,445],{},[1787,1846,1847,1850],{},[1802,1848,1849],{},"Cáº­p nháº­t DOM trÆ°á»›c khi browser váº½ láº¡i",[1802,1851,1852],{},[59,1853,445],{},{"title":177,"searchDepth":102,"depth":102,"links":1855},[1856],{"id":1697,"depth":102,"text":435,"children":1857},[1858,1859],{"id":1701,"depth":442,"text":439},{"id":1743,"depth":442,"text":445},"2025-05-06T00:00:00.000Z","/images/blog/use-effect-and-use-layout-effect/banner.webp","react, useEffect, useLayoutEffect, react hooks, hiá»‡u nÄƒng react",{},{"title":425,"description":427},"blog/use-effect-and-use-layout-effect",[1867,1868],"react","hooks","HXO6Sisd7tUFKWbj14nolEED4VvAwDgBBQlMW2pMGXc",{"id":1871,"title":450,"body":1872,"date":1669,"description":452,"extension":181,"image":1928,"keywords":1929,"meta":1930,"navigation":185,"path":449,"published":185,"seo":1931,"stem":1932,"tags":1933,"__hash__":1934},"blog/blog/useful-npm-package.md",{"type":7,"value":1873,"toc":1926},[1874,1877,1909,1912,1916,1919],[23,1875,455],{"id":1876},"frontend",[138,1878,1879,1891,1897,1903],{},[92,1880,1881,1884,1885,1890],{},[59,1882,1883],{},"react-query"," - ",[143,1886,1889],{"href":1887,"rel":1888},"https://react-query.tanstack.com/",[147],"React Query"," ThÆ° viá»‡n quáº£n lÃ½ tráº¡ng thÃ¡i cho React, giÃºp xá»­ lÃ½ cÃ¡c yÃªu cáº§u API vÃ  cache dá»¯ liá»‡u má»™t cÃ¡ch dá»… dÃ ng.",[92,1892,1893,1896],{},[59,1894,1895],{},"@progress/kendo-react-pdf"," - ThÆ° viá»‡n táº¡o PDF cho React, hay hÆ¡n cÃ¡c thÆ° viá»‡n khÃ¡c á»Ÿ chá»— hÃ¬nh áº£nh sáº½ Ä‘Æ°á»£c xuáº¥t ra dÆ°á»›i Ä‘á»‹nh dáº¡ng SVG, giÃºp cho viá»‡c xuáº¥t áº£nh cháº¥t lÆ°á»£ng cao vÃ  nÃ©t hÆ¡n, khÃ´ng bá»‹ vá»¡ áº£nh khi zoom in.",[92,1898,1899,1902],{},[59,1900,1901],{},"react-split-pane"," - ThÆ° viá»‡n táº¡o giao diá»‡n chia tÃ¡ch (split view) cho React, giÃºp dá»… dÃ ng táº¡o cÃ¡c layout vá»›i cÃ¡c pháº§n tá»­ cÃ³ thá»ƒ kÃ©o vÃ  tháº£.",[92,1904,1905,1908],{},[59,1906,1907],{},"react-window"," - ThÆ° viá»‡n giÃºp tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho báº£ng vÃ  danh sÃ¡ch lá»›n trong React báº±ng cÃ¡ch chá»‰ render cÃ¡c pháº§n tá»­ Ä‘ang hiá»ƒn thá»‹ trÃªn UI nháº¹ vÃ  dá»… sá»­ dá»¥ng.",[23,1910,460],{"id":1911},"backend",[138,1913,1914],{},[92,1915,462],{},[23,1917,465],{"id":1918},"cÃ¡c-Ä‘oáº¡n-code-máº«u-há»¯u-dá»¥ng",[138,1920,1921],{},[92,1922,467,1923],{},[31,1924],{":files":1925},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"export const sendEvent = (eventName, detail) => {\\n  document.dispatchEvent(new CustomEvent(eventName, { detail }));\\n}\\nexport const listenEvent = (eventName, callback, context = document) => {\\n  context.addEventListener(eventName, callback);\\n  return () => context.removeEventListener(eventName, callback);\\n}\\n\"}]",{"title":177,"searchDepth":102,"depth":102,"links":1927},[],"/images/blog/useful-npm-package/banner.webp","npm, package, frontend, backend",{},{"title":450,"description":452},"blog/useful-npm-package",[1676],"3WcFSlvMJI3UivaSkcCnPhkOghwUynB93HX-3qAii7M",{"id":1936,"title":470,"body":1937,"date":1860,"description":472,"extension":181,"image":1979,"keywords":1980,"meta":1981,"navigation":185,"path":469,"published":185,"seo":1982,"stem":1983,"tags":1984,"__hash__":1986},"blog/blog/useful-script.md",{"type":7,"value":1938,"toc":1977},[1939,1942,1947,1954,1957,1965,1968,1971,1974],[23,1940,475],{"id":1941},"nÃ©n-áº£nh-vÃ -convert-áº£nh-sang-Ä‘á»‹nh-dáº¡ng-webp",[138,1943,1944],{},[92,1945,1946],{},"CÃ i Ä‘áº·t cwebp",[10,1948,1949,1950],{},"Äá»‘i vá»›i window thÃ¬ cÃ³ thá»ƒ xem hÆ°á»›ng dáº«n táº¡i: ",[143,1951,1952],{"href":1952,"rel":1953},"https://developers.google.com/speed/webp/download?hl=vi",[147],[31,1955],{":files":1956},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"# CÃ i Ä‘áº·t cwebp trÃªn Ubuntu\\nsudo apt-get install webp\\n# CÃ i Ä‘áº·t cwebp trÃªn MacOS\\nbrew install webp\\n\"}]",[138,1958,1959],{},[92,1960,1961,1962],{},"Script nÃ©n áº£nh",[31,1963],{":files":1964},"[{\"title\":\"compress-image.sh\",\"language\":\"bash\",\"content\":\"#!/bin/bash\\n# Kiá»ƒm tra Ä‘á»‘i sá»‘ Ä‘áº§u vÃ o\\nif [ -z \\\"$1\\\" ]; then\\n  echo \\\"âŒ Vui lÃ²ng cung cáº¥p Ä‘Æ°á»ng dáº«n file áº£nh.\\\"\\n  echo \\\"ğŸ‘‰ VÃ­ dá»¥: ./compress-local-image.sh ./image.png\\\"\\n  exit 1\\nfi\\n\\nINPUT=\\\"$1\\\"\\n\\n# Kiá»ƒm tra file tá»“n táº¡i\\nif [ ! -f \\\"$INPUT\\\" ]; then\\n  echo \\\"âŒ File khÃ´ng tá»“n táº¡i: $INPUT\\\"\\n  exit 1\\nfi\\n\\n# Láº¥y tÃªn file\\nBASENAME=$(basename \\\"$INPUT\\\")\\nFILENAME=\\\"${BASENAME%.*}\\\"\\nEXT=\\\"${BASENAME##*.}\\\"\\n\\n# NÃ©n vÃ  chuyá»ƒn sang WebP\\necho \\\"ğŸ”„ Äang nÃ©n vÃ  chuyá»ƒn sang WebP...\\\"\\ncwebp -q 80 \\\"$INPUT\\\" -o \\\"${FILENAME}.webp\\\"\\n\\necho \\\"âœ… ÄÃ£ táº¡o file: ${FILENAME}.webp\\\"\\n\"}]",[10,1966,1967],{},"Sau khi táº¡o xong file, cáº§n pháº£i gÃ¡n quyá»n thá»±c thi cho file script báº±ng lá»‡nh sau:",[31,1969],{":files":1970},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"chmod +x compress-image.sh\\n\"}]",[10,1972,1973],{},"Sau Ä‘Ã³ cÃ³ thá»ƒ cháº¡y script Ä‘á»ƒ cÃ³ thá»ƒ thá»±c hiá»‡n nÃ©n áº£nh vÃ  chuyá»ƒn Ä‘á»•i sang Ä‘á»‹nh dáº¡ng webp.",[31,1975],{":files":1976},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"./compress-image.sh ./image.png\\n\"}]",{"title":177,"searchDepth":102,"depth":102,"links":1978},[],"/images/blog/useful-script/banner.webp","scripts, useful scripts",{},{"title":470,"description":472},"blog/useful-script",[1985],"scripts","p2CPfckDeoI2knSQ-ynr8rSQk_PPFQZKh6qH2TkcMP0",1764214333777]