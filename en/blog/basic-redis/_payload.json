[{"data":1,"prerenderedAt":2025},["ShallowReactive",2],{"blog-basic-redis":3,"search":235,"related-posts-basic-redis":507,"all-post":508},{"id":4,"title":5,"body":6,"date":222,"description":223,"extension":224,"image":225,"keywords":226,"meta":227,"navigation":228,"path":229,"published":228,"seo":230,"stem":231,"tags":232,"__hash__":234},"blog/blog/basic-redis.md","CÆ¡ Báº£n Vá» Redis vÃ  TÃ­ch Há»£p Vá»›i Node.js",{"type":7,"value":8,"toc":206},"minimal",[9,15,18,21,34,37,42,45,50,53,57,61,64,67,71,74,77,81,84,87,91,94,97,101,104,107,110,113,116,119,123,126,130,133,136,139,143,151,154,158,161,164,168,171,174,178,181,186,190],[10,11,12],"p",{},[13,14,5],"strong",{},[10,16,17],{},"Redis lÃ  má»™t kho dá»¯ liá»‡u key-value trong bá»™ nhá»›, mÃ£ nguá»“n má»Ÿ, ná»•i tiáº¿ng vá»›i hiá»‡u suáº¥t vÃ  tÃ­nh linh hoáº¡t. Redis há»— trá»£ nhiá»u kiá»ƒu dá»¯ liá»‡u, phÃ¹ há»£p cho viá»‡c sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m, á»©ng dá»¥ng thá»i gian thá»±c, há»‡ thá»‘ng pub/sub, vÃ  nhiá»u hÆ¡n ná»¯a.",[10,19,20],{},"Trong hÆ°á»›ng dáº«n nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu:",[22,23,24,28,31],"ul",{},[25,26,27],"li",{},"CÃ¡c kiá»ƒu dá»¯ liá»‡u trong Redis",[25,29,30],{},"CÃ¡c lá»‡nh phá»• biáº¿n cá»§a Redis",[25,32,33],{},"CÃ¡ch tÃ­ch há»£p Redis vÃ o dá»± Ã¡n Node.js",[35,36],"hr",{},[38,39,41],"h1",{"id":40},"cÃ¡c-kiá»ƒu-dá»¯-liá»‡u-lá»‡nh-redis","ğŸ“¦ CÃ¡c Kiá»ƒu Dá»¯ Liá»‡u & Lá»‡nh Redis",[10,43,44],{},"Redis há»— trá»£ nhiá»u cáº¥u trÃºc dá»¯ liá»‡u khÃ¡c nhau:",[46,47,49],"h2",{"id":48},"_1-chuá»—i-strings","1. Chuá»—i (Strings)",[10,51,52],{},"Chuá»—i lÃ  kiá»ƒu dá»¯ liá»‡u cÆ¡ báº£n nháº¥t trong Redis. Báº¡n cÃ³ thá»ƒ lÆ°u trá»¯ báº¥t ká»³ giÃ¡ trá»‹ nÃ o dÆ°á»›i dáº¡ng chuá»—i, bao gá»“m cáº£ sá»‘ nguyÃªn vÃ  JSON Ä‘Æ°á»£c tuáº§n tá»± hÃ³a.",[54,55],"code-block",{":files":56},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SET name \\\"Jay\\\"\\nGET name\\nINCR counter\\n\"}]",[46,58,60],{"id":59},"_2-danh-sÃ¡ch-lists","2. Danh sÃ¡ch (Lists)",[10,62,63],{},"Danh sÃ¡ch lÃ  cÃ¡c táº­p há»£p cÃ³ thá»© tá»± cá»§a chuá»—i. Báº¡n cÃ³ thá»ƒ thÃªm pháº§n tá»­ vÃ o Ä‘áº§u hoáº·c cuá»‘i danh sÃ¡ch.",[54,65],{":files":66},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"LPUSH mylist \\\"apple\\\"\\nRPUSH mylist \\\"banana\\\"\\nLRANGE mylist 0 -1\\n\"}]",[46,68,70],{"id":69},"_3-táº­p-há»£p-sets","3. Táº­p há»£p (Sets)",[10,72,73],{},"Táº­p há»£p lÃ  cÃ¡c táº­p há»£p khÃ´ng cÃ³ thá»© tá»± cá»§a cÃ¡c chuá»—i duy nháº¥t. ChÃºng há»— trá»£ cÃ¡c phÃ©p toÃ¡n nhÆ° há»£p, giao, vÃ  hiá»‡u.",[54,75],{":files":76},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SADD myset \\\"apple\\\"\\nSADD myset \\\"banana\\\"\\nSADD myset \\\"apple\\\" # TrÃ¹ng láº·p, sáº½ khÃ´ng Ä‘Æ°á»£c thÃªm\\nSMEMBERS myset\\n\"}]",[46,78,80],{"id":79},"_4-bÄƒm-hashes","4. BÄƒm (Hashes)",[10,82,83],{},"BÄƒm lÃ  cÃ¡c báº£n Ä‘á»“ giá»¯a trÆ°á»ng chuá»—i vÃ  giÃ¡ trá»‹ chuá»—i, ráº¥t lÃ½ tÆ°á»Ÿng Ä‘á»ƒ biá»ƒu diá»…n cÃ¡c Ä‘á»‘i tÆ°á»£ng.",[54,85],{":files":86},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"HSET user:1000 name \\\"Jay\\\" age 30\\nHGETALL user:1000\\n\"}]",[46,88,90],{"id":89},"_5-táº­p-há»£p-cÃ³-thá»©-tá»±-sorted-sets","5. Táº­p há»£p cÃ³ thá»© tá»± (Sorted Sets)",[10,92,93],{},"Táº­p há»£p cÃ³ thá»© tá»± tÆ°Æ¡ng tá»± nhÆ° táº­p há»£p nhÆ°ng cÃ³ má»™t Ä‘iá»ƒm sá»‘ liÃªn káº¿t vá»›i má»—i pháº§n tá»­, cho phÃ©p truy xuáº¥t theo thá»© tá»±.",[54,95],{":files":96},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ZADD mysortedset 1 \\\"apple\\\"\\nZADD mysortedset 2 \\\"banana\\\"\\nZRANGE mysortedset 0 -1\\n\"}]",[46,98,100],{"id":99},"_6-bitmaps-hyperloglogs-streams","6. Bitmaps, HyperLogLogs, Streams",[10,102,103],{},"ÄÃ¢y lÃ  cÃ¡c cáº¥u trÃºc nÃ¢ng cao hÆ¡n:\nBitmaps Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c thao tÃ¡c cáº¥p bit, cho phÃ©p báº¡n thao tÃ¡c cÃ¡c bit riÃªng láº» trong má»™t chuá»—i.",[54,105],{":files":106},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SETBIT mybitmap 0 1\\nSETBIT mybitmap 1 1\\nBITCOUNT mybitmap\\n\"}]",[10,108,109],{},"HyperLogLogs Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Æ°á»›c tÃ­nh sá»‘ lÆ°á»£ng pháº§n tá»­ duy nháº¥t trong má»™t táº­p há»£p, ráº¥t há»¯u Ã­ch cho cÃ¡c trÆ°á»ng há»£p nhÆ° theo dÃµi sá»‘ lÆ°á»£ng khÃ¡ch truy cáº­p duy nháº¥t.",[54,111],{":files":112},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"PFADD myhll \\\"apple\\\" \\\"banana\\\" \\\"orange\\\"\\nPFCOUNT myhll\\n\"}]",[10,114,115],{},"Streams Ä‘Æ°á»£c thiáº¿t káº¿ cho cÃ¡c Ä‘Æ°á»ng dáº«n dá»¯ liá»‡u thá»i gian thá»±c vÃ  nguá»“n sá»± kiá»‡n, cho phÃ©p báº¡n thÃªm vÃ  truy váº¥n dá»¯ liá»‡u theo chuá»—i thá»i gian.",[54,117],{":files":118},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"XADD mystream * name \\\"Jay\\\" age 30\\nXRANGE mystream - +\\n\"}]",[38,120,122],{"id":121},"tÃ­ch-há»£p-redis-vá»›i-nodejs","ğŸ”§ TÃ­ch Há»£p Redis Vá»›i Node.js",[10,124,125],{},"Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng thÆ° viá»‡n ioredis hoáº·c redis client phá»• biáº¿n. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá»›i ioredis.",[46,127,129],{"id":128},"_1-cÃ i-Ä‘áº·t-redis-vÃ -ioredis","1. CÃ i Äáº·t Redis vÃ  ioredis",[54,131],{":files":132},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"npm install ioredis\\n# hoáº·c\\nyarn add ioredis\\n\"}]",[10,134,135],{},"Äáº£m báº£o ráº±ng báº¡n Ä‘Ã£ cÃ i Ä‘áº·t vÃ  cháº¡y Redis. Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Docker Ä‘á»ƒ cháº¡y Redis má»™t cÃ¡ch dá»… dÃ ng:",[54,137],{":files":138},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"docker run -d -p 6379:6379 redis\\n\"}]",[46,140,142],{"id":141},"_2-thiáº¿t-láº­p-cÆ¡-báº£n","2. Thiáº¿t Láº­p CÆ¡ Báº£n",[10,144,145,146,150],{},"Táº¡o má»™t tá»‡p cÃ³ tÃªn ",[147,148,149],"code",{},"redis.js"," vÃ  thÃªm Ä‘oáº¡n mÃ£ sau:",[54,152],{":files":153},"[{\"title\":\"redis.js\",\"language\":\"javascript\",\"content\":\"// redis.ts\\nimport Redis from 'ioredis';\\n\\nconst redis = new Redis({\\n  host: '127.0.0.1',\\n  port: 6379,\\n  // password: 'máº­t_kháº©u_náº¿u_cÃ³'\\n});\\n\\nexport default redis;\\n\"}]",[46,155,157],{"id":156},"_3-sá»­-dá»¥ng-redis-trong-á»©ng-dá»¥ng","3. Sá»­ Dá»¥ng Redis Trong á»¨ng Dá»¥ng",[10,159,160],{},"BÃ¢y giá» báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Redis trong á»©ng dá»¥ng cá»§a mÃ¬nh. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» viá»‡c thiáº¿t láº­p vÃ  láº¥y giÃ¡ trá»‹:",[54,162],{":files":163},"[{\"title\":\"example.js\",\"language\":\"javascript\",\"content\":\"// example.ts\\nimport redis from './redis';\\n\\n// Chuá»—i\\nawait redis.set('greeting', 'Hello Redis');\\nconst greeting = await redis.get('greeting');\\nconsole.log(greeting); // Hello Redis\\n\\n// Danh sÃ¡ch\\nawait redis.lpush('queue', 'task1');\\nconst task = await redis.rpop('queue');\\nconsole.log(task); // task1\\n\\n// BÄƒm\\nawait redis.hset('user:1', { name: 'Jay', role: 'admin' });\\nconst user = await redis.hgetall('user:1');\\nconsole.log(user); // { name: 'Jay', role: 'admin' }\\n\\n// Táº­p há»£p cÃ³ thá»© tá»±\\nawait redis.zadd('scores', 100, 'Jay');\\nconst scores = await redis.zrange('scores', 0, -1, 'WITHSCORES');\\nconsole.log(scores);\\n\\n// Pub/Sub\\nredis.subscribe('news');\\nredis.on('message', (channel, message) => {\\n  console.log(`Nháº­n tin nháº¯n tá»« ${channel}: ${message}`);\\n});\\n\\nconst publisher = new Redis();\\npublisher.publish('news', 'Tin nÃ³ng!');\\n\"}]",[46,165,167],{"id":166},"_4-vÃ­-dá»¥-vá»-bá»™-nhá»›-Ä‘á»‡m","4. VÃ­ Dá»¥ Vá» Bá»™ Nhá»› Äá»‡m",[10,169,170],{},"Báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng Redis lÃ m bá»™ nhá»› Ä‘á»‡m Ä‘á»ƒ lÆ°u trá»¯ dá»¯ liá»‡u Ä‘Æ°á»£c truy cáº­p thÆ°á»ng xuyÃªn. DÆ°á»›i Ä‘Ã¢y lÃ  má»™t vÃ­ dá»¥ vá» viá»‡c lÆ°u trá»¯ káº¿t quáº£ truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u vÃ o bá»™ nhá»› Ä‘á»‡m:",[54,172],{":files":173},"[{\"title\":\"cache.js\",\"language\":\"javascript\",\"content\":\"import redis from './redis';\\n\\nasync function getUserData(userId) {\\n  const cacheKey = `user:${userId}`;\\n  const cachedData = await redis.get(cacheKey);\\n\\n  if (cachedData) {\\n    return JSON.parse(cachedData);\\n  }\\n\\n  // MÃ´ phá»ng truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u\\n  const userData = await queryDatabase(userId);\\n  await redis.set(cacheKey, JSON.stringify(userData), 'EX', 3600); // LÆ°u vÃ o bá»™ nhá»› Ä‘á»‡m trong 1 giá»\\n  return userData;\\n}\\n\\nasync function queryDatabase(userId) {\\n  // MÃ´ phá»ng truy váº¥n cÆ¡ sá»Ÿ dá»¯ liá»‡u\\n  return { id: userId, name: 'Jay', age: 30 };\\n}\\n\"}]",[46,175,177],{"id":176},"_5-káº¿t-luáº­n","5. Káº¿t Luáº­n",[10,179,180],{},"Redis lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ cho bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c á»©ng dá»¥ng thá»i gian thá»±c. Báº±ng cÃ¡ch tÃ­ch há»£p Redis vÃ o cÃ¡c dá»± Ã¡n Node.js, báº¡n cÃ³ thá»ƒ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng. HÆ°á»›ng dáº«n nÃ y Ä‘Ã£ bao quÃ¡t cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» kiá»ƒu dá»¯ liá»‡u, lá»‡nh, vÃ  cÃ¡ch sá»­ dá»¥ng Redis trong á»©ng dá»¥ng Node.js.\nHÃ£y khÃ¡m phÃ¡ thÃªm cÃ¡c tÃ­nh nÄƒng nÃ¢ng cao nhÆ° giao dá»‹ch, scripting Lua, vÃ  clustering khi báº¡n Ä‘Ã£ quen thuá»™c hÆ¡n vá»›i Redis.\nRedis lÃ  má»™t cÃ´ng cá»¥ Ä‘a nÄƒng cÃ³ thá»ƒ nÃ¢ng cao Ä‘Ã¡ng ká»ƒ á»©ng dá»¥ng cá»§a báº¡n.",[10,182,183],{},[13,184,185],{},"Happy Coding",[46,187,189],{"id":188},"_6-tÃ i-nguyÃªn-tham-kháº£o","6. TÃ i NguyÃªn Tham Kháº£o",[22,191,192,200],{},[25,193,194],{},[195,196,199],"a",{"href":197,"target":198},"https://redis.io/documentation","_blank","TÃ i liá»‡u Redis",[25,201,202],{},[195,203,205],{"href":204,"target":198},"https://github.com/redis/ioredis","TÃ i liá»‡u ioredis",{"title":207,"searchDepth":208,"depth":208,"links":209},"",2,[210,211,212,213,214,215,216,217,218,219,220,221],{"id":48,"depth":208,"text":49},{"id":59,"depth":208,"text":60},{"id":69,"depth":208,"text":70},{"id":79,"depth":208,"text":80},{"id":89,"depth":208,"text":90},{"id":99,"depth":208,"text":100},{"id":128,"depth":208,"text":129},{"id":141,"depth":208,"text":142},{"id":156,"depth":208,"text":157},{"id":166,"depth":208,"text":167},{"id":176,"depth":208,"text":177},{"id":188,"depth":208,"text":189},"2025-04-25T00:00:00.000Z","TÃ¬m hiá»ƒu cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» Redis bao gá»“m cÃ¡c kiá»ƒu dá»¯ liá»‡u vÃ  phÆ°Æ¡ng thá»©c, cÅ©ng nhÆ° cÃ¡ch tÃ­ch há»£p Redis vÃ o á»©ng dá»¥ng Node.js Ä‘á»ƒ sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c tÃ­nh nÄƒng thá»i gian thá»±c.","md","/images/blog/basic-redis/banner.webp","redis, nodejs, cache, in-memory database",{},true,"/blog/basic-redis",{"title":5,"description":223},"blog/basic-redis",[233],"redis","3d0XvNroUY6-txkS2aldMngWhf075Own2Hqsb5sjDmM",[236,242,247,252,257,262,267,272,277,282,287,292,297,302,307,312,317,322,327,331,334,337,340,343,346,349,352,356,359,362,366,369,372,376,380,385,390,394,398,403,408,412,417,422,427,432,437,442,447,452,457,462,466,472,477,482,487,492,497,502],{"id":237,"title":238,"titles":239,"content":240,"level":241},"/blog/ansible","Tá»•ng quan vÃ  cáº¥u hÃ¬nh Ansible",[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t, cáº¥u hÃ¬nh SSH, inventory vÃ  sá»­ dá»¥ng Playbook trong Ansible. HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t vÃ  triá»ƒn khai Ansible Ansible lÃ  má»™t cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a máº¡nh máº½, giÃºp quáº£n lÃ½ cáº¥u hÃ¬nh, triá»ƒn khai á»©ng dá»¥ng vÃ  Ä‘iá»u phá»‘i há»‡ thá»‘ng má»™t cÃ¡ch dá»… dÃ ng. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu cÃ¡ch cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  sá»­ dá»¥ng Ansible thÃ´ng qua cÃ¡c vÃ­ dá»¥ thá»±c táº¿.",1,{"id":243,"title":244,"titles":245,"content":246,"level":241},"/blog/ansible#ï¸-cÃ i-Ä‘áº·t-ansible","ğŸ› ï¸ CÃ i Ä‘áº·t Ansible",[],"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Ansible trÃªn Ubuntu: Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra phiÃªn báº£n Ansible:",{"id":248,"title":249,"titles":250,"content":251,"level":241},"/blog/ansible#cáº¥u-hÃ¬nh-ssh","ğŸ”‘ Cáº¥u hÃ¬nh SSH",[],"Äá»ƒ Ansible cÃ³ thá»ƒ káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ tá»« xa, báº¡n cáº§n cáº¥u hÃ¬nh SSH. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch sao chÃ©p SSH key Ä‘áº¿n mÃ¡y chá»§ khÃ¡c: LÆ°u Ã½: Thay vinhtieng@123.3123.12 báº±ng tÃªn ngÆ°á»i dÃ¹ng vÃ  Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ tá»« xa.",{"id":253,"title":254,"titles":255,"content":256,"level":241},"/blog/ansible#hosts-inventory","ğŸ“‹ Hosts - Inventory",[],"File inventory lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a danh sÃ¡ch cÃ¡c mÃ¡y chá»§ mÃ  Ansible sáº½ quáº£n lÃ½. ÄÃ¢y lÃ  má»™t vÃ­ dá»¥ cÆ¡ báº£n:",{"id":258,"title":259,"titles":260,"content":261,"level":241},"/blog/ansible#kiá»ƒm-tra-káº¿t-ná»‘i-ping","ğŸ“ Kiá»ƒm tra káº¿t ná»‘i (Ping)",[],"Báº¡n cÃ³ thá»ƒ kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ báº±ng lá»‡nh ping: Ping vá»›i file hosts máº·c Ä‘á»‹nh: Ping vá»›i file inventory tÃ¹y chá»‰nh:",{"id":263,"title":264,"titles":265,"content":266,"level":241},"/blog/ansible#playbook-task-module","ğŸ“œ Playbook - Task - Module",[],"Playbook lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c tÃ¡c vá»¥ (tasks) cáº§n thá»±c hiá»‡n trÃªn cÃ¡c mÃ¡y chá»§. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch cháº¡y má»™t playbook: VÃ­ dá»¥ vá» Playbook Ä‘Æ¡n giáº£n:",{"id":268,"title":269,"titles":270,"content":271,"level":241},"/blog/ansible#tÃ i-liá»‡u-tham-kháº£o","ğŸ“š TÃ i liá»‡u tham kháº£o",[],"Ansible DocumentationAnsible GalaxyAnsible Playbook Guide TÃ³m láº¡i: Ansible lÃ  cÃ´ng cá»¥ máº¡nh máº½ giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥ quáº£n trá»‹ há»‡ thá»‘ng. Viá»‡c náº¯m vá»¯ng cÃ¡ch sá»­ dá»¥ng Ansible sáº½ giÃºp báº¡n tiáº¿t kiá»‡m thá»i gian vÃ  giáº£m thiá»ƒu lá»—i trong quÃ¡ trÃ¬nh quáº£n lÃ½ há»‡ thá»‘ng.",{"id":273,"title":274,"titles":275,"content":276,"level":241},"/blog/basic-nginx","Tá»•ng quan vÃ  cáº¥u hÃ¬nh thÃ´ng dá»¥ng Nginx",[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cáº¥u hÃ¬nh máº·c Ä‘á»‹nh, PHP-FPM vÃ  thiáº¿t láº­p Load Balancer vá»›i Nginx. HÆ°á»›ng dáº«n chi tiáº¿t vá» cáº¥u hÃ¬nh vÃ  triá»ƒn khai Nginx Nginx lÃ  má»™t web server mÃ£ nguá»“n má»Ÿ máº¡nh máº½, Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n Ä‘á»ƒ phá»¥c vá»¥ ná»™i dung tÄ©nh, reverse proxy, cÃ¢n báº±ng táº£i, báº£o máº­t vÃ  há»— trá»£ PHP thÃ´ng qua FastCGI. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ Ä‘i qua cÃ¡c cáº¥u hÃ¬nh tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao, bao gá»“m: CÃ¡ch cÃ i Ä‘áº·t NginxCáº¥u hÃ¬nh mÃ¡y chá»§ máº·c Ä‘á»‹nh (default host)TÃ­ch há»£p vá»›i PHP-FPMThiáº¿t láº­p Load Balancer (cÃ¢n báº±ng táº£i)Gzip, HTTP/2, Rate limitingRedirect, RewritesHardening & SecurityLogging nÃ¢ng cao",{"id":278,"title":279,"titles":280,"content":281,"level":241},"/blog/basic-nginx#ï¸-cÃ i-Ä‘áº·t-nginx","ğŸ› ï¸ CÃ i Ä‘áº·t Nginx",[],"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu: Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra tráº¡ng thÃ¡i Nginx: Kiá»ƒm tra tÆ°á»ng lá»­a: Sau khi cÃ i Ä‘áº·t Nginx, báº¡n nÃªn Ä‘áº£m báº£o ráº±ng tÆ°á»ng lá»­a (firewall) cho phÃ©p lÆ°u lÆ°á»£ng HTTP vÃ  HTTPS Ä‘á»ƒ mÃ¡y chá»§ cÃ³ thá»ƒ phá»¥c vá»¥ ná»™i dung web. Lá»‡nh sudo ufw allow 'Nginx Full' sáº½ má»Ÿ cáº£ hai cá»•ng 80 (HTTP) vÃ  443 (HTTPS).\nSau Ä‘Ã³, dÃ¹ng sudo ufw status Ä‘á»ƒ xÃ¡c nháº­n ráº±ng cÃ¡c cá»•ng nÃ y Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ. Náº¿u báº¡n chÆ°a báº­t ufw (Uncomplicated Firewall), báº¡n cÃ³ thá»ƒ báº­t báº±ng lá»‡nh sudo ufw enable. Tuy nhiÃªn, hÃ£y Ä‘áº£m báº£o cáº¥u hÃ¬nh chÃ­nh xÃ¡c Ä‘á»ƒ khÃ´ng bá»‹ khÃ³a SSH. Kiá»ƒm tra hoáº¡t Ä‘á»™ng cá»§a Nginx: Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p Ä‘á»‹a chá»‰:\nğŸ‘‰ http://\u003CÄ‘á»‹a_chá»‰_IP_cá»§a_báº¡n> hoáº·c http://localhost náº¿u kiá»ƒm tra cá»¥c bá»™. Báº¡n sáº½ tháº¥y trang máº·c Ä‘á»‹nh â€œWelcome to nginx!â€ náº¿u má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch.",{"id":283,"title":284,"titles":285,"content":286,"level":241},"/blog/basic-nginx#ï¸-cáº¥u-hÃ¬nh-default-host-trong-nginx","âš™ï¸ Cáº¥u hÃ¬nh Default Host trong Nginx",[],"TrÃªn Ubuntu, file cáº¥u hÃ¬nh cá»§a Nginx thÆ°á»ng Ä‘Æ°á»£c lÆ°u táº¡i cÃ¡c vá»‹ trÃ­ sau: /etc/nginx/sites-available/default (Náº¿u sá»­ dá»¥ng thÆ° má»¥c sites-available vÃ  sites-enabled)./etc/nginx/conf.d/default.conf (ThÃ´ng dá»¥ng cho cÃ¡c cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n). Máº·c Ä‘á»‹nh, khi cÃ i Ä‘áº·t Nginx, sáº½ cÃ³ má»™t file cáº¥u hÃ¬nh default trong thÆ° má»¥c /etc/nginx/sites-available/ vá»›i má»™t sá»‘ cáº¥u hÃ¬nh cÆ¡ báº£n. Báº¡n cÃ³ thá»ƒ sá»­a file nÃ y Ä‘á»ƒ cáº¥u hÃ¬nh server block cho website cá»§a mÃ¬nh. Cáº¥u hÃ¬nh Default Host Má»Ÿ file cáº¥u hÃ¬nh Nginx máº·c Ä‘á»‹nh: Máº·c Ä‘á»‹nh, Nginx sáº½ chá»n block Ä‘áº§u tiÃªn khi khÃ´ng tÃ¬m tháº¥y server_name tÆ°Æ¡ng á»©ng. Äá»ƒ cáº¥u hÃ¬nh rÃµ rÃ ng host máº·c Ä‘á»‹nh, báº¡n thÃªm default_server vÃ o dÃ²ng listen: Ghi chÃº: listen 80 default_server;: Cáº¥u hÃ¬nh Nginx láº¯ng nghe cá»•ng 80 (HTTP) vÃ  Ä‘Ã¡nh dáº¥u Ä‘Ã¢y lÃ  default_server (server máº·c Ä‘á»‹nh cho cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c).root /var/www/html;: ÄÆ°á»ng dáº«n tá»›i thÆ° má»¥c chá»©a cÃ¡c tá»‡p tin cá»§a website. Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y thÃ nh thÆ° má»¥c cá»§a website báº¡n muá»‘n phá»¥c vá»¥.server_name _;: Chá»‰ thá»‹ nÃ y cho phÃ©p server cháº¥p nháº­n táº¥t cáº£ cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c. Náº¿u báº¡n cÃ³ tÃªn miá»n cá»¥ thá»ƒ, hÃ£y thay tháº¿ dáº¥u gáº¡ch dÆ°á»›i (_) báº±ng tÃªn miá»n cá»§a báº¡n.location /: ÄÃ¢y lÃ  pháº§n cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n cho cÃ¡c yÃªu cáº§u Ä‘áº¿n. Cáº¥u hÃ¬nh nÃ y giÃºp Nginx tÃ¬m kiáº¿m cÃ¡c tá»‡p tin khi ngÆ°á»i dÃ¹ng truy cáº­p vÃ o website.try_files $uri $uri/ =404;: Náº¿u yÃªu cáº§u khÃ´ng trÃ¹ng khá»›p vá»›i tá»‡p tin hoáº·c thÆ° má»¥c, sáº½ tráº£ vá» lá»—i 404. Sau khi chá»‰nh sá»­a xong, báº¡n cáº§n kiá»ƒm tra xem cáº¥u hÃ¬nh cÃ³ chÃ­nh xÃ¡c khÃ´ng: Náº¿u khÃ´ng cÃ³ lá»—i nÃ o, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i Nginx Ä‘á»ƒ Ã¡p dá»¥ng cáº¥u hÃ¬nh má»›i: Giá»›i thiá»‡u vá» sites-available vÃ  sites-enabled Trong Nginx, thÆ° má»¥c sites-available vÃ  sites-enabled lÃ  má»™t cÆ¡ cháº¿ Ä‘á»ƒ quáº£n lÃ½ cÃ¡c website (virtual hosts) mÃ  Nginx cÃ³ thá»ƒ phá»¥c vá»¥. Cáº¥u trÃºc nÃ y giÃºp dá»… dÃ ng báº­t/táº¯t cÃ¡c website mÃ  khÃ´ng cáº§n pháº£i xÃ³a hoáº·c thay Ä‘á»•i cáº¥u hÃ¬nh trá»±c tiáº¿p. sites-available: ÄÃ¢y lÃ  nÆ¡i báº¡n táº¡o vÃ  lÆ°u trá»¯ táº¥t cáº£ cÃ¡c file cáº¥u hÃ¬nh cá»§a cÃ¡c website hoáº·c á»©ng dá»¥ng mÃ  báº¡n muá»‘n Nginx phá»¥c vá»¥.Má»—i file cáº¥u hÃ¬nh trong sites-available Ä‘áº¡i diá»‡n cho má»™t website hoáº·c á»©ng dá»¥ng riÃªng biá»‡t.VÃ­ dá»¥: /etc/nginx/sites-available/example.com lÃ  cáº¥u hÃ¬nh cho website example.com. sites-enabled: ÄÃ¢y lÃ  nÆ¡i chá»©a cÃ¡c liÃªn káº¿t tÆ°á»£ng trÆ°ng (symlink) Ä‘áº¿n cÃ¡c file cáº¥u hÃ¬nh trong sites-available mÃ  báº¡n muá»‘n Nginx thá»±c thi.CÃ¡c liÃªn káº¿t nÃ y cho phÃ©p Nginx biáº¿t Ä‘Æ°á»£c website nÃ o sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t.Báº¡n khÃ´ng nÃªn trá»±c tiáº¿p chá»‰nh sá»­a cÃ¡c file trong sites-enabled. Thay vÃ o Ä‘Ã³, báº¡n táº¡o symlink tá»« sites-available. CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng: Khi báº¡n táº¡o má»™t file cáº¥u hÃ¬nh trong sites-available, báº¡n cÃ³ thá»ƒ kÃ­ch hoáº¡t nÃ³ báº±ng cÃ¡ch táº¡o má»™t symlink Ä‘áº¿n file Ä‘Ã³ trong thÆ° má»¥c sites-enabled.Äá»ƒ táº¡o symlink, sá»­ dá»¥ng lá»‡nh ln -s. VÃ­ dá»¥, náº¿u báº¡n cÃ³ cáº¥u hÃ¬nh example.com trong sites-available, báº¡n cÃ³ thá»ƒ táº¡o symlink vÃ o sites-enabled nhÆ° sau:",{"id":288,"title":289,"titles":290,"content":291,"level":241},"/blog/basic-nginx#cáº¥u-hÃ¬nh-nginx-vá»›i-php-fpm","ğŸ˜ Cáº¥u hÃ¬nh Nginx vá»›i PHP-FPM",[],"Äá»ƒ xá»­ lÃ½ cÃ¡c file PHP, báº¡n cáº§n káº¿t ná»‘i Nginx vá»›i PHP-FPM qua socket hoáº·c TCP: LÆ°u Ã½: ÄÆ°á»ng dáº«n socket cÃ³ thá»ƒ thay Ä‘á»•i tÃ¹y phiÃªn báº£n PHP.Náº¿u dÃ¹ng TCP:",{"id":293,"title":294,"titles":295,"content":296,"level":241},"/blog/basic-nginx#load-balancer-trong-nginx","ğŸŒ Load Balancer trong Nginx",[],"Nginx há»— trá»£ cáº¥u hÃ¬nh cÃ¢n báº±ng táº£i vá»›i nhiá»u thuáº­t toÃ¡n lá»±a chá»n backend: round-robin: Máº·c Ä‘á»‹nh, phÃ¢n phá»‘i Ä‘á»u cho cÃ¡c request.least_conn: Chá»n server Ã­t káº¿t ná»‘i nháº¥t.ip_hash: Duy trÃ¬ session cho client.least_time: chá»n server cÃ³ thá»i gian pháº£n há»“i Ã­t nháº¥t CÃ³ thá»ƒ thÃªm trá»ng sá»‘ cho server báº±ng cÃ¡ch thÃªm sá»‘ sau ip:port Ex: server 192.168.1.0:8000 weight=3; Cáº¥u hÃ¬nh server block proxy Ä‘áº¿n upstream:",{"id":298,"title":299,"titles":300,"content":301,"level":241},"/blog/basic-nginx#gzip-compression","ğŸ“¦ Gzip Compression",[],"Báº­t gzip giÃºp tÄƒng tá»‘c Ä‘á»™ táº£i trang báº±ng cÃ¡ch nÃ©n ná»™i dung tráº£ vá»:",{"id":303,"title":304,"titles":305,"content":306,"level":241},"/blog/basic-nginx#kÃ­ch-hoáº¡t-http2","âš¡ KÃ­ch hoáº¡t HTTP/2",[],"HTTP/2 cáº£i thiá»‡n hiá»‡u suáº¥t thÃ´ng qua multiplexing vÃ  header compression:",{"id":308,"title":309,"titles":310,"content":311,"level":241},"/blog/basic-nginx#rate-limiting","ğŸš¦ Rate Limiting",[],"Giá»›i háº¡n sá»‘ lÆ°á»£ng request Ä‘á»ƒ trÃ¡nh DDoS vÃ  abuse:",{"id":313,"title":314,"titles":315,"content":316,"level":241},"/blog/basic-nginx#redirect-vÃ -rewrites","ğŸ” Redirect vÃ  Rewrites",[],"Chuyá»ƒn hÆ°á»›ng toÃ n bá»™ traffic HTTP sang HTTPS: Viáº¿t láº¡i URL cho SPA:",{"id":318,"title":319,"titles":320,"content":321,"level":241},"/blog/basic-nginx#hardening-security","ğŸ” Hardening & Security",[],"Báº£o vá»‡ server báº±ng cÃ¡ch tá»« chá»‘i truy cáº­p file nháº¡y cáº£m: áº¨n thÃ´ng tin server: Chá»‘ng clickjacking vÃ  XSS:",{"id":323,"title":324,"titles":325,"content":326,"level":241},"/blog/basic-nginx#logging-nÃ¢ng-cao","ğŸ“Š Logging nÃ¢ng cao",[],"Cáº¥u hÃ¬nh custom log format Ä‘á»ƒ dá»… debug:",{"id":328,"title":269,"titles":329,"content":330,"level":241},"/blog/basic-nginx#tÃ i-liá»‡u-tham-kháº£o",[],"Nginx DocumentationNginx Load Balancing GuideNginx + PHP-FPM SetupOWASP Nginx Hardening Guide TÃ³m láº¡i: Nginx lÃ  cÃ´ng cá»¥ cá»±c ká»³ máº¡nh máº½ vÃ  linh hoáº¡t, khÃ´ng chá»‰ giá»›i háº¡n á»Ÿ web server mÃ  cÃ²n lÃ  reverse proxy, caching layer, vÃ  load balancer. Viá»‡c náº¯m vá»¯ng vÃ  khai thÃ¡c tá»‘t cÃ¡c tÃ­nh nÄƒng sáº½ giÃºp há»‡ thá»‘ng cá»§a báº¡n hiá»‡u suáº¥t cao, báº£o máº­t vÃ  dá»… má»Ÿ rá»™ng.",{"id":229,"title":5,"titles":332,"content":333,"level":241},[],"TÃ¬m hiá»ƒu cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» Redis bao gá»“m cÃ¡c kiá»ƒu dá»¯ liá»‡u vÃ  phÆ°Æ¡ng thá»©c, cÅ©ng nhÆ° cÃ¡ch tÃ­ch há»£p Redis vÃ o á»©ng dá»¥ng Node.js Ä‘á»ƒ sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c tÃ­nh nÄƒng thá»i gian thá»±c. CÆ¡ Báº£n Vá» Redis vÃ  TÃ­ch Há»£p Vá»›i Node.js Redis lÃ  má»™t kho dá»¯ liá»‡u key-value trong bá»™ nhá»›, mÃ£ nguá»“n má»Ÿ, ná»•i tiáº¿ng vá»›i hiá»‡u suáº¥t vÃ  tÃ­nh linh hoáº¡t. Redis há»— trá»£ nhiá»u kiá»ƒu dá»¯ liá»‡u, phÃ¹ há»£p cho viá»‡c sá»­ dá»¥ng bá»™ nhá»› Ä‘á»‡m, á»©ng dá»¥ng thá»i gian thá»±c, há»‡ thá»‘ng pub/sub, vÃ  nhiá»u hÆ¡n ná»¯a. Trong hÆ°á»›ng dáº«n nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu: CÃ¡c kiá»ƒu dá»¯ liá»‡u trong RedisCÃ¡c lá»‡nh phá»• biáº¿n cá»§a RedisCÃ¡ch tÃ­ch há»£p Redis vÃ o dá»± Ã¡n Node.js",{"id":335,"title":41,"titles":336,"content":44,"level":241},"/blog/basic-redis#cÃ¡c-kiá»ƒu-dá»¯-liá»‡u-lá»‡nh-redis",[],{"id":338,"title":49,"titles":339,"content":52,"level":208},"/blog/basic-redis#_1-chuá»—i-strings",[41],{"id":341,"title":60,"titles":342,"content":63,"level":208},"/blog/basic-redis#_2-danh-sÃ¡ch-lists",[41],{"id":344,"title":70,"titles":345,"content":73,"level":208},"/blog/basic-redis#_3-táº­p-há»£p-sets",[41],{"id":347,"title":80,"titles":348,"content":83,"level":208},"/blog/basic-redis#_4-bÄƒm-hashes",[41],{"id":350,"title":90,"titles":351,"content":93,"level":208},"/blog/basic-redis#_5-táº­p-há»£p-cÃ³-thá»©-tá»±-sorted-sets",[41],{"id":353,"title":100,"titles":354,"content":355,"level":208},"/blog/basic-redis#_6-bitmaps-hyperloglogs-streams",[41],"ÄÃ¢y lÃ  cÃ¡c cáº¥u trÃºc nÃ¢ng cao hÆ¡n:\nBitmaps Ä‘Æ°á»£c sá»­ dá»¥ng cho cÃ¡c thao tÃ¡c cáº¥p bit, cho phÃ©p báº¡n thao tÃ¡c cÃ¡c bit riÃªng láº» trong má»™t chuá»—i. HyperLogLogs Ä‘Æ°á»£c sá»­ dá»¥ng Ä‘á»ƒ Æ°á»›c tÃ­nh sá»‘ lÆ°á»£ng pháº§n tá»­ duy nháº¥t trong má»™t táº­p há»£p, ráº¥t há»¯u Ã­ch cho cÃ¡c trÆ°á»ng há»£p nhÆ° theo dÃµi sá»‘ lÆ°á»£ng khÃ¡ch truy cáº­p duy nháº¥t. Streams Ä‘Æ°á»£c thiáº¿t káº¿ cho cÃ¡c Ä‘Æ°á»ng dáº«n dá»¯ liá»‡u thá»i gian thá»±c vÃ  nguá»“n sá»± kiá»‡n, cho phÃ©p báº¡n thÃªm vÃ  truy váº¥n dá»¯ liá»‡u theo chuá»—i thá»i gian.",{"id":357,"title":122,"titles":358,"content":125,"level":241},"/blog/basic-redis#tÃ­ch-há»£p-redis-vá»›i-nodejs",[],{"id":360,"title":129,"titles":361,"content":135,"level":208},"/blog/basic-redis#_1-cÃ i-Ä‘áº·t-redis-vÃ -ioredis",[122],{"id":363,"title":142,"titles":364,"content":365,"level":208},"/blog/basic-redis#_2-thiáº¿t-láº­p-cÆ¡-báº£n",[122],"Táº¡o má»™t tá»‡p cÃ³ tÃªn redis.js vÃ  thÃªm Ä‘oáº¡n mÃ£ sau:",{"id":367,"title":157,"titles":368,"content":160,"level":208},"/blog/basic-redis#_3-sá»­-dá»¥ng-redis-trong-á»©ng-dá»¥ng",[122],{"id":370,"title":167,"titles":371,"content":170,"level":208},"/blog/basic-redis#_4-vÃ­-dá»¥-vá»-bá»™-nhá»›-Ä‘á»‡m",[122],{"id":373,"title":177,"titles":374,"content":375,"level":208},"/blog/basic-redis#_5-káº¿t-luáº­n",[122],"Redis lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ cho bá»™ nhá»› Ä‘á»‡m vÃ  cÃ¡c á»©ng dá»¥ng thá»i gian thá»±c. Báº±ng cÃ¡ch tÃ­ch há»£p Redis vÃ o cÃ¡c dá»± Ã¡n Node.js, báº¡n cÃ³ thá»ƒ cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ hiá»‡u suáº¥t vÃ  kháº£ nÄƒng má»Ÿ rá»™ng. HÆ°á»›ng dáº«n nÃ y Ä‘Ã£ bao quÃ¡t cÃ¡c khÃ¡i niá»‡m cÆ¡ báº£n vá» kiá»ƒu dá»¯ liá»‡u, lá»‡nh, vÃ  cÃ¡ch sá»­ dá»¥ng Redis trong á»©ng dá»¥ng Node.js.\nHÃ£y khÃ¡m phÃ¡ thÃªm cÃ¡c tÃ­nh nÄƒng nÃ¢ng cao nhÆ° giao dá»‹ch, scripting Lua, vÃ  clustering khi báº¡n Ä‘Ã£ quen thuá»™c hÆ¡n vá»›i Redis.\nRedis lÃ  má»™t cÃ´ng cá»¥ Ä‘a nÄƒng cÃ³ thá»ƒ nÃ¢ng cao Ä‘Ã¡ng ká»ƒ á»©ng dá»¥ng cá»§a báº¡n. Happy Coding",{"id":377,"title":189,"titles":378,"content":379,"level":208},"/blog/basic-redis#_6-tÃ i-nguyÃªn-tham-kháº£o",[122],"TÃ i liá»‡u RedisTÃ i liá»‡u ioredis",{"id":381,"title":382,"titles":383,"content":384,"level":241},"/blog/common-docker-file","CÃ¡c Dockerfile Phá»• Biáº¿n Cho Nhiá»u Dá»± Ãn KhÃ¡c Nhau",[],"TÃ¬m hiá»ƒu vá» Docker vÃ  khÃ¡m phÃ¡ cÃ¡c Dockerfile phá»• biáº¿n cho nhiá»u dá»± Ã¡n nhÆ° Node.js, PHP vá»›i Laravel, React, Vue, Nuxt vÃ  Next.js. KhÃ¡m phÃ¡ cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u vÃ  thá»±c hÃ nh tá»‘t nháº¥t. CÃ¡c Dockerfile Phá»• Biáº¿n Cho Nhiá»u Dá»± Ãn KhÃ¡c Nhau Docker lÃ  má»™t cÃ´ng cá»¥ áº£o hÃ³a nháº¹ giÃºp phÃ¡t triá»ƒn, triá»ƒn khai vÃ  cháº¡y á»©ng dá»¥ng trong cÃ¡c container. NÃ³ cho phÃ©p báº¡n Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vÃ  táº¥t cáº£ cÃ¡c phá»¥ thuá»™c cá»§a nÃ³ vÃ o má»™t container duy nháº¥t, giÃºp dá»… dÃ ng triá»ƒn khai trÃªn báº¥t ká»³ mÃ´i trÆ°á»ng nÃ o mÃ  khÃ´ng cáº§n lo láº¯ng vá» sá»± khÃ¡c biá»‡t giá»¯a cÃ¡c mÃ´i trÆ°á»ng. ÄÃ¢y lÃ  má»™t sá»‘ Dockerfile cho cÃ¡c dá»± Ã¡n thÆ°á»ng gáº·p, báº¡n cÃ³ thá»ƒ tham kháº£o vÃ  Ä‘iá»u chá»‰nh theo nhu cáº§u cá»§a mÃ¬nh. Ná»™i dung bÃ i viáº¿t Ä‘Æ°á»£c tá»•ng há»£p vÃ  tÃ­ch gÃ³p tá»« nhiá»u nguá»“n khÃ¡c nhau, bao gá»“m cáº£ cÃ¡c dá»± Ã¡n thá»±c táº¿ mÃ  mÃ¬nh Ä‘Ã£ lÃ m.",{"id":386,"title":387,"titles":388,"content":389,"level":208},"/blog/common-docker-file#dockerfile-cho-nodejs","Dockerfile cho Node.js",[382],"Dockerfile cho Node.js ráº¥t quan trá»ng khi triá»ƒn khai á»©ng dá»¥ng JavaScript phÃ­a server. ÄÃ¢y lÃ  má»™t Dockerfile Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u cho má»™t dá»± Ã¡n Node.js Ä‘iá»ƒn hÃ¬nh: CÃ¡ch 2, sá»­ dá»¥ng pm2. Vá» cÆ¡ báº£n thÃ¬ cÃ¡ch nÃ y nháº¹ hÆ¡n kha khÃ¡ so vá»›i npm",{"id":391,"title":392,"titles":393,"content":207,"level":208},"/blog/common-docker-file#dockerfile-nodejs-nestjs","Dockerfile NodeJS (NestJS)",[382],{"id":395,"title":396,"titles":397,"content":207,"level":208},"/blog/common-docker-file#dockerfile-nodejs-expressjs","Dockerfile NodeJS (Express.js)",[382],{"id":399,"title":400,"titles":401,"content":402,"level":208},"/blog/common-docker-file#dockerfile-reactjs","Dockerfile ReactJs",[382],"CÃ³ thá»ƒ sá»­ dá»¥ng Dockerfile nÃ y cho cÃ¡c dá»± Ã¡n nhÆ° Vue, Angular,... LÆ°u Ã½: á»Ÿ Ä‘Ã¢y thÆ° má»¥c chá»©a nginx/nginx.conf Ä‘áº·t cÃ¹ng cáº¥p vá»›i Dockerfile",{"id":404,"title":405,"titles":406,"content":407,"level":208},"/blog/common-docker-file#dockerfile-cho-php-vá»›i-laravel","Dockerfile cho PHP vá»›i Laravel",[382],"LÆ°u Ã½: thÆ° má»¥c conf/nginx.conf vÃ  conf/supervisord.conf cÃ¹ng cáº¥p vá»›i Dockerfile",{"id":409,"title":410,"titles":411,"content":207,"level":208},"/blog/common-docker-file#dockerfile-cho-nextjs","Dockerfile cho NextJs",[382],{"id":413,"title":414,"titles":415,"content":416,"level":208},"/blog/common-docker-file#Ä‘ang-cáº­p-nháº­t","Äang cáº­p nháº­t...",[382],"Náº¿u báº¡n cÃ³ cÃ¡c cáº¥u hÃ¬nh hoáº·c Dockerfile khÃ¡c muá»‘n chia sáº», vui lÃ²ng gá»­i email vá» vinhtieng123@gmail.com. MÃ¬nh ráº¥t trÃ¢n trá»ng Ä‘iá»u Ä‘Ã³.",{"id":418,"title":419,"titles":420,"content":421,"level":241},"/blog/jwt","JWT lÃ  gÃ¬? CÃ¡ch hoáº¡t Ä‘á»™ng vÃ  á»©ng dá»¥ng thá»±c táº¿",[],"JWT (JSON Web Token) lÃ  gÃ¬? CÃ¡ch JWT hoáº¡t Ä‘á»™ng, cáº¥u trÃºc gá»“m Header, Payload, Signature vÃ  cÃ¡ch á»©ng dá»¥ng trong xÃ¡c thá»±c báº£o máº­t.",{"id":423,"title":424,"titles":425,"content":426,"level":241},"/blog/jwt#_1-giá»›i-thiá»‡u-vá»-jwt","1. Giá»›i thiá»‡u vá» JWT",[],"JSON Web Token (JWT) lÃ  má»™t tiÃªu chuáº©n má»Ÿ ( RFC 7519 ) Ä‘á»‹nh nghÄ©a má»™t cÃ¡ch thá»©c nhá» gá»n vÃ  Ä‘á»™c láº­p Ä‘á»ƒ truyá»n thÃ´ng tin an toÃ n giá»¯a cÃ¡c bÃªn dÆ°á»›i dáº¡ng Ä‘á»‘i tÆ°á»£ng JSON. ThÃ´ng tin nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¡c minh vÃ  tin cáº­y vÃ¬ nÃ³ Ä‘Æ°á»£c kÃ½ ká»¹ thuáº­t sá»‘. JWT cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ½ báº±ng má»™t bÃ­ máº­t (vá»›i thuáº­t toÃ¡n HMAC ) hoáº·c má»™t cáº·p khÃ³a cÃ´ng khai/riÃªng tÆ° báº±ng RSA hoáº·c ECDSA . TrÃ­ch tá»«: https://jwt.io/introduction",{"id":428,"title":429,"titles":430,"content":431,"level":241},"/blog/jwt#_2-cÃ¡c-thÃ nh-pháº§n-cá»§a-jwt","2. CÃ¡c thÃ nh pháº§n cá»§a JWT",[],"JWT bao gá»“m ba thÃ nh pháº§n chÃ­nh: Header, Payload vÃ  Signature. Má»—i pháº§n Ä‘á»u Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng Base64Url vÃ  Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng dáº¥u cháº¥m (.).\nMá»™t JWT token thÆ°á»ng sáº½ trÃ´ng nhÆ° sau: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c nhÆ° váº­y vá»›i JWT token á»Ÿ trÃªn thÃ¬ cÃ¡c thÃ nh pháº§n sau khi Ä‘Æ°á»£c mÃ£ hÃ³a sáº½ lÃ : Header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9Payload: eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQSignature: SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c Chi tiáº¿t vá» cÃ¡c thÃ nh pháº§n Header: ThÆ°á»ng sáº½ chá»©a thÃ´ng tin vá» thuáº­t toÃ¡n mÃ£ hÃ³a vÃ  loáº¡i token. VÃ­ dá»¥: Payload: ÄÃ¢y lÃ  pháº§n sáº½ chá»©a cÃ¡c thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i. ThÆ°á»ng thÃ¬ chÃºng ta sáº½ lÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng, user_id,... LÆ°u Ã½ ráº±ng JWT token khÃ´ng cÃ³ háº¿t háº¡n, tuy nhiÃªn chÃºng ta cÃ³ thá»ƒ giá»›i háº¡n thá»i gian sá»‘ng cá»§a token báº±ng cÃ¡ch thÃªm cÃ¡c trÆ°á»ng nhÆ° exp, nbf, iat vÃ o payload. VÃ  khi chÃºng ta xÃ¡c thá»±c token chÃºng ta sáº½ cáº§n thÃªm má»™t bÆ°á»›c kiá»ƒm tra thá»i gian sá»‘ng cá»§a token. NhÆ° váº­y chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng JWT token nhÆ° má»™t session token. VÃ­ dá»¥ vá» payload: Signature: ÄÆ°á»£c táº¡o báº±ng cÃ¡ch mÃ£ hÃ³a Header vÃ  Payload vá»›i má»™t khÃ³a bÃ­ máº­t vÃ  thuáº­t toÃ¡n Ä‘Ã£ chá»‰ Ä‘á»‹nh trong Header. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o ráº±ng token khÃ´ng bá»‹ thay Ä‘á»•i trong quÃ¡ trÃ¬nh truyá»n táº£i. VÃ­ dá»¥:",{"id":433,"title":434,"titles":435,"content":436,"level":241},"/blog/jwt#_3-viáº¿t-láº¡i-hÃ m-Ä‘á»ƒ-generate-jwt-token-vÃ -verify-jwt-token-trong-nodejs","3. Viáº¿t láº¡i hÃ m Ä‘á»ƒ generate JWT token vÃ  verify JWT token trong NodeJs",[],"Khi lÃ m viá»‡c vá»›i jwt vÃ  nodeJs, háº§u háº¿t má»i ngÆ°á»i sáº½ sá»­ dá»¥ng thÆ° viá»‡n jsonwebtoken Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token. Tuy nhiÃªn, Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, chÃºng ta cÃ³ thá»ƒ tá»± viáº¿t hÃ m Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token. Giáº£ sá»­ chÃºng ta muá»‘n táº¡o JWT token tá»« thÃ´ng tin user_id=123, khi Ä‘Ã³ pháº§n payload sáº½ lÃ : á» pháº§n header, chÃºng ta sáº½ sá»­ dá»¥ng thuáº­t toÃ¡n HS256 Ä‘á»ƒ mÃ£ hÃ³a JWT token. NÃªn payload sáº½ cÃ³ dáº¡ng nhÆ° sau: Äá»ƒ táº¡o JWT token, chÃºng ta cáº§n mÃ£ hÃ³a Header vÃ  Payload báº±ng Base64Url. Sau Ä‘Ã³, chÃºng ta sáº½ táº¡o chá»¯ kÃ½ báº±ng cÃ¡ch sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256 vá»›i khÃ³a bÃ­ máº­t (secret key) vÃ  káº¿t há»£p Header vÃ  Payload. Äáº§u tiÃªn chÃºng ta cáº§n viáº¿t 1 hÃ m Ä‘á»ƒ mÃ£ hÃ³a Base64Url: á» Ä‘Ã¢y, vÃ¬ chÃºng ta sá»­ dá»¥ng NodeJs nÃªn cÃ³ thá»ƒ sá»­ dá»¥ng Buffer Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i JavaScript trÃªn trÃ¬nh duyá»‡t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng btoa() Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Khi muá»‘n giáº£i mÃ£, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng atob(). HÃ m nÃ y lÃ  hÃ m cÃ³ sáºµn trong trÃ¬nh duyá»‡t. Tiáº¿p theo, chÃºng ta sáº½ triá»ƒn khai hÃ m táº¡o JWT token. Trong Node.js, chÃºng ta cÃ³ thá»ƒ dá»… dÃ ng thá»±c hiá»‡n Ä‘iá»u nÃ y báº±ng cÃ¡ch dÃ¹ng thÆ° viá»‡n tÃ­ch há»£p sáºµn lÃ  crypto, cá»¥ thá»ƒ lÃ  hÃ m createHmac. HÃ m nÃ y sáº½ giÃºp chÃºng ta táº¡o ra chá»¯ kÃ½ (signature) tá»« chuá»—i Ä‘Ã£ mÃ£ hÃ³a gá»“m Header vÃ  Payload, káº¿t há»£p vá»›i secret key Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n vÃ  xÃ¡c thá»±c cá»§a token. Full code mÃ£ hÃ³a JWT token sáº½ nhÆ° sau: NhÆ° váº­y chÃºng ta Ä‘Ã£ cÃ³ hÃ m createJWT Ä‘á»ƒ táº¡o JWT token. HÃ m nÃ y sáº½ nháº­n vÃ o 2 tham sá»‘ lÃ  payload vÃ  secret. payload lÃ  thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i, cÃ²n secret lÃ  khÃ³a bÃ­ máº­t mÃ  chÃºng ta sáº½ sá»­ dá»¥ng Ä‘á»ƒ táº¡o chá»¯ kÃ½ cho token. Äá»‘i vá»›i JWT token, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng báº¥t ká»³ chuá»—i nÃ o lÃ m khÃ³a bÃ­ máº­t. Tuy nhiÃªn, Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t, chÃºng ta nÃªn sá»­ dá»¥ng má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i. VÃ¬ khi sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256, náº¿u káº» táº¥n cÃ´ng biáº¿t Ä‘Æ°á»£c khÃ³a bÃ­ máº­t, há» cÃ³ thá»ƒ táº¡o ra token giáº£ máº¡o vÃ  truy cáº­p vÃ o há»‡ thá»‘ng cá»§a báº¡n. CÃ³ thá»ƒ sá»­ dá»¥ng trang web randomkeygen.com Ä‘á»ƒ táº¡o ra má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i lÃ m khÃ³a bÃ­ máº­t.",{"id":438,"title":439,"titles":440,"content":441,"level":241},"/blog/jwt#_4-xÃ¡c-thá»±c-jwt-token","4. XÃ¡c thá»±c JWT token",[],"Token JWT gá»“m ba pháº§n: Header, Payload vÃ  Signature, Ä‘Æ°á»£c ná»‘i vá»›i nhau báº±ng dáº¥u cháº¥m (.). QuÃ¡ trÃ¬nh xÃ¡c thá»±c diá»…n ra nhÆ° sau: TÃ¡ch token thÃ nh ba pháº§n: Header, Payload vÃ  Signature.Táº¡o láº¡i chá»¯ kÃ½ báº±ng cÃ¡ch káº¿t há»£p Header vÃ  Payload Ä‘Ã£ mÃ£ hÃ³a báº±ng Base64Url, sau Ä‘Ã³ sá»­ dá»¥ng cÃ¹ng thuáº­t toÃ¡n vÃ  khÃ³a bÃ­ máº­t (secret key) Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng khi táº¡o token ban Ä‘áº§u.So sÃ¡nh chá»¯ kÃ½ má»›i táº¡o vá»›i chá»¯ kÃ½ ban Ä‘áº§u trong token:\nNáº¿u hai chá»¯ kÃ½ giá»‘ng nhau, token Ä‘Æ°á»£c xÃ¡c nháº­n lÃ  há»£p lá»‡ (khÃ´ng bá»‹ chá»‰nh sá»­a).Náº¿u khÃ¡c nhau, token Ä‘Ã£ bá»‹ thay Ä‘á»•i hoáº·c khÃ´ng há»£p lá»‡. NgoÃ i ra, Ä‘á»ƒ kiá»ƒm tra xem token cÃ³ háº¿t háº¡n hay chÆ°a, báº¡n cÃ³ thá»ƒ thÃªm trÆ°á»ng exp (expiration) vÃ o Payload. TrÆ°á»ng nÃ y lÆ°u thá»i gian háº¿t háº¡n dÆ°á»›i dáº¡ng timestamp (sá»‘ giÃ¢y ká»ƒ tá»« ngÃ y 1/1/1970). Khi xÃ¡c thá»±c, chá»‰ cáº§n so sÃ¡nh giÃ¡ trá»‹ exp vá»›i thá»i gian hiá»‡n táº¡i Ä‘á»ƒ biáº¿t token cÃ²n hiá»‡u lá»±c hay khÃ´ng.",{"id":443,"title":444,"titles":445,"content":446,"level":241},"/blog/jwt#_5-káº¿t-luáº­n","5. Káº¿t luáº­n",[],"JWT lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ Ä‘á»ƒ xÃ¡c thá»±c vÃ  phÃ¢n quyá»n trong cÃ¡c á»©ng dá»¥ng web. Báº±ng cÃ¡ch hiá»ƒu rÃµ cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, báº¡n cÃ³ thá»ƒ tá»± táº¡o vÃ  xÃ¡c thá»±c JWT token mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o thÆ° viá»‡n bÃªn ngoÃ i. Tuy nhiÃªn, trong thá»±c táº¿, báº¡n nÃªn sá»­ dá»¥ng thÆ° viá»‡n jsonwebtoken Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c. Hy vá»ng bÃ i viáº¿t nÃ y Ä‘Ã£ giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» JWT vÃ  cÃ¡ch sá»­ dá»¥ng nÃ³ trong á»©ng dá»¥ng cá»§a mÃ¬nh. Náº¿u báº¡n cÃ³ báº¥t ká»³ cÃ¢u há»i nÃ o, hÃ£y liÃªn há»‡ vá»›i mÃ¬nh qua cÃ¡c kÃªnh liÃªn láº¡c nhÆ° email, facebook, zalo hoáº·c telegram nhÃ©!",{"id":448,"title":449,"titles":450,"content":451,"level":241},"/blog/jwt#_6-tÃ i-liá»‡u-tham-kháº£o","6. TÃ i liá»‡u tham kháº£o",[],"jwt.ioRFC 7519 - JSON Web Token (JWT)jsonwebtoken",{"id":453,"title":454,"titles":455,"content":456,"level":241},"/blog/use-effect-and-use-layout-effect","PhÃ¢n biá»‡t useEffect vÃ  useLayoutEffect trong React",[],"TÃ¬m hiá»ƒu Ä‘iá»ƒm khÃ¡c nhau giá»¯a useEffect vÃ  useLayoutEffect trong React, giÃºp báº¡n sá»­ dá»¥ng Ä‘Ãºng hook trong tá»«ng tÃ¬nh huá»‘ng cá»¥ thá»ƒ Ä‘á»ƒ tá»‘i Æ°u hiá»‡u nÄƒng vÃ  tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng.",{"id":458,"title":459,"titles":460,"content":461,"level":241},"/blog/use-effect-and-use-layout-effect#useeffect-vÃ -uselayouteffect-trong-react","useEffect vÃ  useLayoutEffect trong React",[],"React cung cáº¥p hai hook máº¡nh máº½ Ä‘á»ƒ xá»­ lÃ½ hiá»‡u á»©ng phá»¥: useEffect vÃ  useLayoutEffect. Tuy chÃºng cÃ³ cÃº phÃ¡p giá»‘ng nhau, nhÆ°ng cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng khÃ¡c biá»‡t vÃ  áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng cÅ©ng nhÆ° hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng.",{"id":463,"title":464,"titles":465,"content":207,"level":208},"/blog/use-effect-and-use-layout-effect#tÃ³m-táº¯t-quy-trÃ¬nh-thá»±c-thi","TÃ³m táº¯t quy trÃ¬nh thá»±c thi",[459],{"id":467,"title":468,"titles":469,"content":470,"level":471},"/blog/use-effect-and-use-layout-effect#useeffect","useEffect",[459,464],"Cháº¡y sau khi React cáº­p nháº­t DOM xong vÃ  render UI xong.ThÃ­ch há»£p cho cÃ¡c tÃ¡c vá»¥ khÃ´ng áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n layout, nhÆ° gá»i API, Ä‘Äƒng kÃ½ sá»± kiá»‡n, log, animation nháº¹â€¦ Quy trÃ¬nh: Cáº­p nháº­t láº¡i stateCáº­p nháº­t DOM (mutated)React render láº¡i UIClean up náº¿u cÃ³Gá»i useEffect callback",3,{"id":473,"title":474,"titles":475,"content":476,"level":471},"/blog/use-effect-and-use-layout-effect#uselayouteffect","useLayoutEffect",[459,464],"Cháº¡y ngay sau khi DOM Ä‘Æ°á»£c cáº­p nháº­t, nhÆ°ng trÆ°á»›c khi browser váº½ láº¡i giao diá»‡n (paint).DÃ¹ng khi báº¡n cáº§n Ä‘o lÆ°á»ng DOM, thay Ä‘á»•i layout hoáº·c ngÄƒn nháº¥p nhÃ¡y giao diá»‡n. Quy trÃ¬nh: Cáº­p nháº­t láº¡i stateCáº­p nháº­t DOM (mutated)Clean up náº¿u dependencies thay Ä‘á»•iGá»i useLayoutEffect callbackReact render láº¡i UI Khi nÃ o dÃ¹ng cÃ¡i nÃ o? TÃ¬nh huá»‘ngNÃªn dÃ¹ngGá»i API, thao tÃ¡c khÃ´ng áº£nh hÆ°á»Ÿng layoutuseEffectÄo kÃ­ch thÆ°á»›c DOM, scroll, positionuseLayoutEffectCáº­p nháº­t class, focus vÃ o inputuseLayoutEffectHiá»‡u á»©ng animation nháº¹ sau renderuseEffectNgÄƒn nhÃ¡y layout (flicker) khi hiá»ƒn thá»‹ componentsuseLayoutEffectCáº­p nháº­t DOM trÆ°á»›c khi browser váº½ láº¡iuseLayoutEffect",{"id":478,"title":479,"titles":480,"content":481,"level":241},"/blog/useful-npm-package","Tá»•ng há»£p cÃ¡c npm package há»¯u Ã­ch cho Frontend vÃ  Backend",[],"Danh sÃ¡ch cÃ¡c npm package há»¯u Ã­ch cho láº­p trÃ¬nh Frontend vÃ  Backend, Ä‘Æ°á»£c tá»•ng há»£p tá»« kinh nghiá»‡m thá»±c táº¿ vÃ  cÃ¡c chia sáº» trong cá»™ng Ä‘á»“ng.",{"id":483,"title":484,"titles":485,"content":486,"level":241},"/blog/useful-npm-package#frontend","Frontend",[],"react-query - React Query ThÆ° viá»‡n quáº£n lÃ½ tráº¡ng thÃ¡i cho React, giÃºp xá»­ lÃ½ cÃ¡c yÃªu cáº§u API vÃ  cache dá»¯ liá»‡u má»™t cÃ¡ch dá»… dÃ ng.@progress/kendo-react-pdf - ThÆ° viá»‡n táº¡o PDF cho React, hay hÆ¡n cÃ¡c thÆ° viá»‡n khÃ¡c á»Ÿ chá»— hÃ¬nh áº£nh sáº½ Ä‘Æ°á»£c xuáº¥t ra dÆ°á»›i Ä‘á»‹nh dáº¡ng SVG, giÃºp cho viá»‡c xuáº¥t áº£nh cháº¥t lÆ°á»£ng cao vÃ  nÃ©t hÆ¡n, khÃ´ng bá»‹ vá»¡ áº£nh khi zoom in.react-split-pane - ThÆ° viá»‡n táº¡o giao diá»‡n chia tÃ¡ch (split view) cho React, giÃºp dá»… dÃ ng táº¡o cÃ¡c layout vá»›i cÃ¡c pháº§n tá»­ cÃ³ thá»ƒ kÃ©o vÃ  tháº£.react-window - ThÆ° viá»‡n giÃºp tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho báº£ng vÃ  danh sÃ¡ch lá»›n trong React báº±ng cÃ¡ch chá»‰ render cÃ¡c pháº§n tá»­ Ä‘ang hiá»ƒn thá»‹ trÃªn UI nháº¹ vÃ  dá»… sá»­ dá»¥ng.",{"id":488,"title":489,"titles":490,"content":491,"level":241},"/blog/useful-npm-package#backend","Backend",[],"Updating...",{"id":493,"title":494,"titles":495,"content":496,"level":241},"/blog/useful-npm-package#cÃ¡c-Ä‘oáº¡n-code-máº«u-há»¯u-dá»¥ng","CÃ¡c Ä‘oáº¡n code máº«u há»¯u dá»¥ng",[],"Code template cho custom send and listen event document",{"id":498,"title":499,"titles":500,"content":501,"level":241},"/blog/useful-script","Tá»•ng há»£p cÃ¡c scripts há»¯u Ã­ch",[],"Danh sÃ¡ch cÃ¡c scripts há»¯u Ã­ch cho láº­p trÃ¬nh viÃªn, giÃºp tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c trong quÃ¡ trÃ¬nh phÃ¡t triá»ƒn pháº§n má»m.",{"id":503,"title":504,"titles":505,"content":506,"level":241},"/blog/useful-script#nÃ©n-áº£nh-vÃ -convert-áº£nh-sang-Ä‘á»‹nh-dáº¡ng-webp","NÃ©n áº£nh vÃ  convert áº£nh sang Ä‘á»‹nh dáº¡ng webp",[],"CÃ i Ä‘áº·t cwebp Äá»‘i vá»›i window thÃ¬ cÃ³ thá»ƒ xem hÆ°á»›ng dáº«n táº¡i: https://developers.google.com/speed/webp/download?hl=vi Script nÃ©n áº£nh Sau khi táº¡o xong file, cáº§n pháº£i gÃ¡n quyá»n thá»±c thi cho file script báº±ng lá»‡nh sau: Sau Ä‘Ã³ cÃ³ thá»ƒ cháº¡y script Ä‘á»ƒ cÃ³ thá»ƒ thá»±c hiá»‡n nÃ©n áº£nh vÃ  chuyá»ƒn Ä‘á»•i sang Ä‘á»‹nh dáº¡ng webp.",[],[509,674,1141,1279,1400,1716,1908,1973],{"id":510,"title":238,"body":511,"date":222,"description":665,"extension":224,"image":666,"keywords":667,"meta":668,"navigation":228,"path":237,"published":228,"seo":669,"stem":670,"tags":671,"__hash__":673},"blog/blog/ansible.md",{"type":7,"value":512,"toc":663},[513,518,521,523,526,529,532,535,538,540,543,546,549,559,561,564,566,569,571,574,581,589,592,599,602,604,607,610,613,618,621,623,626,650,652,655,660],[10,514,515],{},[13,516,517],{},"HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t vÃ  triá»ƒn khai Ansible",[10,519,520],{},"Ansible lÃ  má»™t cÃ´ng cá»¥ tá»± Ä‘á»™ng hÃ³a máº¡nh máº½, giÃºp quáº£n lÃ½ cáº¥u hÃ¬nh, triá»ƒn khai á»©ng dá»¥ng vÃ  Ä‘iá»u phá»‘i há»‡ thá»‘ng má»™t cÃ¡ch dá»… dÃ ng. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ tÃ¬m hiá»ƒu cÃ¡ch cÃ i Ä‘áº·t, cáº¥u hÃ¬nh vÃ  sá»­ dá»¥ng Ansible thÃ´ng qua cÃ¡c vÃ­ dá»¥ thá»±c táº¿.",[35,522],{},[38,524,244],{"id":525},"ï¸-cÃ i-Ä‘áº·t-ansible",[10,527,528],{},"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Ansible trÃªn Ubuntu:",[54,530],{":files":531},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo apt update -y\\nsudo apt install software-properties-common -y\\nsudo apt-add-repository --yes --update ppa:ansible/ansible\\nsudo apt install ansible -y\\n\"}]",[10,533,534],{},"Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra phiÃªn báº£n Ansible:",[54,536],{":files":537},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible --version\"}]",[35,539],{},[38,541,249],{"id":542},"cáº¥u-hÃ¬nh-ssh",[10,544,545],{},"Äá»ƒ Ansible cÃ³ thá»ƒ káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ tá»« xa, báº¡n cáº§n cáº¥u hÃ¬nh SSH. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch sao chÃ©p SSH key Ä‘áº¿n mÃ¡y chá»§ khÃ¡c:",[54,547],{":files":548},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ssh-copy-id -i ~/.ssh/id_rsa.pub vinhtieng@123.3123.12\"}]",[10,550,551,554,555,558],{},[13,552,553],{},"LÆ°u Ã½:"," Thay ",[147,556,557],{},"vinhtieng@123.3123.12"," báº±ng tÃªn ngÆ°á»i dÃ¹ng vÃ  Ä‘á»‹a chá»‰ IP cá»§a mÃ¡y chá»§ tá»« xa.",[35,560],{},[38,562,254],{"id":563},"hosts-inventory",[10,565,256],{},[54,567],{":files":568},"[{\"title\":\"inventory\",\"language\":\"ini\",\"content\":\"[webservers]\\nweb1.example.com\\nweb2.example.com\\n\\n[databases]\\ndb1.example.com\\n\\n[webservers:vars]\\nansible_user=your_ssh_user\\nansible_ssh_private_key_file=/path/to/private/key\\n\\n[webservers1]\\nweb1.example.com ansible_user=user1 ansible_ssh_private_key_file=/path/to/key1\\nweb2.example.com ansible_user=user2 ansible_ssh_private_key_file=/path/to/key2\\n\"}]",[35,570],{},[38,572,259],{"id":573},"kiá»ƒm-tra-káº¿t-ná»‘i-ping",[10,575,576,577,580],{},"Báº¡n cÃ³ thá»ƒ kiá»ƒm tra káº¿t ná»‘i Ä‘áº¿n cÃ¡c mÃ¡y chá»§ báº±ng lá»‡nh ",[147,578,579],{},"ping",":",[582,583,584],"ol",{},[25,585,586],{},[13,587,588],{},"Ping vá»›i file hosts máº·c Ä‘á»‹nh:",[54,590],{":files":591},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -m ping all\"}]",[582,593,594],{"start":208},[25,595,596],{},[13,597,598],{},"Ping vá»›i file inventory tÃ¹y chá»‰nh:",[54,600],{":files":601},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -i my_hosts all -m ping\"}]",[35,603],{},[38,605,264],{"id":606},"playbook-task-module",[10,608,609],{},"Playbook lÃ  nÆ¡i báº¡n Ä‘á»‹nh nghÄ©a cÃ¡c tÃ¡c vá»¥ (tasks) cáº§n thá»±c hiá»‡n trÃªn cÃ¡c mÃ¡y chá»§. DÆ°á»›i Ä‘Ã¢y lÃ  cÃ¡ch cháº¡y má»™t playbook:",[54,611],{":files":612},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible-playbook my_playbook.yml -i inventory_file\"}]",[10,614,615],{},[13,616,617],{},"VÃ­ dá»¥ vá» Playbook Ä‘Æ¡n giáº£n:",[54,619],{":files":620},"[{\"title\":\"my_playbook.yml\",\"language\":\"yaml\",\"content\":\"---\\n- name: CÃ i Ä‘áº·t vÃ  khá»Ÿi Ä‘á»™ng Apache\\n  hosts: webservers\\n  become: yes\\n  tasks:\\n    - name: CÃ i Ä‘áº·t Apache\\n      apt:\\n        name: apache2\\n        state: present\\n    - name: Äáº£m báº£o Apache Ä‘ang cháº¡y\\n      service:\\n        name: apache2\\n        state: started\\n\"}]",[35,622],{},[38,624,269],{"id":625},"tÃ i-liá»‡u-tham-kháº£o",[22,627,628,636,643],{},[25,629,630],{},[195,631,635],{"href":632,"rel":633},"https://docs.ansible.com/",[634],"nofollow","Ansible Documentation",[25,637,638],{},[195,639,642],{"href":640,"rel":641},"https://galaxy.ansible.com/",[634],"Ansible Galaxy",[25,644,645],{},[195,646,649],{"href":647,"rel":648},"https://docs.ansible.com/ansible/latest/user_guide/playbooks.html",[634],"Ansible Playbook Guide",[35,651],{},[653,654],"br",{},[10,656,657],{},[13,658,659],{},"TÃ³m láº¡i:",[10,661,662],{},"Ansible lÃ  cÃ´ng cá»¥ máº¡nh máº½ giÃºp tá»± Ä‘á»™ng hÃ³a cÃ¡c tÃ¡c vá»¥ quáº£n trá»‹ há»‡ thá»‘ng. Viá»‡c náº¯m vá»¯ng cÃ¡ch sá»­ dá»¥ng Ansible sáº½ giÃºp báº¡n tiáº¿t kiá»‡m thá»i gian vÃ  giáº£m thiá»ƒu lá»—i trong quÃ¡ trÃ¬nh quáº£n lÃ½ há»‡ thá»‘ng.",{"title":207,"searchDepth":208,"depth":208,"links":664},[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cÃ i Ä‘áº·t, cáº¥u hÃ¬nh SSH, inventory vÃ  sá»­ dá»¥ng Playbook trong Ansible.","/images/blog/ansible/banner.webp","ansible, automation, configuration management",{},{"title":238,"description":665},"blog/ansible",[672],"ansible","TDOKqPCKfBmvSL-G-wacqQdrgbcbAiBJrgMPYjtJtIc",{"id":675,"title":274,"body":676,"date":222,"description":1132,"extension":224,"image":1133,"keywords":1134,"meta":1135,"navigation":228,"path":273,"published":228,"seo":1136,"stem":1137,"tags":1138,"__hash__":1140},"blog/blog/basic-nginx.md",{"type":7,"value":677,"toc":1130},[678,683,686,712,714,717,720,723,726,729,734,737,740,743,750,753,764,767,770,773,787,790,795,798,801,815,818,823,855,858,861,864,867,870,873,880,891,898,909,912,924,927,930,933,936,939,943,951,954,956,959,962,988,991,996,999,1002,1005,1007,1010,1012,1015,1017,1020,1022,1025,1027,1030,1032,1035,1037,1040,1043,1046,1049,1052,1054,1057,1060,1063,1066,1069,1072,1075,1077,1080,1082,1085,1087,1089,1119,1121,1123,1127],[10,679,680],{},[13,681,682],{},"HÆ°á»›ng dáº«n chi tiáº¿t vá» cáº¥u hÃ¬nh vÃ  triá»ƒn khai Nginx",[10,684,685],{},"Nginx lÃ  má»™t web server mÃ£ nguá»“n má»Ÿ máº¡nh máº½, Ä‘Æ°á»£c sá»­ dá»¥ng phá»• biáº¿n Ä‘á»ƒ phá»¥c vá»¥ ná»™i dung tÄ©nh, reverse proxy, cÃ¢n báº±ng táº£i, báº£o máº­t vÃ  há»— trá»£ PHP thÃ´ng qua FastCGI. Trong bÃ i viáº¿t nÃ y, chÃºng ta sáº½ Ä‘i qua cÃ¡c cáº¥u hÃ¬nh tá»« cÆ¡ báº£n Ä‘áº¿n nÃ¢ng cao, bao gá»“m:",[22,687,688,691,694,697,700,703,706,709],{},[25,689,690],{},"CÃ¡ch cÃ i Ä‘áº·t Nginx",[25,692,693],{},"Cáº¥u hÃ¬nh mÃ¡y chá»§ máº·c Ä‘á»‹nh (default host)",[25,695,696],{},"TÃ­ch há»£p vá»›i PHP-FPM",[25,698,699],{},"Thiáº¿t láº­p Load Balancer (cÃ¢n báº±ng táº£i)",[25,701,702],{},"Gzip, HTTP/2, Rate limiting",[25,704,705],{},"Redirect, Rewrites",[25,707,708],{},"Hardening & Security",[25,710,711],{},"Logging nÃ¢ng cao",[35,713],{},[38,715,279],{"id":716},"ï¸-cÃ i-Ä‘áº·t-nginx",[10,718,719],{},"HÆ°á»›ng dáº«n cÃ i Ä‘áº·t Nginx trÃªn Ubuntu:",[54,721],{":files":722},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo apt update\\nsudo apt install nginx\\n\"}]",[10,724,725],{},"Sau khi cÃ i Ä‘áº·t, báº¡n cÃ³ thá»ƒ kiá»ƒm tra tráº¡ng thÃ¡i Nginx:",[54,727],{":files":728},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo systemctl status nginx\"}]",[10,730,731],{},[13,732,733],{},"Kiá»ƒm tra tÆ°á»ng lá»­a:",[10,735,736],{},"Sau khi cÃ i Ä‘áº·t Nginx, báº¡n nÃªn Ä‘áº£m báº£o ráº±ng tÆ°á»ng lá»­a (firewall) cho phÃ©p lÆ°u lÆ°á»£ng HTTP vÃ  HTTPS Ä‘á»ƒ mÃ¡y chá»§ cÃ³ thá»ƒ phá»¥c vá»¥ ná»™i dung web.",[54,738],{":files":739},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo ufw allow â€˜Nginx Fullâ€™\\nsudo ufw status\\n\"}]",[10,741,742],{},"Lá»‡nh sudo ufw allow 'Nginx Full' sáº½ má»Ÿ cáº£ hai cá»•ng 80 (HTTP) vÃ  443 (HTTPS).\nSau Ä‘Ã³, dÃ¹ng sudo ufw status Ä‘á»ƒ xÃ¡c nháº­n ráº±ng cÃ¡c cá»•ng nÃ y Ä‘Ã£ Ä‘Æ°á»£c má»Ÿ.",[744,745,747],"alert",{"type":746},"warning",[10,748,749],{},"Náº¿u báº¡n chÆ°a báº­t ufw (Uncomplicated Firewall), báº¡n cÃ³ thá»ƒ báº­t báº±ng lá»‡nh sudo ufw enable. Tuy nhiÃªn, hÃ£y Ä‘áº£m báº£o cáº¥u hÃ¬nh chÃ­nh xÃ¡c Ä‘á»ƒ khÃ´ng bá»‹ khÃ³a SSH.",[10,751,752],{},"Kiá»ƒm tra hoáº¡t Ä‘á»™ng cá»§a Nginx:",[10,754,755,756,759,760,763],{},"Má»Ÿ trÃ¬nh duyá»‡t vÃ  truy cáº­p Ä‘á»‹a chá»‰:\nğŸ‘‰ ",[147,757,758],{},"http://\u003CÄ‘á»‹a_chá»‰_IP_cá»§a_báº¡n>"," hoáº·c ",[147,761,762],{},"http://localhost"," náº¿u kiá»ƒm tra cá»¥c bá»™.",[10,765,766],{},"Báº¡n sáº½ tháº¥y trang máº·c Ä‘á»‹nh â€œWelcome to nginx!â€ náº¿u má»i thá»© hoáº¡t Ä‘á»™ng Ä‘Ãºng cÃ¡ch.",[38,768,284],{"id":769},"ï¸-cáº¥u-hÃ¬nh-default-host-trong-nginx",[10,771,772],{},"TrÃªn Ubuntu, file cáº¥u hÃ¬nh cá»§a Nginx thÆ°á»ng Ä‘Æ°á»£c lÆ°u táº¡i cÃ¡c vá»‹ trÃ­ sau:",[22,774,775,781],{},[25,776,777,780],{},[147,778,779],{},"/etc/nginx/sites-available/default"," (Náº¿u sá»­ dá»¥ng thÆ° má»¥c sites-available vÃ  sites-enabled).",[25,782,783,786],{},[147,784,785],{},"/etc/nginx/conf.d/default.conf"," (ThÃ´ng dá»¥ng cho cÃ¡c cáº¥u hÃ¬nh Ä‘Æ¡n giáº£n).",[10,788,789],{},"Máº·c Ä‘á»‹nh, khi cÃ i Ä‘áº·t Nginx, sáº½ cÃ³ má»™t file cáº¥u hÃ¬nh default trong thÆ° má»¥c /etc/nginx/sites-available/ vá»›i má»™t sá»‘ cáº¥u hÃ¬nh cÆ¡ báº£n. Báº¡n cÃ³ thá»ƒ sá»­a file nÃ y Ä‘á»ƒ cáº¥u hÃ¬nh server block cho website cá»§a mÃ¬nh.",[10,791,792],{},[13,793,794],{},"Cáº¥u hÃ¬nh Default Host",[10,796,797],{},"Má»Ÿ file cáº¥u hÃ¬nh Nginx máº·c Ä‘á»‹nh:",[54,799],{":files":800},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"sudo nano /etc/nginx/sites-available/default\"}]",[10,802,803,804,807,808,811,812,580],{},"Máº·c Ä‘á»‹nh, Nginx sáº½ chá»n block Ä‘áº§u tiÃªn khi khÃ´ng tÃ¬m tháº¥y ",[147,805,806],{},"server_name"," tÆ°Æ¡ng á»©ng. Äá»ƒ cáº¥u hÃ¬nh rÃµ rÃ ng host máº·c Ä‘á»‹nh, báº¡n thÃªm ",[147,809,810],{},"default_server"," vÃ o dÃ²ng ",[147,813,814],{},"listen",[54,816],{":files":817},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80 default_server;\\n    server_name _;\\n    root /var/www/html;\\n    index index.html index.htm;\\n\\n    location / {\\n        try_files $uri $uri/ =404;\\n    }\\n}\\n\"}]",[10,819,820],{},[13,821,822],{},"Ghi chÃº:",[22,824,825,831,837,843,849],{},[25,826,827,830],{},[147,828,829],{},"listen 80 default_server;",": Cáº¥u hÃ¬nh Nginx láº¯ng nghe cá»•ng 80 (HTTP) vÃ  Ä‘Ã¡nh dáº¥u Ä‘Ã¢y lÃ  default_server (server máº·c Ä‘á»‹nh cho cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c).",[25,832,833,836],{},[147,834,835],{},"root /var/www/html;",": ÄÆ°á»ng dáº«n tá»›i thÆ° má»¥c chá»©a cÃ¡c tá»‡p tin cá»§a website. Báº¡n cÃ³ thá»ƒ thay Ä‘á»•i Ä‘Æ°á»ng dáº«n nÃ y thÃ nh thÆ° má»¥c cá»§a website báº¡n muá»‘n phá»¥c vá»¥.",[25,838,839,842],{},[147,840,841],{},"server_name _;",": Chá»‰ thá»‹ nÃ y cho phÃ©p server cháº¥p nháº­n táº¥t cáº£ cÃ¡c yÃªu cáº§u khÃ´ng khá»›p vá»›i server block khÃ¡c. Náº¿u báº¡n cÃ³ tÃªn miá»n cá»¥ thá»ƒ, hÃ£y thay tháº¿ dáº¥u gáº¡ch dÆ°á»›i (_) báº±ng tÃªn miá»n cá»§a báº¡n.",[25,844,845,848],{},[147,846,847],{},"location /",": ÄÃ¢y lÃ  pháº§n cáº¥u hÃ¬nh Ä‘á»‹nh tuyáº¿n cho cÃ¡c yÃªu cáº§u Ä‘áº¿n. Cáº¥u hÃ¬nh nÃ y giÃºp Nginx tÃ¬m kiáº¿m cÃ¡c tá»‡p tin khi ngÆ°á»i dÃ¹ng truy cáº­p vÃ o website.",[25,850,851,854],{},[147,852,853],{},"try_files $uri $uri/ =404;",": Náº¿u yÃªu cáº§u khÃ´ng trÃ¹ng khá»›p vá»›i tá»‡p tin hoáº·c thÆ° má»¥c, sáº½ tráº£ vá» lá»—i 404.",[10,856,857],{},"Sau khi chá»‰nh sá»­a xong, báº¡n cáº§n kiá»ƒm tra xem cáº¥u hÃ¬nh cÃ³ chÃ­nh xÃ¡c khÃ´ng:",[54,859],{":files":860},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo nginx -t\"}]",[10,862,863],{},"Náº¿u khÃ´ng cÃ³ lá»—i nÃ o, báº¡n cÃ³ thá»ƒ khá»Ÿi Ä‘á»™ng láº¡i Nginx Ä‘á»ƒ Ã¡p dá»¥ng cáº¥u hÃ¬nh má»›i:",[54,865],{":files":866},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo systemctl restart nginx\"}]",[10,868,869],{},"Giá»›i thiá»‡u vá» sites-available vÃ  sites-enabled",[10,871,872],{},"Trong Nginx, thÆ° má»¥c sites-available vÃ  sites-enabled lÃ  má»™t cÆ¡ cháº¿ Ä‘á»ƒ quáº£n lÃ½ cÃ¡c website (virtual hosts) mÃ  Nginx cÃ³ thá»ƒ phá»¥c vá»¥. Cáº¥u trÃºc nÃ y giÃºp dá»… dÃ ng báº­t/táº¯t cÃ¡c website mÃ  khÃ´ng cáº§n pháº£i xÃ³a hoáº·c thay Ä‘á»•i cáº¥u hÃ¬nh trá»±c tiáº¿p.",[582,874,875],{},[25,876,877,580],{},[147,878,879],{},"sites-available",[22,881,882,885,888],{},[25,883,884],{},"ÄÃ¢y lÃ  nÆ¡i báº¡n táº¡o vÃ  lÆ°u trá»¯ táº¥t cáº£ cÃ¡c file cáº¥u hÃ¬nh cá»§a cÃ¡c website hoáº·c á»©ng dá»¥ng mÃ  báº¡n muá»‘n Nginx phá»¥c vá»¥.",[25,886,887],{},"Má»—i file cáº¥u hÃ¬nh trong sites-available Ä‘áº¡i diá»‡n cho má»™t website hoáº·c á»©ng dá»¥ng riÃªng biá»‡t.",[25,889,890],{},"VÃ­ dá»¥: /etc/nginx/sites-available/example.com lÃ  cáº¥u hÃ¬nh cho website example.com.",[582,892,893],{"start":208},[25,894,895,580],{},[147,896,897],{},"sites-enabled",[22,899,900,903,906],{},[25,901,902],{},"ÄÃ¢y lÃ  nÆ¡i chá»©a cÃ¡c liÃªn káº¿t tÆ°á»£ng trÆ°ng (symlink) Ä‘áº¿n cÃ¡c file cáº¥u hÃ¬nh trong sites-available mÃ  báº¡n muá»‘n Nginx thá»±c thi.",[25,904,905],{},"CÃ¡c liÃªn káº¿t nÃ y cho phÃ©p Nginx biáº¿t Ä‘Æ°á»£c website nÃ o sáº½ Ä‘Æ°á»£c kÃ­ch hoáº¡t.",[25,907,908],{},"Báº¡n khÃ´ng nÃªn trá»±c tiáº¿p chá»‰nh sá»­a cÃ¡c file trong sites-enabled. Thay vÃ o Ä‘Ã³, báº¡n táº¡o symlink tá»« sites-available.",[10,910,911],{},"CÃ¡ch thá»©c hoáº¡t Ä‘á»™ng:",[22,913,914,917],{},[25,915,916],{},"Khi báº¡n táº¡o má»™t file cáº¥u hÃ¬nh trong sites-available, báº¡n cÃ³ thá»ƒ kÃ­ch hoáº¡t nÃ³ báº±ng cÃ¡ch táº¡o má»™t symlink Ä‘áº¿n file Ä‘Ã³ trong thÆ° má»¥c sites-enabled.",[25,918,919,920,923],{},"Äá»ƒ táº¡o symlink, sá»­ dá»¥ng lá»‡nh ",[147,921,922],{},"ln -s",".",[10,925,926],{},"VÃ­ dá»¥, náº¿u báº¡n cÃ³ cáº¥u hÃ¬nh example.com trong sites-available, báº¡n cÃ³ thá»ƒ táº¡o symlink vÃ o sites-enabled nhÆ° sau:",[54,928],{":files":929},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/\"}]",[38,931,289],{"id":932},"cáº¥u-hÃ¬nh-nginx-vá»›i-php-fpm",[10,934,935],{},"Äá»ƒ xá»­ lÃ½ cÃ¡c file PHP, báº¡n cáº§n káº¿t ná»‘i Nginx vá»›i PHP-FPM qua socket hoáº·c TCP:",[54,937],{":files":938},"[{\"title\":\"php-fpm.conf\",\"language\":\"nginx\",\"content\":\"location ~ \\\\.php$ {\\n  try_files $uri =404;\\n  fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\\n  fastcgi_index index.php;\\n  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n  include fastcgi_params;\\n}\\n\"}]",[10,940,941],{},[13,942,553],{},[22,944,945,948],{},[25,946,947],{},"ÄÆ°á»ng dáº«n socket cÃ³ thá»ƒ thay Ä‘á»•i tÃ¹y phiÃªn báº£n PHP.",[25,949,950],{},"Náº¿u dÃ¹ng TCP:",[54,952],{":files":953},"[{\"title\":\"php-fpm.conf\",\"language\":\"nginx\",\"content\":\"fastcgi_pass 127.0.0.1:9000;\"}]",[35,955],{},[38,957,294],{"id":958},"load-balancer-trong-nginx",[10,960,961],{},"Nginx há»— trá»£ cáº¥u hÃ¬nh cÃ¢n báº±ng táº£i vá»›i nhiá»u thuáº­t toÃ¡n lá»±a chá»n backend:",[22,963,964,970,976,982],{},[25,965,966,969],{},[147,967,968],{},"round-robin",": Máº·c Ä‘á»‹nh, phÃ¢n phá»‘i Ä‘á»u cho cÃ¡c request.",[25,971,972,975],{},[147,973,974],{},"least_conn",": Chá»n server Ã­t káº¿t ná»‘i nháº¥t.",[25,977,978,981],{},[147,979,980],{},"ip_hash",": Duy trÃ¬ session cho client.",[25,983,984,987],{},[147,985,986],{},"least_time",": chá»n server cÃ³ thá»i gian pháº£n há»“i Ã­t nháº¥t",[10,989,990],{},"CÃ³ thá»ƒ thÃªm trá»ng sá»‘ cho server báº±ng cÃ¡ch thÃªm sá»‘ sau ip:port",[22,992,993],{},[25,994,995],{},"Ex: server 192.168.1.0:8000 weight=3;",[54,997],{":files":998},"[{\"title\":\"upstream.conf\",\"language\":\"nginx\",\"content\":\"upstream myapp1 {\\n    ip_hash;\\n    server 192.168.1.10:8000;\\n    server 192.168.2.10:8000;\\n    # server 192.168.1.10:8000 weight=3;\\n}\\n\"}]",[10,1000,1001],{},"Cáº¥u hÃ¬nh server block proxy Ä‘áº¿n upstream:",[54,1003],{":files":1004},"[{\"title\":\"proxy.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80 default_server;\\n  server_name _;\\n  root /var/www/html;\\n  index index.html index.htm;\\n\\n  location / {\\n      proxy_pass http://myapp1;\\n      proxy_set_header Host $host;\\n      proxy_set_header X-Real-IP $remote_addr;\\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n      proxy_set_header X-Forwarded-Proto $scheme;\\n  }\\n}\\n\"}]",[35,1006],{},[38,1008,299],{"id":1009},"gzip-compression",[10,1011,301],{},[54,1013],{":files":1014},"[{\"title\":\"gzip.conf\",\"language\":\"nginx\",\"content\":\"gzip on;\\ngzip_disable \\\"msie6\\\";\\ngzip_vary on;\\ngzip_proxied any;\\ngzip_comp_level 6;\\ngzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n\"}]",[35,1016],{},[38,1018,304],{"id":1019},"kÃ­ch-hoáº¡t-http2",[10,1021,306],{},[54,1023],{":files":1024},"[{\"title\":\"http2.conf\",\"language\":\"nginx\",\"content\":\"listen 443 ssl http2;\\n\"}]",[35,1026],{},[38,1028,309],{"id":1029},"rate-limiting",[10,1031,311],{},[54,1033],{":files":1034},"[{\"title\":\"rate-limiting.conf\",\"language\":\"nginx\",\"content\":\"limit_req_zone $binary_remote_addr zone=mylimit:10m rate=1r/s;\\n\\nlocation /api/ {\\n    limit_req zone=mylimit burst=5;\\n}\\n\"}]",[35,1036],{},[38,1038,314],{"id":1039},"redirect-vÃ -rewrites",[10,1041,1042],{},"Chuyá»ƒn hÆ°á»›ng toÃ n bá»™ traffic HTTP sang HTTPS:",[54,1044],{":files":1045},"[{\"title\":\"redirect.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80;\\n    server_name example.com;\\n    return 301 https://$host$request_uri;\\n}\\nserver {\\n    listen 443 ssl;\\n    server_name example.com;\\n    ssl_certificate /path/to/cert.pem;\\n    ssl_certificate_key /path/to/key.pem;\\n}\\n\"}]",[10,1047,1048],{},"Viáº¿t láº¡i URL cho SPA:",[54,1050],{":files":1051},"[{\"title\":\"rewrite.conf\",\"language\":\"nginx\",\"content\":\"location /api/ {\\n    rewrite ^/api/(.*)$ /$1 break;\\n}\\n\"}]",[35,1053],{},[38,1055,319],{"id":1056},"hardening-security",[10,1058,1059],{},"Báº£o vá»‡ server báº±ng cÃ¡ch tá»« chá»‘i truy cáº­p file nháº¡y cáº£m:",[54,1061],{":files":1062},"[{\"title\":\"deny.conf\",\"language\":\"nginx\",\"content\":\"location ~* \\\\\\\\.(git|env|bak|log)$ {\\n  deny all;\\n}\\n\"}]",[10,1064,1065],{},"áº¨n thÃ´ng tin server:",[54,1067],{":files":1068},"[{\"title\":\"security.conf\",\"language\":\"nginx\",\"content\":\"server_tokens off;\\n\"}]",[10,1070,1071],{},"Chá»‘ng clickjacking vÃ  XSS:",[54,1073],{":files":1074},"[{\"title\":\"headers.conf\",\"language\":\"nginx\",\"content\":\"add_header X-Content-Security-Policy \\\"default-src 'self'\\\";\\nadd_header X-Frame-Options \\\"DENY\\\";\\nadd_header X-XSS-Protection \\\"1; mode=block\\\";\\nadd_header Referrer-Policy \\\"no-referrer\\\";\\n\"}]",[35,1076],{},[38,1078,324],{"id":1079},"logging-nÃ¢ng-cao",[10,1081,326],{},[54,1083],{":files":1084},"[{\"title\":\"logging.conf\",\"language\":\"nginx\",\"content\":\"log_format main '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n               '$status $body_bytes_sent \\\"$http_referer\\\" '\\n               '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\naccess_log /var/log/nginx/access.log main;\\n\"}]",[35,1086],{},[38,1088,269],{"id":625},[22,1090,1091,1098,1105,1112],{},[25,1092,1093],{},[195,1094,1097],{"href":1095,"rel":1096},"https://nginx.org/en/docs/",[634],"Nginx Documentation",[25,1099,1100],{},[195,1101,1104],{"href":1102,"rel":1103},"https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/",[634],"Nginx Load Balancing Guide",[25,1106,1107],{},[195,1108,1111],{"href":1109,"rel":1110},"https://www.php.net/manual/en/install.fpm.configuration.php",[634],"Nginx + PHP-FPM Setup",[25,1113,1114],{},[195,1115,1118],{"href":1116,"rel":1117},"https://owasp.org/www-project-secure-headers/",[634],"OWASP Nginx Hardening Guide",[35,1120],{},[653,1122],{},[10,1124,1125],{},[13,1126,659],{},[10,1128,1129],{},"Nginx lÃ  cÃ´ng cá»¥ cá»±c ká»³ máº¡nh máº½ vÃ  linh hoáº¡t, khÃ´ng chá»‰ giá»›i háº¡n á»Ÿ web server mÃ  cÃ²n lÃ  reverse proxy, caching layer, vÃ  load balancer. Viá»‡c náº¯m vá»¯ng vÃ  khai thÃ¡c tá»‘t cÃ¡c tÃ­nh nÄƒng sáº½ giÃºp há»‡ thá»‘ng cá»§a báº¡n hiá»‡u suáº¥t cao, báº£o máº­t vÃ  dá»… má»Ÿ rá»™ng.",{"title":207,"searchDepth":208,"depth":208,"links":1131},[],"HÆ°á»›ng dáº«n chi tiáº¿t vá» cáº¥u hÃ¬nh máº·c Ä‘á»‹nh, PHP-FPM vÃ  thiáº¿t láº­p Load Balancer vá»›i Nginx.","/images/blog/basic-nginx/banner.webp","nginx, cáº¥u hÃ¬nh, load balancer, php-fpm",{},{"title":274,"description":1132},"blog/basic-nginx",[1139],"nginx","HD2m_BWB56LMZrpcr_Dma_Q9HlPP695j9xqke5zmgZ8",{"id":4,"title":5,"body":1142,"date":222,"description":223,"extension":224,"image":225,"keywords":226,"meta":1276,"navigation":228,"path":229,"published":228,"seo":1277,"stem":231,"tags":1278,"__hash__":234},{"type":7,"value":1143,"toc":1262},[1144,1148,1150,1152,1160,1162,1164,1166,1168,1170,1172,1174,1176,1178,1180,1182,1184,1186,1188,1190,1192,1194,1196,1198,1200,1202,1204,1206,1208,1210,1212,1214,1216,1218,1220,1222,1224,1228,1230,1232,1234,1236,1238,1240,1242,1244,1246,1250,1252],[10,1145,1146],{},[13,1147,5],{},[10,1149,17],{},[10,1151,20],{},[22,1153,1154,1156,1158],{},[25,1155,27],{},[25,1157,30],{},[25,1159,33],{},[35,1161],{},[38,1163,41],{"id":40},[10,1165,44],{},[46,1167,49],{"id":48},[10,1169,52],{},[54,1171],{":files":56},[46,1173,60],{"id":59},[10,1175,63],{},[54,1177],{":files":66},[46,1179,70],{"id":69},[10,1181,73],{},[54,1183],{":files":76},[46,1185,80],{"id":79},[10,1187,83],{},[54,1189],{":files":86},[46,1191,90],{"id":89},[10,1193,93],{},[54,1195],{":files":96},[46,1197,100],{"id":99},[10,1199,103],{},[54,1201],{":files":106},[10,1203,109],{},[54,1205],{":files":112},[10,1207,115],{},[54,1209],{":files":118},[38,1211,122],{"id":121},[10,1213,125],{},[46,1215,129],{"id":128},[54,1217],{":files":132},[10,1219,135],{},[54,1221],{":files":138},[46,1223,142],{"id":141},[10,1225,145,1226,150],{},[147,1227,149],{},[54,1229],{":files":153},[46,1231,157],{"id":156},[10,1233,160],{},[54,1235],{":files":163},[46,1237,167],{"id":166},[10,1239,170],{},[54,1241],{":files":173},[46,1243,177],{"id":176},[10,1245,180],{},[10,1247,1248],{},[13,1249,185],{},[46,1251,189],{"id":188},[22,1253,1254,1258],{},[25,1255,1256],{},[195,1257,199],{"href":197,"target":198},[25,1259,1260],{},[195,1261,205],{"href":204,"target":198},{"title":207,"searchDepth":208,"depth":208,"links":1263},[1264,1265,1266,1267,1268,1269,1270,1271,1272,1273,1274,1275],{"id":48,"depth":208,"text":49},{"id":59,"depth":208,"text":60},{"id":69,"depth":208,"text":70},{"id":79,"depth":208,"text":80},{"id":89,"depth":208,"text":90},{"id":99,"depth":208,"text":100},{"id":128,"depth":208,"text":129},{"id":141,"depth":208,"text":142},{"id":156,"depth":208,"text":157},{"id":166,"depth":208,"text":167},{"id":176,"depth":208,"text":177},{"id":188,"depth":208,"text":189},{},{"title":5,"description":223},[233],{"id":1280,"title":382,"body":1281,"date":222,"description":1391,"extension":224,"image":1392,"keywords":1393,"meta":1394,"navigation":228,"path":381,"published":228,"seo":1395,"stem":1396,"tags":1397,"__hash__":1399},"blog/blog/common-docker-file.md",{"type":7,"value":1282,"toc":1382},[1283,1287,1290,1296,1301,1304,1307,1310,1317,1320,1323,1326,1329,1332,1335,1338,1343,1346,1349,1362,1365,1368,1371,1374],[10,1284,1285],{},[13,1286,382],{},[10,1288,1289],{},"Docker lÃ  má»™t cÃ´ng cá»¥ áº£o hÃ³a nháº¹ giÃºp phÃ¡t triá»ƒn, triá»ƒn khai vÃ  cháº¡y á»©ng dá»¥ng trong cÃ¡c container. NÃ³ cho phÃ©p báº¡n Ä‘Ã³ng gÃ³i á»©ng dá»¥ng vÃ  táº¥t cáº£ cÃ¡c phá»¥ thuá»™c cá»§a nÃ³ vÃ o má»™t container duy nháº¥t, giÃºp dá»… dÃ ng triá»ƒn khai trÃªn báº¥t ká»³ mÃ´i trÆ°á»ng nÃ o mÃ  khÃ´ng cáº§n lo láº¯ng vá» sá»± khÃ¡c biá»‡t giá»¯a cÃ¡c mÃ´i trÆ°á»ng.",[744,1291,1293],{"type":1292},"info",[10,1294,1295],{},"ÄÃ¢y lÃ  má»™t sá»‘ Dockerfile cho cÃ¡c dá»± Ã¡n thÆ°á»ng gáº·p, báº¡n cÃ³ thá»ƒ tham kháº£o vÃ  Ä‘iá»u chá»‰nh theo nhu cáº§u cá»§a mÃ¬nh.",[10,1297,1298,1299],{},"Ná»™i dung bÃ i viáº¿t Ä‘Æ°á»£c tá»•ng há»£p vÃ  tÃ­ch gÃ³p tá»« nhiá»u nguá»“n khÃ¡c nhau, bao gá»“m cáº£ cÃ¡c dá»± Ã¡n thá»±c táº¿ mÃ  mÃ¬nh Ä‘Ã£ lÃ m.\n",[653,1300],{},[46,1302,387],{"id":1303},"dockerfile-cho-nodejs",[10,1305,1306],{},"Dockerfile cho Node.js ráº¥t quan trá»ng khi triá»ƒn khai á»©ng dá»¥ng JavaScript phÃ­a server. ÄÃ¢y lÃ  má»™t Dockerfile Ä‘Ã£ Ä‘Æ°á»£c tá»‘i Æ°u cho má»™t dá»± Ã¡n Node.js Ä‘iá»ƒn hÃ¬nh:",[54,1308],{":files":1309},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\nCOPY package*.json ./\\n\\nRUN npm ci --only=production\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"server.js\\\"]\\n\"}]",[10,1311,1312,1313,1316],{},"CÃ¡ch 2, sá»­ dá»¥ng ",[147,1314,1315],{},"pm2",". Vá» cÆ¡ báº£n thÃ¬ cÃ¡ch nÃ y nháº¹ hÆ¡n kha khÃ¡ so vá»›i npm",[54,1318],{":files":1319},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci --only=production\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nRUN npm install -g pm2\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"pm2-runtime\\\", \\\"start\\\", \\\"server.js\\\"]\\n\"}]",[46,1321,392],{"id":1322},"dockerfile-nodejs-nestjs",[54,1324],{":files":1325},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\n\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app/dist ./dist\\n\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"dist/main\\\"]\\n\"}]",[46,1327,396],{"id":1328},"dockerfile-nodejs-expressjs",[54,1330],{":files":1331},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\n\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"index.js\\\"]\\n\"}]",[46,1333,400],{"id":1334},"dockerfile-reactjs",[10,1336,1337],{},"CÃ³ thá»ƒ sá»­ dá»¥ng Dockerfile nÃ y cho cÃ¡c dá»± Ã¡n nhÆ° Vue, Angular,...",[10,1339,1340,1342],{},[13,1341,553],{}," á»Ÿ Ä‘Ã¢y thÆ° má»¥c chá»©a nginx/nginx.conf Ä‘áº·t cÃ¹ng cáº¥p vá»›i Dockerfile",[54,1344],{":files":1345},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM nginx:alpine\\n\\nCOPY --from=build /app/build /usr/share/nginx/html\\nCOPY nginx.conf /etc/nginx/nginx.conf\\n\\nEXPOSE 3000\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\"},{\"title\":\"nginx.conf\",\"language\":\"nginx\",\"content\":\"worker_processes auto;\\nerror_log /var/log/nginx/error.log warn;\\npid /var/run/nginx.pid;\\n\\nevents {\\n    worker_connections 1024;\\n}\\n\\nhttp {\\n    include /etc/nginx/mime.types;\\n    default_type application/octet-stream;\\n\\n    log_format main '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n                  '$status $body_bytes_sent \\\"$http_referer\\\" '\\n                  '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\n\\n    access_log /var/log/nginx/access.log main;\\n\\n    server_tokens off;\\n\\n    gzip on;\\n    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n\\n    server {\\n        listen 3000;  # Láº¯ng nghe trÃªn cá»•ng 3000\\n        server_name localhost;\\n\\n        root /usr/share/nginx/html;\\n        index index.html;\\n\\n        location / {\\n            try_files $uri $uri/ /index.html;\\n        }\\n\\n        location ~* \\\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\\n            expires 1y;\\n            add_header Cache-Control \\\"public, no-transform\\\";\\n        }\\n\\n        error_page 404 /404.html;\\n        location = /404.html {\\n            internal;\\n        }\\n\\n        error_page 500 502 503 504 /50x.html;\\n        location = /50x.html {\\n            internal;\\n        }\\n\\n        location ~ /\\\\.ht {\\n            deny all;\\n        }\\n\\n        add_header X-Frame-Options \\\"SAMEORIGIN\\\";\\n        add_header X-Content-Type-Options \\\"nosniff\\\";\\n        add_header X-XSS-Protection \\\"1; mode=block\\\";\\n        add_header Referrer-Policy \\\"no-referrer-when-downgrade\\\";\\n        add_header Content-Security-Policy \\\"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'; frame-ancestors 'self';\\\";\\n    }\\n}\\n\"}]",[46,1347,405],{"id":1348},"dockerfile-cho-php-vá»›i-laravel",[10,1350,1351,1353,1354,1357,1358,1361],{},[13,1352,553],{}," thÆ° má»¥c ",[13,1355,1356],{},"conf/nginx.conf"," vÃ  ",[13,1359,1360],{},"conf/supervisord.conf"," cÃ¹ng cáº¥p vá»›i Dockerfile",[54,1363],{":files":1364},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Composer Dependencies\\nFROM composer:2 AS composer\\n\\nWORKDIR /app\\nCOPY composer.json composer.lock ./\\n\\nRUN composer install --no-dev --optimize-autoloader --no-interaction\\n\\n# Stage 2: Build\\nFROM php:8.2-fpm-alpine AS php\\n\\nWORKDIR /var/www/html\\nCOPY --from=composer /app/vendor ./vendor\\nCOPY . .\\n\\nRUN apk add --no-cache \\\\\\n        libzip-dev \\\\\\n        libpng-dev \\\\\\n        libjpeg-turbo-dev \\\\\\n        freetype-dev \\\\\\n        && docker-php-ext-configure gd --with-freetype --with-jpeg \\\\\\n        && docker-php-ext-install -j$(nproc) gd pdo_mysql zip opcache\\n\\nRUN { \\\\\\n        echo 'opcache.enable=1'; \\\\\\n        echo 'opcache.revalidate_freq=0'; \\\\\\n        echo 'opcache.validate_timestamps=1'; \\\\\\n        echo 'opcache.max_accelerated_files=10000'; \\\\\\n        echo 'opcache.memory_consumption=192'; \\\\\\n        echo 'opcache.max_wasted_percentage=10'; \\\\\\n        echo 'opcache.interned_strings_buffer=16'; \\\\\\n        echo 'opcache.fast_shutdown=1'; \\\\\\n    } > /usr/local/etc/php/conf.d/opcache-recommended.ini\\n\\nRUN chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache\\n\\n# Stage 3: Nginx vÃ  Supervisord\\nFROM nginx:alpine AS nginx\\n\\nWORKDIR /var/www/html\\nCOPY --from=php /var/www/html /var/www/html\\nCOPY conf/nginx.conf /etc/nginx/conf.d/default.conf\\n\\nRUN apk add --no-cache supervisor\\n\\nCOPY conf/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\\n\\nEXPOSE 80\\nCMD [\\\"supervisord\\\", \\\"-c\\\", \\\"/etc/supervisor/conf.d/supervisord.conf\\\"]\\n\"},{\"title\":\"nginx.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80;\\n  server_name localhost;\\n\\n  root /var/www/html/public;\\n  index index.php index.html index.htm;\\n\\n  location / {\\n      try_files $uri $uri/ /index.php?$query_string;\\n  }\\n\\n  location ~ \\\\.php$ {\\n      include fastcgi_params;\\n      fastcgi_pass 127.0.0.1:9000;\\n      fastcgi_index index.php;\\n      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n  }\\n\\n  location ~ /\\\\.ht {\\n      deny all;\\n  }\\n\\n  error_log /var/log/nginx/error.log;\\n  access_log /var/log/nginx/access.log;\\n}\\n\"},{\"title\":\"conf/supervisord.conf\",\"language\":\"ini\",\"content\":\"[supervisord]\\nnodaemon=true\\n\\n[program:php-fpm]\\ncommand=php-fpm\\nautostart=true\\nautorestart=true\\nstderr_logfile=/var/log/php-fpm.err.log\\nstdout_logfile=/var/log/php-fpm.out.log\\n\\n[program:nginx]\\ncommand=nginx -g \\\"daemon off;\\\"\\nautostart=true\\nautorestart=true\\nstderr_logfile=/var/log/nginx.err.log\\nstdout_logfile=/var/log/nginx.out.log\\n\"}]",[46,1366,410],{"id":1367},"dockerfile-cho-nextjs",[54,1369],{":files":1370},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"npm\\\", \\\"start\\\"]\\n\"},{\"title\":\"conf/nginx.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 3000;\\n    server_name localhost;\\n\\n    location / {\\n        proxy_pass http://localhost:3000;\\n        proxy_http_version 1.1;\\n        proxy_set_header Upgrade $http_upgrade;\\n        proxy_set_header Connection 'upgrade';\\n        proxy_set_header Host $host;\\n        proxy_cache_bypass $http_upgrade;\\n    }\\n}\\n\"}]",[46,1372,414],{"id":1373},"Ä‘ang-cáº­p-nháº­t",[10,1375,1376,1377,1381],{},"Náº¿u báº¡n cÃ³ cÃ¡c cáº¥u hÃ¬nh hoáº·c Dockerfile khÃ¡c muá»‘n chia sáº», vui lÃ²ng gá»­i email vá» ",[195,1378,1380],{"href":1379},"mailto:vinhtieng123@gmail.com","vinhtieng123@gmail.com",". MÃ¬nh ráº¥t trÃ¢n trá»ng Ä‘iá»u Ä‘Ã³.",{"title":207,"searchDepth":208,"depth":208,"links":1383},[1384,1385,1386,1387,1388,1389,1390],{"id":1303,"depth":208,"text":387},{"id":1322,"depth":208,"text":392},{"id":1328,"depth":208,"text":396},{"id":1334,"depth":208,"text":400},{"id":1348,"depth":208,"text":405},{"id":1367,"depth":208,"text":410},{"id":1373,"depth":208,"text":414},"TÃ¬m hiá»ƒu vá» Docker vÃ  khÃ¡m phÃ¡ cÃ¡c Dockerfile phá»• biáº¿n cho nhiá»u dá»± Ã¡n nhÆ° Node.js, PHP vá»›i Laravel, React, Vue, Nuxt vÃ  Next.js. KhÃ¡m phÃ¡ cÃ¡c ká»¹ thuáº­t tá»‘i Æ°u vÃ  thá»±c hÃ nh tá»‘t nháº¥t.","/images/blog/common-docker-file/banner.webp","docker, dockerfile, file docker máº«u, dockerfile cho nodejs, dockerfile cho php, dockerfile cho react, dockerfile cho vue, dockerfile cho nuxt, dockerfile cho next",{},{"title":382,"description":1391},"blog/common-docker-file",[1398],"docker","ngoWrLm6syqa7aWjq2s0Or4XmD2WS_C5jmz1Gb9eNJc",{"id":1401,"title":419,"body":1402,"date":1707,"description":421,"extension":224,"image":1708,"keywords":1709,"meta":1710,"navigation":228,"path":418,"published":228,"seo":1711,"stem":1712,"tags":1713,"__hash__":1715},"blog/blog/jwt.md",{"type":7,"value":1403,"toc":1705},[1404,1407,1410,1420,1423,1437,1442,1445,1465,1467,1472,1479,1482,1485,1492,1507,1510,1513,1528,1531,1538,1541,1544,1547,1550,1562,1565,1568,1583,1594,1597,1600,1620,1626,1635,1638,1641,1660,1663,1666,1669,1671,1677,1680,1683],[38,1405,424],{"id":1406},"_1-giá»›i-thiá»‡u-vá»-jwt",[10,1408,1409],{},"JSON Web Token (JWT) lÃ  má»™t tiÃªu chuáº©n má»Ÿ ( RFC 7519 ) Ä‘á»‹nh nghÄ©a má»™t cÃ¡ch thá»©c nhá» gá»n vÃ  Ä‘á»™c láº­p Ä‘á»ƒ truyá»n thÃ´ng tin an toÃ n giá»¯a cÃ¡c bÃªn dÆ°á»›i dáº¡ng Ä‘á»‘i tÆ°á»£ng JSON. ThÃ´ng tin nÃ y cÃ³ thá»ƒ Ä‘Æ°á»£c xÃ¡c minh vÃ  tin cáº­y vÃ¬ nÃ³ Ä‘Æ°á»£c kÃ½ ká»¹ thuáº­t sá»‘. JWT cÃ³ thá»ƒ Ä‘Æ°á»£c kÃ½ báº±ng má»™t bÃ­ máº­t (vá»›i thuáº­t toÃ¡n HMAC ) hoáº·c má»™t cáº·p khÃ³a cÃ´ng khai/riÃªng tÆ° báº±ng RSA hoáº·c ECDSA .",[10,1411,1412],{},[1413,1414,1415,1416],"em",{},"TrÃ­ch tá»«: ",[195,1417,1418],{"href":1418,"rel":1419},"https://jwt.io/introduction",[634],[38,1421,429],{"id":1422},"_2-cÃ¡c-thÃ nh-pháº§n-cá»§a-jwt",[10,1424,1425,1426,1429,1430,1357,1433,1436],{},"JWT bao gá»“m ba thÃ nh pháº§n chÃ­nh: ",[147,1427,1428],{},"Header",", ",[147,1431,1432],{},"Payload",[147,1434,1435],{},"Signature",". Má»—i pháº§n Ä‘á»u Ä‘Æ°á»£c mÃ£ hÃ³a báº±ng Base64Url vÃ  Ä‘Æ°á»£c phÃ¢n tÃ¡ch báº±ng dáº¥u cháº¥m (.).\nMá»™t JWT token thÆ°á»ng sáº½ trÃ´ng nhÆ° sau:",[744,1438,1439],{"type":1292},[10,1440,1441],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[10,1443,1444],{},"nhÆ° váº­y vá»›i JWT token á»Ÿ trÃªn thÃ¬ cÃ¡c thÃ nh pháº§n sau khi Ä‘Æ°á»£c mÃ£ hÃ³a sáº½ lÃ :",[22,1446,1447,1453,1459],{},[25,1448,1449,1450],{},"Header: ",[147,1451,1452],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",[25,1454,1455,1456],{},"Payload: ",[147,1457,1458],{},"eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ",[25,1460,1461,1462],{},"Signature: ",[147,1463,1464],{},"SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[653,1466],{},[10,1468,1469],{},[13,1470,1471],{},"Chi tiáº¿t vá» cÃ¡c thÃ nh pháº§n",[22,1473,1474],{},[25,1475,1476,1478],{},[13,1477,1428],{},": ThÆ°á»ng sáº½ chá»©a thÃ´ng tin vá» thuáº­t toÃ¡n mÃ£ hÃ³a vÃ  loáº¡i token.",[10,1480,1481],{},"VÃ­ dá»¥:",[54,1483],{":files":1484},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"alg\\\": \\\"HS256\\\",\\n  \\\"typ\\\": \\\"JWT\\\"\\n}\\n\"}]",[22,1486,1487],{},[25,1488,1489,1491],{},[13,1490,1432],{},": ÄÃ¢y lÃ  pháº§n sáº½ chá»©a cÃ¡c thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i. ThÆ°á»ng thÃ¬ chÃºng ta sáº½ lÆ°u thÃ´ng tin ngÆ°á»i dÃ¹ng, user_id,...",[744,1493,1494],{"type":1292},[10,1495,1496,1497,1429,1500,1429,1503,1506],{},"LÆ°u Ã½ ráº±ng JWT token khÃ´ng cÃ³ háº¿t háº¡n, tuy nhiÃªn chÃºng ta cÃ³ thá»ƒ giá»›i háº¡n thá»i gian sá»‘ng cá»§a token báº±ng cÃ¡ch thÃªm cÃ¡c trÆ°á»ng nhÆ° ",[147,1498,1499],{},"exp",[147,1501,1502],{},"nbf",[147,1504,1505],{},"iat"," vÃ o payload. VÃ  khi chÃºng ta xÃ¡c thá»±c token chÃºng ta sáº½ cáº§n thÃªm má»™t bÆ°á»›c kiá»ƒm tra thá»i gian sá»‘ng cá»§a token. NhÆ° váº­y chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng JWT token nhÆ° má»™t session token.",[10,1508,1509],{},"VÃ­ dá»¥ vá» payload:",[54,1511],{":files":1512},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"sub\\\": \\\"1234567890\\\",\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"iat\\\": 1516239022\\n}\\n\"}]",[22,1514,1515],{},[25,1516,1517,1519,1520,1357,1522,1524,1525],{},[13,1518,1435],{},": ÄÆ°á»£c táº¡o báº±ng cÃ¡ch mÃ£ hÃ³a ",[147,1521,1428],{},[147,1523,1432],{}," vá»›i má»™t khÃ³a bÃ­ máº­t vÃ  thuáº­t toÃ¡n Ä‘Ã£ chá»‰ Ä‘á»‹nh trong Header. Äiá»u nÃ y giÃºp Ä‘áº£m báº£o ráº±ng token khÃ´ng bá»‹ thay Ä‘á»•i trong quÃ¡ trÃ¬nh truyá»n táº£i. VÃ­ dá»¥:",[54,1526],{":files":1527},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"HMACSHA256(\\n  base64UrlEncode(header) + \\\".\\\" +\\n  base64UrlEncode(payload),\\n  your-256-bit-secret\\n)\\n\"}]",[38,1529,434],{"id":1530},"_3-viáº¿t-láº¡i-hÃ m-Ä‘á»ƒ-generate-jwt-token-vÃ -verify-jwt-token-trong-nodejs",[10,1532,1533,1534,1537],{},"Khi lÃ m viá»‡c vá»›i jwt vÃ  nodeJs, háº§u háº¿t má»i ngÆ°á»i sáº½ sá»­ dá»¥ng thÆ° viá»‡n ",[147,1535,1536],{},"jsonwebtoken"," Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token. Tuy nhiÃªn, Ä‘á»ƒ hiá»ƒu rÃµ hÆ¡n vá» cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, chÃºng ta cÃ³ thá»ƒ tá»± viáº¿t hÃ m Ä‘á»ƒ táº¡o vÃ  xÃ¡c thá»±c JWT token.",[10,1539,1540],{},"Giáº£ sá»­ chÃºng ta muá»‘n táº¡o JWT token tá»« thÃ´ng tin user_id=123, khi Ä‘Ã³ pháº§n payload sáº½ lÃ :",[54,1542],{":files":1543},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123\\n}\\n\"}]",[10,1545,1546],{},"á» pháº§n header, chÃºng ta sáº½ sá»­ dá»¥ng thuáº­t toÃ¡n HS256 Ä‘á»ƒ mÃ£ hÃ³a JWT token. NÃªn payload sáº½ cÃ³ dáº¡ng nhÆ° sau:",[54,1548],{":files":1549},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const header = {\\n  alg: 'HS256',\\n  typ: 'JWT'\\n}\\n\"}]",[10,1551,1552,1553,1357,1555,1557,1558,1357,1560,923],{},"Äá»ƒ táº¡o JWT token, chÃºng ta cáº§n mÃ£ hÃ³a ",[147,1554,1428],{},[147,1556,1432],{}," báº±ng Base64Url. Sau Ä‘Ã³, chÃºng ta sáº½ táº¡o chá»¯ kÃ½ báº±ng cÃ¡ch sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256 vá»›i khÃ³a bÃ­ máº­t (secret key) vÃ  káº¿t há»£p ",[147,1559,1428],{},[147,1561,1432],{},[10,1563,1564],{},"Äáº§u tiÃªn chÃºng ta cáº§n viáº¿t 1 hÃ m Ä‘á»ƒ mÃ£ hÃ³a Base64Url:",[54,1566],{":files":1567},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\"}]",[10,1569,1570,1571,1574,1575,1578,1579,1582],{},"á» Ä‘Ã¢y, vÃ¬ chÃºng ta sá»­ dá»¥ng NodeJs nÃªn cÃ³ thá»ƒ sá»­ dá»¥ng ",[147,1572,1573],{},"Buffer"," Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Náº¿u báº¡n Ä‘ang lÃ m viá»‡c vá»›i JavaScript trÃªn trÃ¬nh duyá»‡t, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ",[147,1576,1577],{},"btoa()"," Ä‘á»ƒ mÃ£ hÃ³a Base64Url. Khi muá»‘n giáº£i mÃ£, báº¡n cÃ³ thá»ƒ sá»­ dá»¥ng ",[147,1580,1581],{},"atob()",". HÃ m nÃ y lÃ  hÃ m cÃ³ sáºµn trong trÃ¬nh duyá»‡t.",[10,1584,1585,1586,1589,1590,1593],{},"Tiáº¿p theo, chÃºng ta sáº½ triá»ƒn khai hÃ m táº¡o JWT token. Trong Node.js, chÃºng ta cÃ³ thá»ƒ dá»… dÃ ng thá»±c hiá»‡n Ä‘iá»u nÃ y báº±ng cÃ¡ch dÃ¹ng thÆ° viá»‡n tÃ­ch há»£p sáºµn lÃ  ",[147,1587,1588],{},"crypto",", cá»¥ thá»ƒ lÃ  hÃ m ",[147,1591,1592],{},"createHmac",". HÃ m nÃ y sáº½ giÃºp chÃºng ta táº¡o ra chá»¯ kÃ½ (signature) tá»« chuá»—i Ä‘Ã£ mÃ£ hÃ³a gá»“m Header vÃ  Payload, káº¿t há»£p vá»›i secret key Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh toÃ n váº¹n vÃ  xÃ¡c thá»±c cá»§a token.",[10,1595,1596],{},"Full code mÃ£ hÃ³a JWT token sáº½ nhÆ° sau:",[54,1598],{":files":1599},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const crypto = require('crypto');\\nfunction base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\\nfunction createJWT(payload, secret) {\\n  const header = {\\n    alg: 'HS256',\\n    typ: 'JWT'\\n  };\\n\\n  const encodedHeader = base64UrlEncode(JSON.stringify(header));\\n  const encodedPayload = base64UrlEncode(JSON.stringify(payload));\\n\\n  const signature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return `${encodedHeader}.${encodedPayload}.${signature}`;\\n}\\n\"}]",[10,1601,1602,1603,1606,1607,1357,1610,1613,1614,1616,1617,1619],{},"NhÆ° váº­y chÃºng ta Ä‘Ã£ cÃ³ hÃ m ",[147,1604,1605],{},"createJWT"," Ä‘á»ƒ táº¡o JWT token. HÃ m nÃ y sáº½ nháº­n vÃ o 2 tham sá»‘ lÃ  ",[147,1608,1609],{},"payload",[147,1611,1612],{},"secret",". ",[147,1615,1609],{}," lÃ  thÃ´ng tin mÃ  chÃºng ta muá»‘n mÃ£ hÃ³a vÃ  truyá»n táº£i, cÃ²n ",[147,1618,1612],{}," lÃ  khÃ³a bÃ­ máº­t mÃ  chÃºng ta sáº½ sá»­ dá»¥ng Ä‘á»ƒ táº¡o chá»¯ kÃ½ cho token.",[744,1621,1623],{"type":1622},"error",[10,1624,1625],{},"Äá»‘i vá»›i JWT token, chÃºng ta cÃ³ thá»ƒ sá»­ dá»¥ng báº¥t ká»³ chuá»—i nÃ o lÃ m khÃ³a bÃ­ máº­t. Tuy nhiÃªn, Ä‘á»ƒ Ä‘áº£m báº£o tÃ­nh báº£o máº­t, chÃºng ta nÃªn sá»­ dá»¥ng má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i. VÃ¬ khi sá»­ dá»¥ng thuáº­t toÃ¡n HMACSHA256, náº¿u káº» táº¥n cÃ´ng biáº¿t Ä‘Æ°á»£c khÃ³a bÃ­ máº­t, há» cÃ³ thá»ƒ táº¡o ra token giáº£ máº¡o vÃ  truy cáº­p vÃ o há»‡ thá»‘ng cá»§a báº¡n.",[10,1627,1628,1629,1634],{},"CÃ³ thá»ƒ sá»­ dá»¥ng trang web ",[195,1630,1633],{"href":1631,"rel":1632},"https://randomkeygen.com/",[634],"randomkeygen.com"," Ä‘á»ƒ táº¡o ra má»™t chuá»—i ngáº«u nhiÃªn vÃ  Ä‘á»§ dÃ i lÃ m khÃ³a bÃ­ máº­t.",[38,1636,439],{"id":1637},"_4-xÃ¡c-thá»±c-jwt-token",[10,1639,1640],{},"Token JWT gá»“m ba pháº§n: Header, Payload vÃ  Signature, Ä‘Æ°á»£c ná»‘i vá»›i nhau báº±ng dáº¥u cháº¥m (.). QuÃ¡ trÃ¬nh xÃ¡c thá»±c diá»…n ra nhÆ° sau:",[582,1642,1643,1646,1649],{},[25,1644,1645],{},"TÃ¡ch token thÃ nh ba pháº§n: Header, Payload vÃ  Signature.",[25,1647,1648],{},"Táº¡o láº¡i chá»¯ kÃ½ báº±ng cÃ¡ch káº¿t há»£p Header vÃ  Payload Ä‘Ã£ mÃ£ hÃ³a báº±ng Base64Url, sau Ä‘Ã³ sá»­ dá»¥ng cÃ¹ng thuáº­t toÃ¡n vÃ  khÃ³a bÃ­ máº­t (secret key) Ä‘Ã£ Ä‘Æ°á»£c dÃ¹ng khi táº¡o token ban Ä‘áº§u.",[25,1650,1651,1652],{},"So sÃ¡nh chá»¯ kÃ½ má»›i táº¡o vá»›i chá»¯ kÃ½ ban Ä‘áº§u trong token:\n",[22,1653,1654,1657],{},[25,1655,1656],{},"Náº¿u hai chá»¯ kÃ½ giá»‘ng nhau, token Ä‘Æ°á»£c xÃ¡c nháº­n lÃ  há»£p lá»‡ (khÃ´ng bá»‹ chá»‰nh sá»­a).",[25,1658,1659],{},"Náº¿u khÃ¡c nhau, token Ä‘Ã£ bá»‹ thay Ä‘á»•i hoáº·c khÃ´ng há»£p lá»‡.",[54,1661],{":files":1662},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function verifyJWT(token, secret) {\\n  const [encodedHeader, encodedPayload, signature] = token.split('.');\\n  const expectedSignature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return expectedSignature === signature;\\n}\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconsole.log('Token is valid:', isValid);\\n\"}]",[10,1664,1665],{},"NgoÃ i ra, Ä‘á»ƒ kiá»ƒm tra xem token cÃ³ háº¿t háº¡n hay chÆ°a, báº¡n cÃ³ thá»ƒ thÃªm trÆ°á»ng exp (expiration) vÃ o Payload. TrÆ°á»ng nÃ y lÆ°u thá»i gian háº¿t háº¡n dÆ°á»›i dáº¡ng timestamp (sá»‘ giÃ¢y ká»ƒ tá»« ngÃ y 1/1/1970). Khi xÃ¡c thá»±c, chá»‰ cáº§n so sÃ¡nh giÃ¡ trá»‹ exp vá»›i thá»i gian hiá»‡n táº¡i Ä‘á»ƒ biáº¿t token cÃ²n hiá»‡u lá»±c hay khÃ´ng.",[54,1667],{":files":1668},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123,\\n  exp: Math.floor(Date.now() / 1000) + (60 * 60) // Háº¿t háº¡n sau 1 giá»\\n};\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconst decodedPayload = JSON.parse(Buffer.from(token.split('.')[1], 'base64').toString());\\nconst isExpired = decodedPayload.exp \u003C Math.floor(Date.now() / 1000);\\nconsole.log('Token is valid:', isValid);\\nconsole.log('Token is expired:', isExpired);\\n\"}]",[38,1670,444],{"id":176},[10,1672,1673,1674,1676],{},"JWT lÃ  má»™t cÃ´ng cá»¥ máº¡nh máº½ Ä‘á»ƒ xÃ¡c thá»±c vÃ  phÃ¢n quyá»n trong cÃ¡c á»©ng dá»¥ng web. Báº±ng cÃ¡ch hiá»ƒu rÃµ cÃ¡ch hoáº¡t Ä‘á»™ng cá»§a JWT, báº¡n cÃ³ thá»ƒ tá»± táº¡o vÃ  xÃ¡c thá»±c JWT token mÃ  khÃ´ng cáº§n phá»¥ thuá»™c vÃ o thÆ° viá»‡n bÃªn ngoÃ i. Tuy nhiÃªn, trong thá»±c táº¿, báº¡n nÃªn sá»­ dá»¥ng thÆ° viá»‡n ",[147,1675,1536],{}," Ä‘á»ƒ tiáº¿t kiá»‡m thá»i gian vÃ  cÃ´ng sá»©c.",[10,1678,1679],{},"Hy vá»ng bÃ i viáº¿t nÃ y Ä‘Ã£ giÃºp báº¡n hiá»ƒu rÃµ hÆ¡n vá» JWT vÃ  cÃ¡ch sá»­ dá»¥ng nÃ³ trong á»©ng dá»¥ng cá»§a mÃ¬nh. Náº¿u báº¡n cÃ³ báº¥t ká»³ cÃ¢u há»i nÃ o, hÃ£y liÃªn há»‡ vá»›i mÃ¬nh qua cÃ¡c kÃªnh liÃªn láº¡c nhÆ° email, facebook, zalo hoáº·c telegram nhÃ©!",[38,1681,449],{"id":1682},"_6-tÃ i-liá»‡u-tham-kháº£o",[22,1684,1685,1692,1699],{},[25,1686,1687],{},[195,1688,1691],{"href":1689,"rel":1690},"https://jwt.io/",[634],"jwt.io",[25,1693,1694],{},[195,1695,1698],{"href":1696,"rel":1697},"https://datatracker.ietf.org/doc/html/rfc7519",[634],"RFC 7519 - JSON Web Token (JWT)",[25,1700,1701],{},[195,1702,1536],{"href":1703,"rel":1704},"https://www.npmjs.com/package/jsonwebtoken",[634],{"title":207,"searchDepth":208,"depth":208,"links":1706},[],"2025-05-05T00:00:00.000Z","/images/blog/jwt/banner.webp","jwt, jsonwebtoken, nodejs, báº£o máº­t, xÃ¡c thá»±c",{},{"title":419,"description":421},"blog/jwt",[1714],"npm","yD1lXH-8Az6ik7WFkgSdIc4k5xNC5W8to4G-L9vWpKw",{"id":1717,"title":454,"body":1718,"date":1898,"description":456,"extension":224,"image":1899,"keywords":1900,"meta":1901,"navigation":228,"path":453,"published":228,"seo":1902,"stem":1903,"tags":1904,"__hash__":1907},"blog/blog/use-effect-and-use-layout-effect.md",{"type":7,"value":1719,"toc":1892},[1720,1723,1731,1733,1736,1742,1757,1762,1779,1784,1795,1799,1813,1818],[38,1721,459],{"id":1722},"useeffect-vÃ -uselayouteffect-trong-react",[10,1724,1725,1726,1357,1728,1730],{},"React cung cáº¥p hai hook máº¡nh máº½ Ä‘á»ƒ xá»­ lÃ½ hiá»‡u á»©ng phá»¥: ",[147,1727,468],{},[147,1729,474],{},". Tuy chÃºng cÃ³ cÃº phÃ¡p giá»‘ng nhau, nhÆ°ng cÃ¡ch chÃºng hoáº¡t Ä‘á»™ng khÃ¡c biá»‡t vÃ  áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n tráº£i nghiá»‡m ngÆ°á»i dÃ¹ng cÅ©ng nhÆ° hiá»‡u suáº¥t cá»§a á»©ng dá»¥ng.",[35,1732],{},[46,1734,464],{"id":1735},"tÃ³m-táº¯t-quy-trÃ¬nh-thá»±c-thi",[1737,1738,1740],"h3",{"id":1739},"useeffect",[147,1741,468],{},[22,1743,1744,1750],{},[25,1745,1746,1747,923],{},"Cháº¡y ",[13,1748,1749],{},"sau khi React cáº­p nháº­t DOM xong vÃ  render UI xong",[25,1751,1752,1753,1756],{},"ThÃ­ch há»£p cho cÃ¡c ",[13,1754,1755],{},"tÃ¡c vá»¥ khÃ´ng áº£nh hÆ°á»Ÿng trá»±c tiáº¿p Ä‘áº¿n layout",", nhÆ° gá»i API, Ä‘Äƒng kÃ½ sá»± kiá»‡n, log, animation nháº¹â€¦",[10,1758,1759],{},[13,1760,1761],{},"Quy trÃ¬nh:",[582,1763,1764,1767,1770,1773,1776],{},[25,1765,1766],{},"Cáº­p nháº­t láº¡i state",[25,1768,1769],{},"Cáº­p nháº­t DOM (mutated)",[25,1771,1772],{},"React render láº¡i UI",[25,1774,1775],{},"Clean up náº¿u cÃ³",[25,1777,1778],{},"Gá»i useEffect callback",[1737,1780,1782],{"id":1781},"uselayouteffect",[147,1783,474],{},[22,1785,1786,1792],{},[25,1787,1788,1789,923],{},"Cháº¡y ngay sau khi DOM Ä‘Æ°á»£c cáº­p nháº­t, nhÆ°ng ",[13,1790,1791],{},"trÆ°á»›c khi browser váº½ láº¡i giao diá»‡n (paint)",[25,1793,1794],{},"DÃ¹ng khi báº¡n cáº§n Ä‘o lÆ°á»ng DOM, thay Ä‘á»•i layout hoáº·c ngÄƒn nháº¥p nhÃ¡y giao diá»‡n.",[10,1796,1797],{},[13,1798,1761],{},[582,1800,1801,1803,1805,1808,1811],{},[25,1802,1766],{},[25,1804,1769],{},[25,1806,1807],{},"Clean up náº¿u dependencies thay Ä‘á»•i",[25,1809,1810],{},"Gá»i useLayoutEffect callback",[25,1812,1772],{},[10,1814,1815],{},[13,1816,1817],{},"Khi nÃ o dÃ¹ng cÃ¡i nÃ o?",[1819,1820,1821,1834],"table",{},[1822,1823,1824],"thead",{},[1825,1826,1827,1831],"tr",{},[1828,1829,1830],"th",{},"TÃ¬nh huá»‘ng",[1828,1832,1833],{},"NÃªn dÃ¹ng",[1835,1836,1837,1847,1856,1865,1874,1883],"tbody",{},[1825,1838,1839,1843],{},[1840,1841,1842],"td",{},"Gá»i API, thao tÃ¡c khÃ´ng áº£nh hÆ°á»Ÿng layout",[1840,1844,1845],{},[147,1846,468],{},[1825,1848,1849,1852],{},[1840,1850,1851],{},"Äo kÃ­ch thÆ°á»›c DOM, scroll, position",[1840,1853,1854],{},[147,1855,474],{},[1825,1857,1858,1861],{},[1840,1859,1860],{},"Cáº­p nháº­t class, focus vÃ o input",[1840,1862,1863],{},[147,1864,474],{},[1825,1866,1867,1870],{},[1840,1868,1869],{},"Hiá»‡u á»©ng animation nháº¹ sau render",[1840,1871,1872],{},[147,1873,468],{},[1825,1875,1876,1879],{},[1840,1877,1878],{},"NgÄƒn nhÃ¡y layout (flicker) khi hiá»ƒn thá»‹ components",[1840,1880,1881],{},[147,1882,474],{},[1825,1884,1885,1888],{},[1840,1886,1887],{},"Cáº­p nháº­t DOM trÆ°á»›c khi browser váº½ láº¡i",[1840,1889,1890],{},[147,1891,474],{},{"title":207,"searchDepth":208,"depth":208,"links":1893},[1894],{"id":1735,"depth":208,"text":464,"children":1895},[1896,1897],{"id":1739,"depth":471,"text":468},{"id":1781,"depth":471,"text":474},"2025-05-06T00:00:00.000Z","/images/blog/use-effect-and-use-layout-effect/banner.webp","react, useEffect, useLayoutEffect, react hooks, hiá»‡u nÄƒng react",{},{"title":454,"description":456},"blog/use-effect-and-use-layout-effect",[1905,1906],"react","hooks","HXO6Sisd7tUFKWbj14nolEED4VvAwDgBBQlMW2pMGXc",{"id":1909,"title":479,"body":1910,"date":1707,"description":481,"extension":224,"image":1966,"keywords":1967,"meta":1968,"navigation":228,"path":478,"published":228,"seo":1969,"stem":1970,"tags":1971,"__hash__":1972},"blog/blog/useful-npm-package.md",{"type":7,"value":1911,"toc":1964},[1912,1915,1947,1950,1954,1957],[38,1913,484],{"id":1914},"frontend",[22,1916,1917,1929,1935,1941],{},[25,1918,1919,1922,1923,1928],{},[147,1920,1921],{},"react-query"," - ",[195,1924,1927],{"href":1925,"rel":1926},"https://react-query.tanstack.com/",[634],"React Query"," ThÆ° viá»‡n quáº£n lÃ½ tráº¡ng thÃ¡i cho React, giÃºp xá»­ lÃ½ cÃ¡c yÃªu cáº§u API vÃ  cache dá»¯ liá»‡u má»™t cÃ¡ch dá»… dÃ ng.",[25,1930,1931,1934],{},[147,1932,1933],{},"@progress/kendo-react-pdf"," - ThÆ° viá»‡n táº¡o PDF cho React, hay hÆ¡n cÃ¡c thÆ° viá»‡n khÃ¡c á»Ÿ chá»— hÃ¬nh áº£nh sáº½ Ä‘Æ°á»£c xuáº¥t ra dÆ°á»›i Ä‘á»‹nh dáº¡ng SVG, giÃºp cho viá»‡c xuáº¥t áº£nh cháº¥t lÆ°á»£ng cao vÃ  nÃ©t hÆ¡n, khÃ´ng bá»‹ vá»¡ áº£nh khi zoom in.",[25,1936,1937,1940],{},[147,1938,1939],{},"react-split-pane"," - ThÆ° viá»‡n táº¡o giao diá»‡n chia tÃ¡ch (split view) cho React, giÃºp dá»… dÃ ng táº¡o cÃ¡c layout vá»›i cÃ¡c pháº§n tá»­ cÃ³ thá»ƒ kÃ©o vÃ  tháº£.",[25,1942,1943,1946],{},[147,1944,1945],{},"react-window"," - ThÆ° viá»‡n giÃºp tá»‘i Æ°u hÃ³a hiá»‡u suáº¥t cho báº£ng vÃ  danh sÃ¡ch lá»›n trong React báº±ng cÃ¡ch chá»‰ render cÃ¡c pháº§n tá»­ Ä‘ang hiá»ƒn thá»‹ trÃªn UI nháº¹ vÃ  dá»… sá»­ dá»¥ng.",[38,1948,489],{"id":1949},"backend",[22,1951,1952],{},[25,1953,491],{},[38,1955,494],{"id":1956},"cÃ¡c-Ä‘oáº¡n-code-máº«u-há»¯u-dá»¥ng",[22,1958,1959],{},[25,1960,496,1961],{},[54,1962],{":files":1963},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"export const sendEvent = (eventName, detail) => {\\n  document.dispatchEvent(new CustomEvent(eventName, { detail }));\\n}\\nexport const listenEvent = (eventName, callback, context = document) => {\\n  context.addEventListener(eventName, callback);\\n  return () => context.removeEventListener(eventName, callback);\\n}\\n\"}]",{"title":207,"searchDepth":208,"depth":208,"links":1965},[],"/images/blog/useful-npm-package/banner.webp","npm, package, frontend, backend",{},{"title":479,"description":481},"blog/useful-npm-package",[1714],"3WcFSlvMJI3UivaSkcCnPhkOghwUynB93HX-3qAii7M",{"id":1974,"title":499,"body":1975,"date":1898,"description":501,"extension":224,"image":2017,"keywords":2018,"meta":2019,"navigation":228,"path":498,"published":228,"seo":2020,"stem":2021,"tags":2022,"__hash__":2024},"blog/blog/useful-script.md",{"type":7,"value":1976,"toc":2015},[1977,1980,1985,1992,1995,2003,2006,2009,2012],[38,1978,504],{"id":1979},"nÃ©n-áº£nh-vÃ -convert-áº£nh-sang-Ä‘á»‹nh-dáº¡ng-webp",[22,1981,1982],{},[25,1983,1984],{},"CÃ i Ä‘áº·t cwebp",[10,1986,1987,1988],{},"Äá»‘i vá»›i window thÃ¬ cÃ³ thá»ƒ xem hÆ°á»›ng dáº«n táº¡i: ",[195,1989,1990],{"href":1990,"rel":1991},"https://developers.google.com/speed/webp/download?hl=vi",[634],[54,1993],{":files":1994},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"# CÃ i Ä‘áº·t cwebp trÃªn Ubuntu\\nsudo apt-get install webp\\n# CÃ i Ä‘áº·t cwebp trÃªn MacOS\\nbrew install webp\\n\"}]",[22,1996,1997],{},[25,1998,1999,2000],{},"Script nÃ©n áº£nh",[54,2001],{":files":2002},"[{\"title\":\"compress-image.sh\",\"language\":\"bash\",\"content\":\"#!/bin/bash\\n# Kiá»ƒm tra Ä‘á»‘i sá»‘ Ä‘áº§u vÃ o\\nif [ -z \\\"$1\\\" ]; then\\n  echo \\\"âŒ Vui lÃ²ng cung cáº¥p Ä‘Æ°á»ng dáº«n file áº£nh.\\\"\\n  echo \\\"ğŸ‘‰ VÃ­ dá»¥: ./compress-local-image.sh ./image.png\\\"\\n  exit 1\\nfi\\n\\nINPUT=\\\"$1\\\"\\n\\n# Kiá»ƒm tra file tá»“n táº¡i\\nif [ ! -f \\\"$INPUT\\\" ]; then\\n  echo \\\"âŒ File khÃ´ng tá»“n táº¡i: $INPUT\\\"\\n  exit 1\\nfi\\n\\n# Láº¥y tÃªn file\\nBASENAME=$(basename \\\"$INPUT\\\")\\nFILENAME=\\\"${BASENAME%.*}\\\"\\nEXT=\\\"${BASENAME##*.}\\\"\\n\\n# NÃ©n vÃ  chuyá»ƒn sang WebP\\necho \\\"ğŸ”„ Äang nÃ©n vÃ  chuyá»ƒn sang WebP...\\\"\\ncwebp -q 80 \\\"$INPUT\\\" -o \\\"${FILENAME}.webp\\\"\\n\\necho \\\"âœ… ÄÃ£ táº¡o file: ${FILENAME}.webp\\\"\\n\"}]",[10,2004,2005],{},"Sau khi táº¡o xong file, cáº§n pháº£i gÃ¡n quyá»n thá»±c thi cho file script báº±ng lá»‡nh sau:",[54,2007],{":files":2008},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"chmod +x compress-image.sh\\n\"}]",[10,2010,2011],{},"Sau Ä‘Ã³ cÃ³ thá»ƒ cháº¡y script Ä‘á»ƒ cÃ³ thá»ƒ thá»±c hiá»‡n nÃ©n áº£nh vÃ  chuyá»ƒn Ä‘á»•i sang Ä‘á»‹nh dáº¡ng webp.",[54,2013],{":files":2014},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"./compress-image.sh ./image.png\\n\"}]",{"title":207,"searchDepth":208,"depth":208,"links":2016},[],"/images/blog/useful-script/banner.webp","scripts, useful scripts",{},{"title":499,"description":501},"blog/useful-script",[2023],"scripts","p2CPfckDeoI2knSQ-ynr8rSQk_PPFQZKh6qH2TkcMP0",1761213141470]