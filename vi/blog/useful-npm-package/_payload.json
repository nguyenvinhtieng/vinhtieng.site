[{"data":1,"prerenderedAt":2147},["ShallowReactive",2],{"blog-useful-npm-package":3,"search":90,"related-posts-useful-npm-package":380,"all-post":704},{"id":4,"title":5,"body":6,"date":77,"description":78,"extension":79,"image":80,"keywords":81,"meta":82,"navigation":83,"path":84,"published":83,"seo":85,"stem":86,"tags":87,"__hash__":89},"blog/blog/useful-npm-package.md","Tổng hợp các npm package hữu ích cho Frontend và Backend",{"type":7,"value":8,"toc":73},"minimal",[9,14,51,55,60,64],[10,11,13],"h1",{"id":12},"frontend","Frontend",[15,16,17,33,39,45],"ul",{},[18,19,20,24,25,32],"li",{},[21,22,23],"code",{},"react-query"," - ",[26,27,31],"a",{"href":28,"rel":29},"https://react-query.tanstack.com/",[30],"nofollow","React Query"," Thư viện quản lý trạng thái cho React, giúp xử lý các yêu cầu API và cache dữ liệu một cách dễ dàng.",[18,34,35,38],{},[21,36,37],{},"@progress/kendo-react-pdf"," - Thư viện tạo PDF cho React, hay hơn các thư viện khác ở chỗ hình ảnh sẽ được xuất ra dưới định dạng SVG, giúp cho việc xuất ảnh chất lượng cao và nét hơn, không bị vỡ ảnh khi zoom in.",[18,40,41,44],{},[21,42,43],{},"react-split-pane"," - Thư viện tạo giao diện chia tách (split view) cho React, giúp dễ dàng tạo các layout với các phần tử có thể kéo và thả.",[18,46,47,50],{},[21,48,49],{},"react-window"," - Thư viện giúp tối ưu hóa hiệu suất cho bảng và danh sách lớn trong React bằng cách chỉ render các phần tử đang hiển thị trên UI nhẹ và dễ sử dụng.",[10,52,54],{"id":53},"backend","Backend",[15,56,57],{},[18,58,59],{},"Updating...",[10,61,63],{"id":62},"các-đoạn-code-mẫu-hữu-dụng","Các đoạn code mẫu hữu dụng",[15,65,66],{},[18,67,68,69],{},"Code template cho custom send and listen event document",[70,71],"code-block",{":files":72},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"export const sendEvent = (eventName, detail) => {\\n  document.dispatchEvent(new CustomEvent(eventName, { detail }));\\n}\\nexport const listenEvent = (eventName, callback, context = document) => {\\n  context.addEventListener(eventName, callback);\\n  return () => context.removeEventListener(eventName, callback);\\n}\\n\"}]",{"title":74,"searchDepth":75,"depth":75,"links":76},"",2,[],"2025-05-05T00:00:00.000Z","Danh sách các npm package hữu ích cho lập trình Frontend và Backend, được tổng hợp từ kinh nghiệm thực tế và các chia sẻ trong cộng đồng.","md","/images/blog/useful-npm-package/banner.webp","npm, package, frontend, backend",{},true,"/blog/useful-npm-package",{"title":5,"description":78},"blog/useful-npm-package",[88],"npm","3WcFSlvMJI3UivaSkcCnPhkOghwUynB93HX-3qAii7M",[91,97,102,107,112,117,122,127,132,137,142,147,152,157,162,167,172,177,182,186,191,196,201,206,211,216,221,226,231,236,241,246,251,256,261,266,271,275,279,284,289,293,298,303,308,313,318,323,328,333,338,343,347,353,358,360,364,367,370,375],{"id":92,"title":93,"titles":94,"content":95,"level":96},"/blog/ansible","Tổng quan và cấu hình Ansible",[],"Hướng dẫn chi tiết về cài đặt, cấu hình SSH, inventory và sử dụng Playbook trong Ansible. Hướng dẫn chi tiết về cài đặt và triển khai Ansible Ansible là một công cụ tự động hóa mạnh mẽ, giúp quản lý cấu hình, triển khai ứng dụng và điều phối hệ thống một cách dễ dàng. Trong bài viết này, chúng ta sẽ tìm hiểu cách cài đặt, cấu hình và sử dụng Ansible thông qua các ví dụ thực tế.",1,{"id":98,"title":99,"titles":100,"content":101,"level":96},"/blog/ansible#️-cài-đặt-ansible","🛠️ Cài đặt Ansible",[],"Hướng dẫn cài đặt Ansible trên Ubuntu: Sau khi cài đặt, bạn có thể kiểm tra phiên bản Ansible:",{"id":103,"title":104,"titles":105,"content":106,"level":96},"/blog/ansible#cấu-hình-ssh","🔑 Cấu hình SSH",[],"Để Ansible có thể kết nối đến các máy chủ từ xa, bạn cần cấu hình SSH. Dưới đây là cách sao chép SSH key đến máy chủ khác: Lưu ý: Thay vinhtieng@123.3123.12 bằng tên người dùng và địa chỉ IP của máy chủ từ xa.",{"id":108,"title":109,"titles":110,"content":111,"level":96},"/blog/ansible#hosts-inventory","📋 Hosts - Inventory",[],"File inventory là nơi bạn định nghĩa danh sách các máy chủ mà Ansible sẽ quản lý. Đây là một ví dụ cơ bản:",{"id":113,"title":114,"titles":115,"content":116,"level":96},"/blog/ansible#kiểm-tra-kết-nối-ping","🏓 Kiểm tra kết nối (Ping)",[],"Bạn có thể kiểm tra kết nối đến các máy chủ bằng lệnh ping: Ping với file hosts mặc định: Ping với file inventory tùy chỉnh:",{"id":118,"title":119,"titles":120,"content":121,"level":96},"/blog/ansible#playbook-task-module","📜 Playbook - Task - Module",[],"Playbook là nơi bạn định nghĩa các tác vụ (tasks) cần thực hiện trên các máy chủ. Dưới đây là cách chạy một playbook: Ví dụ về Playbook đơn giản:",{"id":123,"title":124,"titles":125,"content":126,"level":96},"/blog/ansible#tài-liệu-tham-khảo","📚 Tài liệu tham khảo",[],"Ansible DocumentationAnsible GalaxyAnsible Playbook Guide Tóm lại: Ansible là công cụ mạnh mẽ giúp tự động hóa các tác vụ quản trị hệ thống. Việc nắm vững cách sử dụng Ansible sẽ giúp bạn tiết kiệm thời gian và giảm thiểu lỗi trong quá trình quản lý hệ thống.",{"id":128,"title":129,"titles":130,"content":131,"level":96},"/blog/basic-nginx","Tổng quan và cấu hình thông dụng Nginx",[],"Hướng dẫn chi tiết về cấu hình mặc định, PHP-FPM và thiết lập Load Balancer với Nginx. Hướng dẫn chi tiết về cấu hình và triển khai Nginx Nginx là một web server mã nguồn mở mạnh mẽ, được sử dụng phổ biến để phục vụ nội dung tĩnh, reverse proxy, cân bằng tải, bảo mật và hỗ trợ PHP thông qua FastCGI. Trong bài viết này, chúng ta sẽ đi qua các cấu hình từ cơ bản đến nâng cao, bao gồm: Cách cài đặt NginxCấu hình máy chủ mặc định (default host)Tích hợp với PHP-FPMThiết lập Load Balancer (cân bằng tải)Gzip, HTTP/2, Rate limitingRedirect, RewritesHardening & SecurityLogging nâng cao",{"id":133,"title":134,"titles":135,"content":136,"level":96},"/blog/basic-nginx#️-cài-đặt-nginx","🛠️ Cài đặt Nginx",[],"Hướng dẫn cài đặt Nginx trên Ubuntu: Sau khi cài đặt, bạn có thể kiểm tra trạng thái Nginx: Kiểm tra tường lửa: Sau khi cài đặt Nginx, bạn nên đảm bảo rằng tường lửa (firewall) cho phép lưu lượng HTTP và HTTPS để máy chủ có thể phục vụ nội dung web. Lệnh sudo ufw allow 'Nginx Full' sẽ mở cả hai cổng 80 (HTTP) và 443 (HTTPS).\nSau đó, dùng sudo ufw status để xác nhận rằng các cổng này đã được mở. Nếu bạn chưa bật ufw (Uncomplicated Firewall), bạn có thể bật bằng lệnh sudo ufw enable. Tuy nhiên, hãy đảm bảo cấu hình chính xác để không bị khóa SSH. Kiểm tra hoạt động của Nginx: Mở trình duyệt và truy cập địa chỉ:\n👉 http://\u003Cđịa_chỉ_IP_của_bạn> hoặc http://localhost nếu kiểm tra cục bộ. Bạn sẽ thấy trang mặc định “Welcome to nginx!” nếu mọi thứ hoạt động đúng cách.",{"id":138,"title":139,"titles":140,"content":141,"level":96},"/blog/basic-nginx#️-cấu-hình-default-host-trong-nginx","⚙️ Cấu hình Default Host trong Nginx",[],"Trên Ubuntu, file cấu hình của Nginx thường được lưu tại các vị trí sau: /etc/nginx/sites-available/default (Nếu sử dụng thư mục sites-available và sites-enabled)./etc/nginx/conf.d/default.conf (Thông dụng cho các cấu hình đơn giản). Mặc định, khi cài đặt Nginx, sẽ có một file cấu hình default trong thư mục /etc/nginx/sites-available/ với một số cấu hình cơ bản. Bạn có thể sửa file này để cấu hình server block cho website của mình. Cấu hình Default Host Mở file cấu hình Nginx mặc định: Mặc định, Nginx sẽ chọn block đầu tiên khi không tìm thấy server_name tương ứng. Để cấu hình rõ ràng host mặc định, bạn thêm default_server vào dòng listen: Ghi chú: listen 80 default_server;: Cấu hình Nginx lắng nghe cổng 80 (HTTP) và đánh dấu đây là default_server (server mặc định cho các yêu cầu không khớp với server block khác).root /var/www/html;: Đường dẫn tới thư mục chứa các tệp tin của website. Bạn có thể thay đổi đường dẫn này thành thư mục của website bạn muốn phục vụ.server_name _;: Chỉ thị này cho phép server chấp nhận tất cả các yêu cầu không khớp với server block khác. Nếu bạn có tên miền cụ thể, hãy thay thế dấu gạch dưới (_) bằng tên miền của bạn.location /: Đây là phần cấu hình định tuyến cho các yêu cầu đến. Cấu hình này giúp Nginx tìm kiếm các tệp tin khi người dùng truy cập vào website.try_files $uri $uri/ =404;: Nếu yêu cầu không trùng khớp với tệp tin hoặc thư mục, sẽ trả về lỗi 404. Sau khi chỉnh sửa xong, bạn cần kiểm tra xem cấu hình có chính xác không: Nếu không có lỗi nào, bạn có thể khởi động lại Nginx để áp dụng cấu hình mới: Giới thiệu về sites-available và sites-enabled Trong Nginx, thư mục sites-available và sites-enabled là một cơ chế để quản lý các website (virtual hosts) mà Nginx có thể phục vụ. Cấu trúc này giúp dễ dàng bật/tắt các website mà không cần phải xóa hoặc thay đổi cấu hình trực tiếp. sites-available: Đây là nơi bạn tạo và lưu trữ tất cả các file cấu hình của các website hoặc ứng dụng mà bạn muốn Nginx phục vụ.Mỗi file cấu hình trong sites-available đại diện cho một website hoặc ứng dụng riêng biệt.Ví dụ: /etc/nginx/sites-available/example.com là cấu hình cho website example.com. sites-enabled: Đây là nơi chứa các liên kết tượng trưng (symlink) đến các file cấu hình trong sites-available mà bạn muốn Nginx thực thi.Các liên kết này cho phép Nginx biết được website nào sẽ được kích hoạt.Bạn không nên trực tiếp chỉnh sửa các file trong sites-enabled. Thay vào đó, bạn tạo symlink từ sites-available. Cách thức hoạt động: Khi bạn tạo một file cấu hình trong sites-available, bạn có thể kích hoạt nó bằng cách tạo một symlink đến file đó trong thư mục sites-enabled.Để tạo symlink, sử dụng lệnh ln -s. Ví dụ, nếu bạn có cấu hình example.com trong sites-available, bạn có thể tạo symlink vào sites-enabled như sau:",{"id":143,"title":144,"titles":145,"content":146,"level":96},"/blog/basic-nginx#cấu-hình-nginx-với-php-fpm","🐘 Cấu hình Nginx với PHP-FPM",[],"Để xử lý các file PHP, bạn cần kết nối Nginx với PHP-FPM qua socket hoặc TCP: Lưu ý: Đường dẫn socket có thể thay đổi tùy phiên bản PHP.Nếu dùng TCP:",{"id":148,"title":149,"titles":150,"content":151,"level":96},"/blog/basic-nginx#load-balancer-trong-nginx","🌐 Load Balancer trong Nginx",[],"Nginx hỗ trợ cấu hình cân bằng tải với nhiều thuật toán lựa chọn backend: round-robin: Mặc định, phân phối đều cho các request.least_conn: Chọn server ít kết nối nhất.ip_hash: Duy trì session cho client.least_time: chọn server có thời gian phản hồi ít nhất Có thể thêm trọng số cho server bằng cách thêm số sau ip:port Ex: server 192.168.1.0:8000 weight=3; Cấu hình server block proxy đến upstream:",{"id":153,"title":154,"titles":155,"content":156,"level":96},"/blog/basic-nginx#gzip-compression","📦 Gzip Compression",[],"Bật gzip giúp tăng tốc độ tải trang bằng cách nén nội dung trả về:",{"id":158,"title":159,"titles":160,"content":161,"level":96},"/blog/basic-nginx#kích-hoạt-http2","⚡ Kích hoạt HTTP/2",[],"HTTP/2 cải thiện hiệu suất thông qua multiplexing và header compression:",{"id":163,"title":164,"titles":165,"content":166,"level":96},"/blog/basic-nginx#rate-limiting","🚦 Rate Limiting",[],"Giới hạn số lượng request để tránh DDoS và abuse:",{"id":168,"title":169,"titles":170,"content":171,"level":96},"/blog/basic-nginx#redirect-và-rewrites","🔁 Redirect và Rewrites",[],"Chuyển hướng toàn bộ traffic HTTP sang HTTPS: Viết lại URL cho SPA:",{"id":173,"title":174,"titles":175,"content":176,"level":96},"/blog/basic-nginx#hardening-security","🔐 Hardening & Security",[],"Bảo vệ server bằng cách từ chối truy cập file nhạy cảm: Ẩn thông tin server: Chống clickjacking và XSS:",{"id":178,"title":179,"titles":180,"content":181,"level":96},"/blog/basic-nginx#logging-nâng-cao","📊 Logging nâng cao",[],"Cấu hình custom log format để dễ debug:",{"id":183,"title":124,"titles":184,"content":185,"level":96},"/blog/basic-nginx#tài-liệu-tham-khảo",[],"Nginx DocumentationNginx Load Balancing GuideNginx + PHP-FPM SetupOWASP Nginx Hardening Guide Tóm lại: Nginx là công cụ cực kỳ mạnh mẽ và linh hoạt, không chỉ giới hạn ở web server mà còn là reverse proxy, caching layer, và load balancer. Việc nắm vững và khai thác tốt các tính năng sẽ giúp hệ thống của bạn hiệu suất cao, bảo mật và dễ mở rộng.",{"id":187,"title":188,"titles":189,"content":190,"level":96},"/blog/basic-redis","Cơ Bản Về Redis và Tích Hợp Với Node.js",[],"Tìm hiểu các khái niệm cơ bản về Redis bao gồm các kiểu dữ liệu và phương thức, cũng như cách tích hợp Redis vào ứng dụng Node.js để sử dụng bộ nhớ đệm và các tính năng thời gian thực. Cơ Bản Về Redis và Tích Hợp Với Node.js Redis là một kho dữ liệu key-value trong bộ nhớ, mã nguồn mở, nổi tiếng với hiệu suất và tính linh hoạt. Redis hỗ trợ nhiều kiểu dữ liệu, phù hợp cho việc sử dụng bộ nhớ đệm, ứng dụng thời gian thực, hệ thống pub/sub, và nhiều hơn nữa. Trong hướng dẫn này, chúng ta sẽ tìm hiểu: Các kiểu dữ liệu trong RedisCác lệnh phổ biến của RedisCách tích hợp Redis vào dự án Node.js",{"id":192,"title":193,"titles":194,"content":195,"level":96},"/blog/basic-redis#các-kiểu-dữ-liệu-lệnh-redis","📦 Các Kiểu Dữ Liệu & Lệnh Redis",[],"Redis hỗ trợ nhiều cấu trúc dữ liệu khác nhau:",{"id":197,"title":198,"titles":199,"content":200,"level":75},"/blog/basic-redis#_1-chuỗi-strings","1. Chuỗi (Strings)",[193],"Chuỗi là kiểu dữ liệu cơ bản nhất trong Redis. Bạn có thể lưu trữ bất kỳ giá trị nào dưới dạng chuỗi, bao gồm cả số nguyên và JSON được tuần tự hóa.",{"id":202,"title":203,"titles":204,"content":205,"level":75},"/blog/basic-redis#_2-danh-sách-lists","2. Danh sách (Lists)",[193],"Danh sách là các tập hợp có thứ tự của chuỗi. Bạn có thể thêm phần tử vào đầu hoặc cuối danh sách.",{"id":207,"title":208,"titles":209,"content":210,"level":75},"/blog/basic-redis#_3-tập-hợp-sets","3. Tập hợp (Sets)",[193],"Tập hợp là các tập hợp không có thứ tự của các chuỗi duy nhất. Chúng hỗ trợ các phép toán như hợp, giao, và hiệu.",{"id":212,"title":213,"titles":214,"content":215,"level":75},"/blog/basic-redis#_4-băm-hashes","4. Băm (Hashes)",[193],"Băm là các bản đồ giữa trường chuỗi và giá trị chuỗi, rất lý tưởng để biểu diễn các đối tượng.",{"id":217,"title":218,"titles":219,"content":220,"level":75},"/blog/basic-redis#_5-tập-hợp-có-thứ-tự-sorted-sets","5. Tập hợp có thứ tự (Sorted Sets)",[193],"Tập hợp có thứ tự tương tự như tập hợp nhưng có một điểm số liên kết với mỗi phần tử, cho phép truy xuất theo thứ tự.",{"id":222,"title":223,"titles":224,"content":225,"level":75},"/blog/basic-redis#_6-bitmaps-hyperloglogs-streams","6. Bitmaps, HyperLogLogs, Streams",[193],"Đây là các cấu trúc nâng cao hơn:\nBitmaps được sử dụng cho các thao tác cấp bit, cho phép bạn thao tác các bit riêng lẻ trong một chuỗi. HyperLogLogs được sử dụng để ước tính số lượng phần tử duy nhất trong một tập hợp, rất hữu ích cho các trường hợp như theo dõi số lượng khách truy cập duy nhất. Streams được thiết kế cho các đường dẫn dữ liệu thời gian thực và nguồn sự kiện, cho phép bạn thêm và truy vấn dữ liệu theo chuỗi thời gian.",{"id":227,"title":228,"titles":229,"content":230,"level":96},"/blog/basic-redis#tích-hợp-redis-với-nodejs","🔧 Tích Hợp Redis Với Node.js",[],"Bạn có thể sử dụng thư viện ioredis hoặc redis client phổ biến. Dưới đây là một ví dụ với ioredis.",{"id":232,"title":233,"titles":234,"content":235,"level":75},"/blog/basic-redis#_1-cài-đặt-redis-và-ioredis","1. Cài Đặt Redis và ioredis",[228],"Đảm bảo rằng bạn đã cài đặt và chạy Redis. Bạn có thể sử dụng Docker để chạy Redis một cách dễ dàng:",{"id":237,"title":238,"titles":239,"content":240,"level":75},"/blog/basic-redis#_2-thiết-lập-cơ-bản","2. Thiết Lập Cơ Bản",[228],"Tạo một tệp có tên redis.js và thêm đoạn mã sau:",{"id":242,"title":243,"titles":244,"content":245,"level":75},"/blog/basic-redis#_3-sử-dụng-redis-trong-ứng-dụng","3. Sử Dụng Redis Trong Ứng Dụng",[228],"Bây giờ bạn có thể sử dụng Redis trong ứng dụng của mình. Dưới đây là một ví dụ về việc thiết lập và lấy giá trị:",{"id":247,"title":248,"titles":249,"content":250,"level":75},"/blog/basic-redis#_4-ví-dụ-về-bộ-nhớ-đệm","4. Ví Dụ Về Bộ Nhớ Đệm",[228],"Bạn có thể sử dụng Redis làm bộ nhớ đệm để lưu trữ dữ liệu được truy cập thường xuyên. Dưới đây là một ví dụ về việc lưu trữ kết quả truy vấn cơ sở dữ liệu vào bộ nhớ đệm:",{"id":252,"title":253,"titles":254,"content":255,"level":75},"/blog/basic-redis#_5-kết-luận","5. Kết Luận",[228],"Redis là một công cụ mạnh mẽ cho bộ nhớ đệm và các ứng dụng thời gian thực. Bằng cách tích hợp Redis vào các dự án Node.js, bạn có thể cải thiện đáng kể hiệu suất và khả năng mở rộng. Hướng dẫn này đã bao quát các khái niệm cơ bản về kiểu dữ liệu, lệnh, và cách sử dụng Redis trong ứng dụng Node.js.\nHãy khám phá thêm các tính năng nâng cao như giao dịch, scripting Lua, và clustering khi bạn đã quen thuộc hơn với Redis.\nRedis là một công cụ đa năng có thể nâng cao đáng kể ứng dụng của bạn. Happy Coding",{"id":257,"title":258,"titles":259,"content":260,"level":75},"/blog/basic-redis#_6-tài-nguyên-tham-khảo","6. Tài Nguyên Tham Khảo",[228],"Tài liệu RedisTài liệu ioredis",{"id":262,"title":263,"titles":264,"content":265,"level":96},"/blog/common-docker-file","Các Dockerfile Phổ Biến Cho Nhiều Dự Án Khác Nhau",[],"Tìm hiểu về Docker và khám phá các Dockerfile phổ biến cho nhiều dự án như Node.js, PHP với Laravel, React, Vue, Nuxt và Next.js. Khám phá các kỹ thuật tối ưu và thực hành tốt nhất. Các Dockerfile Phổ Biến Cho Nhiều Dự Án Khác Nhau Docker là một công cụ ảo hóa nhẹ giúp phát triển, triển khai và chạy ứng dụng trong các container. Nó cho phép bạn đóng gói ứng dụng và tất cả các phụ thuộc của nó vào một container duy nhất, giúp dễ dàng triển khai trên bất kỳ môi trường nào mà không cần lo lắng về sự khác biệt giữa các môi trường. Đây là một số Dockerfile cho các dự án thường gặp, bạn có thể tham khảo và điều chỉnh theo nhu cầu của mình. Nội dung bài viết được tổng hợp và tích góp từ nhiều nguồn khác nhau, bao gồm cả các dự án thực tế mà mình đã làm.",{"id":267,"title":268,"titles":269,"content":270,"level":75},"/blog/common-docker-file#dockerfile-cho-nodejs","Dockerfile cho Node.js",[263],"Dockerfile cho Node.js rất quan trọng khi triển khai ứng dụng JavaScript phía server. Đây là một Dockerfile đã được tối ưu cho một dự án Node.js điển hình: Cách 2, sử dụng pm2. Về cơ bản thì cách này nhẹ hơn kha khá so với npm",{"id":272,"title":273,"titles":274,"content":74,"level":75},"/blog/common-docker-file#dockerfile-nodejs-nestjs","Dockerfile NodeJS (NestJS)",[263],{"id":276,"title":277,"titles":278,"content":74,"level":75},"/blog/common-docker-file#dockerfile-nodejs-expressjs","Dockerfile NodeJS (Express.js)",[263],{"id":280,"title":281,"titles":282,"content":283,"level":75},"/blog/common-docker-file#dockerfile-reactjs","Dockerfile ReactJs",[263],"Có thể sử dụng Dockerfile này cho các dự án như Vue, Angular,... Lưu ý: ở đây thư mục chứa nginx/nginx.conf đặt cùng cấp với Dockerfile",{"id":285,"title":286,"titles":287,"content":288,"level":75},"/blog/common-docker-file#dockerfile-cho-php-với-laravel","Dockerfile cho PHP với Laravel",[263],"Lưu ý: thư mục conf/nginx.conf và conf/supervisord.conf cùng cấp với Dockerfile",{"id":290,"title":291,"titles":292,"content":74,"level":75},"/blog/common-docker-file#dockerfile-cho-nextjs","Dockerfile cho NextJs",[263],{"id":294,"title":295,"titles":296,"content":297,"level":75},"/blog/common-docker-file#đang-cập-nhật","Đang cập nhật...",[263],"Nếu bạn có các cấu hình hoặc Dockerfile khác muốn chia sẻ, vui lòng gửi email về vinhtieng123@gmail.com. Mình rất trân trọng điều đó.",{"id":299,"title":300,"titles":301,"content":302,"level":96},"/blog/jwt","JWT là gì? Cách hoạt động và ứng dụng thực tế",[],"JWT (JSON Web Token) là gì? Cách JWT hoạt động, cấu trúc gồm Header, Payload, Signature và cách ứng dụng trong xác thực bảo mật.",{"id":304,"title":305,"titles":306,"content":307,"level":96},"/blog/jwt#_1-giới-thiệu-về-jwt","1. Giới thiệu về JWT",[],"JSON Web Token (JWT) là một tiêu chuẩn mở ( RFC 7519 ) định nghĩa một cách thức nhỏ gọn và độc lập để truyền thông tin an toàn giữa các bên dưới dạng đối tượng JSON. Thông tin này có thể được xác minh và tin cậy vì nó được ký kỹ thuật số. JWT có thể được ký bằng một bí mật (với thuật toán HMAC ) hoặc một cặp khóa công khai/riêng tư bằng RSA hoặc ECDSA . Trích từ: https://jwt.io/introduction",{"id":309,"title":310,"titles":311,"content":312,"level":96},"/blog/jwt#_2-các-thành-phần-của-jwt","2. Các thành phần của JWT",[],"JWT bao gồm ba thành phần chính: Header, Payload và Signature. Mỗi phần đều được mã hóa bằng Base64Url và được phân tách bằng dấu chấm (.).\nMột JWT token thường sẽ trông như sau: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c như vậy với JWT token ở trên thì các thành phần sau khi được mã hóa sẽ là: Header: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9Payload: eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQSignature: SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c Chi tiết về các thành phần Header: Thường sẽ chứa thông tin về thuật toán mã hóa và loại token. Ví dụ: Payload: Đây là phần sẽ chứa các thông tin mà chúng ta muốn mã hóa và truyền tải. Thường thì chúng ta sẽ lưu thông tin người dùng, user_id,... Lưu ý rằng JWT token không có hết hạn, tuy nhiên chúng ta có thể giới hạn thời gian sống của token bằng cách thêm các trường như exp, nbf, iat vào payload. Và khi chúng ta xác thực token chúng ta sẽ cần thêm một bước kiểm tra thời gian sống của token. Như vậy chúng ta có thể sử dụng JWT token như một session token. Ví dụ về payload: Signature: Được tạo bằng cách mã hóa Header và Payload với một khóa bí mật và thuật toán đã chỉ định trong Header. Điều này giúp đảm bảo rằng token không bị thay đổi trong quá trình truyền tải. Ví dụ:",{"id":314,"title":315,"titles":316,"content":317,"level":96},"/blog/jwt#_3-viết-lại-hàm-để-generate-jwt-token-và-verify-jwt-token-trong-nodejs","3. Viết lại hàm để generate JWT token và verify JWT token trong NodeJs",[],"Khi làm việc với jwt và nodeJs, hầu hết mọi người sẽ sử dụng thư viện jsonwebtoken để tạo và xác thực JWT token. Tuy nhiên, để hiểu rõ hơn về cách hoạt động của JWT, chúng ta có thể tự viết hàm để tạo và xác thực JWT token. Giả sử chúng ta muốn tạo JWT token từ thông tin user_id=123, khi đó phần payload sẽ là: Ở phần header, chúng ta sẽ sử dụng thuật toán HS256 để mã hóa JWT token. Nên payload sẽ có dạng như sau: Để tạo JWT token, chúng ta cần mã hóa Header và Payload bằng Base64Url. Sau đó, chúng ta sẽ tạo chữ ký bằng cách sử dụng thuật toán HMACSHA256 với khóa bí mật (secret key) và kết hợp Header và Payload. Đầu tiên chúng ta cần viết 1 hàm để mã hóa Base64Url: Ở đây, vì chúng ta sử dụng NodeJs nên có thể sử dụng Buffer để mã hóa Base64Url. Nếu bạn đang làm việc với JavaScript trên trình duyệt, bạn có thể sử dụng btoa() để mã hóa Base64Url. Khi muốn giải mã, bạn có thể sử dụng atob(). Hàm này là hàm có sẵn trong trình duyệt. Tiếp theo, chúng ta sẽ triển khai hàm tạo JWT token. Trong Node.js, chúng ta có thể dễ dàng thực hiện điều này bằng cách dùng thư viện tích hợp sẵn là crypto, cụ thể là hàm createHmac. Hàm này sẽ giúp chúng ta tạo ra chữ ký (signature) từ chuỗi đã mã hóa gồm Header và Payload, kết hợp với secret key để đảm bảo tính toàn vẹn và xác thực của token. Full code mã hóa JWT token sẽ như sau: Như vậy chúng ta đã có hàm createJWT để tạo JWT token. Hàm này sẽ nhận vào 2 tham số là payload và secret. payload là thông tin mà chúng ta muốn mã hóa và truyền tải, còn secret là khóa bí mật mà chúng ta sẽ sử dụng để tạo chữ ký cho token. Đối với JWT token, chúng ta có thể sử dụng bất kỳ chuỗi nào làm khóa bí mật. Tuy nhiên, để đảm bảo tính bảo mật, chúng ta nên sử dụng một chuỗi ngẫu nhiên và đủ dài. Vì khi sử dụng thuật toán HMACSHA256, nếu kẻ tấn công biết được khóa bí mật, họ có thể tạo ra token giả mạo và truy cập vào hệ thống của bạn. Có thể sử dụng trang web randomkeygen.com để tạo ra một chuỗi ngẫu nhiên và đủ dài làm khóa bí mật.",{"id":319,"title":320,"titles":321,"content":322,"level":96},"/blog/jwt#_4-xác-thực-jwt-token","4. Xác thực JWT token",[],"Token JWT gồm ba phần: Header, Payload và Signature, được nối với nhau bằng dấu chấm (.). Quá trình xác thực diễn ra như sau: Tách token thành ba phần: Header, Payload và Signature.Tạo lại chữ ký bằng cách kết hợp Header và Payload đã mã hóa bằng Base64Url, sau đó sử dụng cùng thuật toán và khóa bí mật (secret key) đã được dùng khi tạo token ban đầu.So sánh chữ ký mới tạo với chữ ký ban đầu trong token:\nNếu hai chữ ký giống nhau, token được xác nhận là hợp lệ (không bị chỉnh sửa).Nếu khác nhau, token đã bị thay đổi hoặc không hợp lệ. Ngoài ra, để kiểm tra xem token có hết hạn hay chưa, bạn có thể thêm trường exp (expiration) vào Payload. Trường này lưu thời gian hết hạn dưới dạng timestamp (số giây kể từ ngày 1/1/1970). Khi xác thực, chỉ cần so sánh giá trị exp với thời gian hiện tại để biết token còn hiệu lực hay không.",{"id":324,"title":325,"titles":326,"content":327,"level":96},"/blog/jwt#_5-kết-luận","5. Kết luận",[],"JWT là một công cụ mạnh mẽ để xác thực và phân quyền trong các ứng dụng web. Bằng cách hiểu rõ cách hoạt động của JWT, bạn có thể tự tạo và xác thực JWT token mà không cần phụ thuộc vào thư viện bên ngoài. Tuy nhiên, trong thực tế, bạn nên sử dụng thư viện jsonwebtoken để tiết kiệm thời gian và công sức. Hy vọng bài viết này đã giúp bạn hiểu rõ hơn về JWT và cách sử dụng nó trong ứng dụng của mình. Nếu bạn có bất kỳ câu hỏi nào, hãy liên hệ với mình qua các kênh liên lạc như email, facebook, zalo hoặc telegram nhé!",{"id":329,"title":330,"titles":331,"content":332,"level":96},"/blog/jwt#_6-tài-liệu-tham-khảo","6. Tài liệu tham khảo",[],"jwt.ioRFC 7519 - JSON Web Token (JWT)jsonwebtoken",{"id":334,"title":335,"titles":336,"content":337,"level":96},"/blog/use-effect-and-use-layout-effect","Phân biệt useEffect và useLayoutEffect trong React",[],"Tìm hiểu điểm khác nhau giữa useEffect và useLayoutEffect trong React, giúp bạn sử dụng đúng hook trong từng tình huống cụ thể để tối ưu hiệu năng và trải nghiệm người dùng.",{"id":339,"title":340,"titles":341,"content":342,"level":96},"/blog/use-effect-and-use-layout-effect#useeffect-và-uselayouteffect-trong-react","useEffect và useLayoutEffect trong React",[],"React cung cấp hai hook mạnh mẽ để xử lý hiệu ứng phụ: useEffect và useLayoutEffect. Tuy chúng có cú pháp giống nhau, nhưng cách chúng hoạt động khác biệt và ảnh hưởng trực tiếp đến trải nghiệm người dùng cũng như hiệu suất của ứng dụng.",{"id":344,"title":345,"titles":346,"content":74,"level":75},"/blog/use-effect-and-use-layout-effect#tóm-tắt-quy-trình-thực-thi","Tóm tắt quy trình thực thi",[340],{"id":348,"title":349,"titles":350,"content":351,"level":352},"/blog/use-effect-and-use-layout-effect#useeffect","useEffect",[340,345],"Chạy sau khi React cập nhật DOM xong và render UI xong.Thích hợp cho các tác vụ không ảnh hưởng trực tiếp đến layout, như gọi API, đăng ký sự kiện, log, animation nhẹ… Quy trình: Cập nhật lại stateCập nhật DOM (mutated)React render lại UIClean up nếu cóGọi useEffect callback",3,{"id":354,"title":355,"titles":356,"content":357,"level":352},"/blog/use-effect-and-use-layout-effect#uselayouteffect","useLayoutEffect",[340,345],"Chạy ngay sau khi DOM được cập nhật, nhưng trước khi browser vẽ lại giao diện (paint).Dùng khi bạn cần đo lường DOM, thay đổi layout hoặc ngăn nhấp nháy giao diện. Quy trình: Cập nhật lại stateCập nhật DOM (mutated)Clean up nếu dependencies thay đổiGọi useLayoutEffect callbackReact render lại UI Khi nào dùng cái nào? Tình huốngNên dùngGọi API, thao tác không ảnh hưởng layoutuseEffectĐo kích thước DOM, scroll, positionuseLayoutEffectCập nhật class, focus vào inputuseLayoutEffectHiệu ứng animation nhẹ sau renderuseEffectNgăn nháy layout (flicker) khi hiển thị componentsuseLayoutEffectCập nhật DOM trước khi browser vẽ lạiuseLayoutEffect",{"id":84,"title":5,"titles":359,"content":78,"level":96},[],{"id":361,"title":13,"titles":362,"content":363,"level":96},"/blog/useful-npm-package#frontend",[],"react-query - React Query Thư viện quản lý trạng thái cho React, giúp xử lý các yêu cầu API và cache dữ liệu một cách dễ dàng.@progress/kendo-react-pdf - Thư viện tạo PDF cho React, hay hơn các thư viện khác ở chỗ hình ảnh sẽ được xuất ra dưới định dạng SVG, giúp cho việc xuất ảnh chất lượng cao và nét hơn, không bị vỡ ảnh khi zoom in.react-split-pane - Thư viện tạo giao diện chia tách (split view) cho React, giúp dễ dàng tạo các layout với các phần tử có thể kéo và thả.react-window - Thư viện giúp tối ưu hóa hiệu suất cho bảng và danh sách lớn trong React bằng cách chỉ render các phần tử đang hiển thị trên UI nhẹ và dễ sử dụng.",{"id":365,"title":54,"titles":366,"content":59,"level":96},"/blog/useful-npm-package#backend",[],{"id":368,"title":63,"titles":369,"content":68,"level":96},"/blog/useful-npm-package#các-đoạn-code-mẫu-hữu-dụng",[],{"id":371,"title":372,"titles":373,"content":374,"level":96},"/blog/useful-script","Tổng hợp các scripts hữu ích",[],"Danh sách các scripts hữu ích cho lập trình viên, giúp tiết kiệm thời gian và công sức trong quá trình phát triển phần mềm.",{"id":376,"title":377,"titles":378,"content":379,"level":96},"/blog/useful-script#nén-ảnh-và-convert-ảnh-sang-định-dạng-webp","Nén ảnh và convert ảnh sang định dạng webp",[],"Cài đặt cwebp Đối với window thì có thể xem hướng dẫn tại: https://developers.google.com/speed/webp/download?hl=vi Script nén ảnh Sau khi tạo xong file, cần phải gán quyền thực thi cho file script bằng lệnh sau: Sau đó có thể chạy script để có thể thực hiện nén ảnh và chuyển đổi sang định dạng webp.",[381],{"id":382,"title":300,"body":383,"date":77,"description":302,"extension":79,"image":697,"keywords":698,"meta":699,"navigation":83,"path":299,"published":83,"seo":700,"stem":701,"tags":702,"__hash__":703},"blog/blog/jwt.md",{"type":7,"value":384,"toc":695},[385,388,392,402,405,420,427,430,450,453,459,466,469,472,479,494,497,500,515,518,525,528,531,534,537,550,553,556,571,582,585,588,608,614,623,626,629,649,652,655,658,661,667,670,673],[10,386,305],{"id":387},"_1-giới-thiệu-về-jwt",[389,390,391],"p",{},"JSON Web Token (JWT) là một tiêu chuẩn mở ( RFC 7519 ) định nghĩa một cách thức nhỏ gọn và độc lập để truyền thông tin an toàn giữa các bên dưới dạng đối tượng JSON. Thông tin này có thể được xác minh và tin cậy vì nó được ký kỹ thuật số. JWT có thể được ký bằng một bí mật (với thuật toán HMAC ) hoặc một cặp khóa công khai/riêng tư bằng RSA hoặc ECDSA .",[389,393,394],{},[395,396,397,398],"em",{},"Trích từ: ",[26,399,400],{"href":400,"rel":401},"https://jwt.io/introduction",[30],[10,403,310],{"id":404},"_2-các-thành-phần-của-jwt",[389,406,407,408,411,412,415,416,419],{},"JWT bao gồm ba thành phần chính: ",[21,409,410],{},"Header",", ",[21,413,414],{},"Payload"," và ",[21,417,418],{},"Signature",". Mỗi phần đều được mã hóa bằng Base64Url và được phân tách bằng dấu chấm (.).\nMột JWT token thường sẽ trông như sau:",[421,422,424],"alert",{"type":423},"info",[389,425,426],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[389,428,429],{},"như vậy với JWT token ở trên thì các thành phần sau khi được mã hóa sẽ là:",[15,431,432,438,444],{},[18,433,434,435],{},"Header: ",[21,436,437],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9",[18,439,440,441],{},"Payload: ",[21,442,443],{},"eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ",[18,445,446,447],{},"Signature: ",[21,448,449],{},"SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[451,452],"br",{},[389,454,455],{},[456,457,458],"strong",{},"Chi tiết về các thành phần",[15,460,461],{},[18,462,463,465],{},[456,464,410],{},": Thường sẽ chứa thông tin về thuật toán mã hóa và loại token.",[389,467,468],{},"Ví dụ:",[70,470],{":files":471},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"alg\\\": \\\"HS256\\\",\\n  \\\"typ\\\": \\\"JWT\\\"\\n}\\n\"}]",[15,473,474],{},[18,475,476,478],{},[456,477,414],{},": Đây là phần sẽ chứa các thông tin mà chúng ta muốn mã hóa và truyền tải. Thường thì chúng ta sẽ lưu thông tin người dùng, user_id,...",[421,480,481],{"type":423},[389,482,483,484,411,487,411,490,493],{},"Lưu ý rằng JWT token không có hết hạn, tuy nhiên chúng ta có thể giới hạn thời gian sống của token bằng cách thêm các trường như ",[21,485,486],{},"exp",[21,488,489],{},"nbf",[21,491,492],{},"iat"," vào payload. Và khi chúng ta xác thực token chúng ta sẽ cần thêm một bước kiểm tra thời gian sống của token. Như vậy chúng ta có thể sử dụng JWT token như một session token.",[389,495,496],{},"Ví dụ về payload:",[70,498],{":files":499},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"sub\\\": \\\"1234567890\\\",\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"iat\\\": 1516239022\\n}\\n\"}]",[15,501,502],{},[18,503,504,506,507,415,509,511,512],{},[456,505,418],{},": Được tạo bằng cách mã hóa ",[21,508,410],{},[21,510,414],{}," với một khóa bí mật và thuật toán đã chỉ định trong Header. Điều này giúp đảm bảo rằng token không bị thay đổi trong quá trình truyền tải. Ví dụ:",[70,513],{":files":514},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"HMACSHA256(\\n  base64UrlEncode(header) + \\\".\\\" +\\n  base64UrlEncode(payload),\\n  your-256-bit-secret\\n)\\n\"}]",[10,516,315],{"id":517},"_3-viết-lại-hàm-để-generate-jwt-token-và-verify-jwt-token-trong-nodejs",[389,519,520,521,524],{},"Khi làm việc với jwt và nodeJs, hầu hết mọi người sẽ sử dụng thư viện ",[21,522,523],{},"jsonwebtoken"," để tạo và xác thực JWT token. Tuy nhiên, để hiểu rõ hơn về cách hoạt động của JWT, chúng ta có thể tự viết hàm để tạo và xác thực JWT token.",[389,526,527],{},"Giả sử chúng ta muốn tạo JWT token từ thông tin user_id=123, khi đó phần payload sẽ là:",[70,529],{":files":530},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123\\n}\\n\"}]",[389,532,533],{},"Ở phần header, chúng ta sẽ sử dụng thuật toán HS256 để mã hóa JWT token. Nên payload sẽ có dạng như sau:",[70,535],{":files":536},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const header = {\\n  alg: 'HS256',\\n  typ: 'JWT'\\n}\\n\"}]",[389,538,539,540,415,542,544,545,415,547,549],{},"Để tạo JWT token, chúng ta cần mã hóa ",[21,541,410],{},[21,543,414],{}," bằng Base64Url. Sau đó, chúng ta sẽ tạo chữ ký bằng cách sử dụng thuật toán HMACSHA256 với khóa bí mật (secret key) và kết hợp ",[21,546,410],{},[21,548,414],{},".",[389,551,552],{},"Đầu tiên chúng ta cần viết 1 hàm để mã hóa Base64Url:",[70,554],{":files":555},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\"}]",[389,557,558,559,562,563,566,567,570],{},"Ở đây, vì chúng ta sử dụng NodeJs nên có thể sử dụng ",[21,560,561],{},"Buffer"," để mã hóa Base64Url. Nếu bạn đang làm việc với JavaScript trên trình duyệt, bạn có thể sử dụng ",[21,564,565],{},"btoa()"," để mã hóa Base64Url. Khi muốn giải mã, bạn có thể sử dụng ",[21,568,569],{},"atob()",". Hàm này là hàm có sẵn trong trình duyệt.",[389,572,573,574,577,578,581],{},"Tiếp theo, chúng ta sẽ triển khai hàm tạo JWT token. Trong Node.js, chúng ta có thể dễ dàng thực hiện điều này bằng cách dùng thư viện tích hợp sẵn là ",[21,575,576],{},"crypto",", cụ thể là hàm ",[21,579,580],{},"createHmac",". Hàm này sẽ giúp chúng ta tạo ra chữ ký (signature) từ chuỗi đã mã hóa gồm Header và Payload, kết hợp với secret key để đảm bảo tính toàn vẹn và xác thực của token.",[389,583,584],{},"Full code mã hóa JWT token sẽ như sau:",[70,586],{":files":587},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const crypto = require('crypto');\\nfunction base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\\nfunction createJWT(payload, secret) {\\n  const header = {\\n    alg: 'HS256',\\n    typ: 'JWT'\\n  };\\n\\n  const encodedHeader = base64UrlEncode(JSON.stringify(header));\\n  const encodedPayload = base64UrlEncode(JSON.stringify(payload));\\n\\n  const signature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return `${encodedHeader}.${encodedPayload}.${signature}`;\\n}\\n\"}]",[389,589,590,591,594,595,415,598,601,602,604,605,607],{},"Như vậy chúng ta đã có hàm ",[21,592,593],{},"createJWT"," để tạo JWT token. Hàm này sẽ nhận vào 2 tham số là ",[21,596,597],{},"payload",[21,599,600],{},"secret",". ",[21,603,597],{}," là thông tin mà chúng ta muốn mã hóa và truyền tải, còn ",[21,606,600],{}," là khóa bí mật mà chúng ta sẽ sử dụng để tạo chữ ký cho token.",[421,609,611],{"type":610},"error",[389,612,613],{},"Đối với JWT token, chúng ta có thể sử dụng bất kỳ chuỗi nào làm khóa bí mật. Tuy nhiên, để đảm bảo tính bảo mật, chúng ta nên sử dụng một chuỗi ngẫu nhiên và đủ dài. Vì khi sử dụng thuật toán HMACSHA256, nếu kẻ tấn công biết được khóa bí mật, họ có thể tạo ra token giả mạo và truy cập vào hệ thống của bạn.",[389,615,616,617,622],{},"Có thể sử dụng trang web ",[26,618,621],{"href":619,"rel":620},"https://randomkeygen.com/",[30],"randomkeygen.com"," để tạo ra một chuỗi ngẫu nhiên và đủ dài làm khóa bí mật.",[10,624,320],{"id":625},"_4-xác-thực-jwt-token",[389,627,628],{},"Token JWT gồm ba phần: Header, Payload và Signature, được nối với nhau bằng dấu chấm (.). Quá trình xác thực diễn ra như sau:",[630,631,632,635,638],"ol",{},[18,633,634],{},"Tách token thành ba phần: Header, Payload và Signature.",[18,636,637],{},"Tạo lại chữ ký bằng cách kết hợp Header và Payload đã mã hóa bằng Base64Url, sau đó sử dụng cùng thuật toán và khóa bí mật (secret key) đã được dùng khi tạo token ban đầu.",[18,639,640,641],{},"So sánh chữ ký mới tạo với chữ ký ban đầu trong token:\n",[15,642,643,646],{},[18,644,645],{},"Nếu hai chữ ký giống nhau, token được xác nhận là hợp lệ (không bị chỉnh sửa).",[18,647,648],{},"Nếu khác nhau, token đã bị thay đổi hoặc không hợp lệ.",[70,650],{":files":651},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function verifyJWT(token, secret) {\\n  const [encodedHeader, encodedPayload, signature] = token.split('.');\\n  const expectedSignature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return expectedSignature === signature;\\n}\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconsole.log('Token is valid:', isValid);\\n\"}]",[389,653,654],{},"Ngoài ra, để kiểm tra xem token có hết hạn hay chưa, bạn có thể thêm trường exp (expiration) vào Payload. Trường này lưu thời gian hết hạn dưới dạng timestamp (số giây kể từ ngày 1/1/1970). Khi xác thực, chỉ cần so sánh giá trị exp với thời gian hiện tại để biết token còn hiệu lực hay không.",[70,656],{":files":657},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123,\\n  exp: Math.floor(Date.now() / 1000) + (60 * 60) // Hết hạn sau 1 giờ\\n};\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconst decodedPayload = JSON.parse(Buffer.from(token.split('.')[1], 'base64').toString());\\nconst isExpired = decodedPayload.exp \u003C Math.floor(Date.now() / 1000);\\nconsole.log('Token is valid:', isValid);\\nconsole.log('Token is expired:', isExpired);\\n\"}]",[10,659,325],{"id":660},"_5-kết-luận",[389,662,663,664,666],{},"JWT là một công cụ mạnh mẽ để xác thực và phân quyền trong các ứng dụng web. Bằng cách hiểu rõ cách hoạt động của JWT, bạn có thể tự tạo và xác thực JWT token mà không cần phụ thuộc vào thư viện bên ngoài. Tuy nhiên, trong thực tế, bạn nên sử dụng thư viện ",[21,665,523],{}," để tiết kiệm thời gian và công sức.",[389,668,669],{},"Hy vọng bài viết này đã giúp bạn hiểu rõ hơn về JWT và cách sử dụng nó trong ứng dụng của mình. Nếu bạn có bất kỳ câu hỏi nào, hãy liên hệ với mình qua các kênh liên lạc như email, facebook, zalo hoặc telegram nhé!",[10,671,330],{"id":672},"_6-tài-liệu-tham-khảo",[15,674,675,682,689],{},[18,676,677],{},[26,678,681],{"href":679,"rel":680},"https://jwt.io/",[30],"jwt.io",[18,683,684],{},[26,685,688],{"href":686,"rel":687},"https://datatracker.ietf.org/doc/html/rfc7519",[30],"RFC 7519 - JSON Web Token (JWT)",[18,690,691],{},[26,692,523],{"href":693,"rel":694},"https://www.npmjs.com/package/jsonwebtoken",[30],{"title":74,"searchDepth":75,"depth":75,"links":696},[],"/images/blog/jwt/banner.webp","jwt, jsonwebtoken, nodejs, bảo mật, xác thực",{},{"title":300,"description":302},"blog/jwt",[88],"yD1lXH-8Az6ik7WFkgSdIc4k5xNC5W8to4G-L9vWpKw",[705,869,1334,1524,1643,1858,2050,2095],{"id":706,"title":93,"body":707,"date":859,"description":860,"extension":79,"image":861,"keywords":862,"meta":863,"navigation":83,"path":92,"published":83,"seo":864,"stem":865,"tags":866,"__hash__":868},"blog/blog/ansible.md",{"type":7,"value":708,"toc":857},[709,714,717,720,723,726,729,732,735,737,740,743,746,756,758,761,763,766,768,771,778,785,788,795,798,800,803,806,809,814,817,819,822,845,847,849,854],[389,710,711],{},[456,712,713],{},"Hướng dẫn chi tiết về cài đặt và triển khai Ansible",[389,715,716],{},"Ansible là một công cụ tự động hóa mạnh mẽ, giúp quản lý cấu hình, triển khai ứng dụng và điều phối hệ thống một cách dễ dàng. Trong bài viết này, chúng ta sẽ tìm hiểu cách cài đặt, cấu hình và sử dụng Ansible thông qua các ví dụ thực tế.",[718,719],"hr",{},[10,721,99],{"id":722},"️-cài-đặt-ansible",[389,724,725],{},"Hướng dẫn cài đặt Ansible trên Ubuntu:",[70,727],{":files":728},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo apt update -y\\nsudo apt install software-properties-common -y\\nsudo apt-add-repository --yes --update ppa:ansible/ansible\\nsudo apt install ansible -y\\n\"}]",[389,730,731],{},"Sau khi cài đặt, bạn có thể kiểm tra phiên bản Ansible:",[70,733],{":files":734},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible --version\"}]",[718,736],{},[10,738,104],{"id":739},"cấu-hình-ssh",[389,741,742],{},"Để Ansible có thể kết nối đến các máy chủ từ xa, bạn cần cấu hình SSH. Dưới đây là cách sao chép SSH key đến máy chủ khác:",[70,744],{":files":745},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ssh-copy-id -i ~/.ssh/id_rsa.pub vinhtieng@123.3123.12\"}]",[389,747,748,751,752,755],{},[456,749,750],{},"Lưu ý:"," Thay ",[21,753,754],{},"vinhtieng@123.3123.12"," bằng tên người dùng và địa chỉ IP của máy chủ từ xa.",[718,757],{},[10,759,109],{"id":760},"hosts-inventory",[389,762,111],{},[70,764],{":files":765},"[{\"title\":\"inventory\",\"language\":\"ini\",\"content\":\"[webservers]\\nweb1.example.com\\nweb2.example.com\\n\\n[databases]\\ndb1.example.com\\n\\n[webservers:vars]\\nansible_user=your_ssh_user\\nansible_ssh_private_key_file=/path/to/private/key\\n\\n[webservers1]\\nweb1.example.com ansible_user=user1 ansible_ssh_private_key_file=/path/to/key1\\nweb2.example.com ansible_user=user2 ansible_ssh_private_key_file=/path/to/key2\\n\"}]",[718,767],{},[10,769,114],{"id":770},"kiểm-tra-kết-nối-ping",[389,772,773,774,777],{},"Bạn có thể kiểm tra kết nối đến các máy chủ bằng lệnh ",[21,775,776],{},"ping",":",[630,779,780],{},[18,781,782],{},[456,783,784],{},"Ping với file hosts mặc định:",[70,786],{":files":787},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -m ping all\"}]",[630,789,790],{"start":75},[18,791,792],{},[456,793,794],{},"Ping với file inventory tùy chỉnh:",[70,796],{":files":797},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -i my_hosts all -m ping\"}]",[718,799],{},[10,801,119],{"id":802},"playbook-task-module",[389,804,805],{},"Playbook là nơi bạn định nghĩa các tác vụ (tasks) cần thực hiện trên các máy chủ. Dưới đây là cách chạy một playbook:",[70,807],{":files":808},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible-playbook my_playbook.yml -i inventory_file\"}]",[389,810,811],{},[456,812,813],{},"Ví dụ về Playbook đơn giản:",[70,815],{":files":816},"[{\"title\":\"my_playbook.yml\",\"language\":\"yaml\",\"content\":\"---\\n- name: Cài đặt và khởi động Apache\\n  hosts: webservers\\n  become: yes\\n  tasks:\\n    - name: Cài đặt Apache\\n      apt:\\n        name: apache2\\n        state: present\\n    - name: Đảm bảo Apache đang chạy\\n      service:\\n        name: apache2\\n        state: started\\n\"}]",[718,818],{},[10,820,124],{"id":821},"tài-liệu-tham-khảo",[15,823,824,831,838],{},[18,825,826],{},[26,827,830],{"href":828,"rel":829},"https://docs.ansible.com/",[30],"Ansible Documentation",[18,832,833],{},[26,834,837],{"href":835,"rel":836},"https://galaxy.ansible.com/",[30],"Ansible Galaxy",[18,839,840],{},[26,841,844],{"href":842,"rel":843},"https://docs.ansible.com/ansible/latest/user_guide/playbooks.html",[30],"Ansible Playbook Guide",[718,846],{},[451,848],{},[389,850,851],{},[456,852,853],{},"Tóm lại:",[389,855,856],{},"Ansible là công cụ mạnh mẽ giúp tự động hóa các tác vụ quản trị hệ thống. Việc nắm vững cách sử dụng Ansible sẽ giúp bạn tiết kiệm thời gian và giảm thiểu lỗi trong quá trình quản lý hệ thống.",{"title":74,"searchDepth":75,"depth":75,"links":858},[],"2025-04-25T00:00:00.000Z","Hướng dẫn chi tiết về cài đặt, cấu hình SSH, inventory và sử dụng Playbook trong Ansible.","/images/blog/ansible/banner.webp","ansible, automation, configuration management",{},{"title":93,"description":860},"blog/ansible",[867],"ansible","TDOKqPCKfBmvSL-G-wacqQdrgbcbAiBJrgMPYjtJtIc",{"id":870,"title":129,"body":871,"date":859,"description":1325,"extension":79,"image":1326,"keywords":1327,"meta":1328,"navigation":83,"path":128,"published":83,"seo":1329,"stem":1330,"tags":1331,"__hash__":1333},"blog/blog/basic-nginx.md",{"type":7,"value":872,"toc":1323},[873,878,881,907,909,912,915,918,921,924,929,932,935,938,944,947,958,961,964,967,981,984,989,992,995,1009,1012,1017,1049,1052,1055,1058,1061,1064,1067,1074,1085,1092,1103,1106,1117,1120,1123,1126,1129,1132,1136,1144,1147,1149,1152,1155,1181,1184,1189,1192,1195,1198,1200,1203,1205,1208,1210,1213,1215,1218,1220,1223,1225,1228,1230,1233,1236,1239,1242,1245,1247,1250,1253,1256,1259,1262,1265,1268,1270,1273,1275,1278,1280,1282,1312,1314,1316,1320],[389,874,875],{},[456,876,877],{},"Hướng dẫn chi tiết về cấu hình và triển khai Nginx",[389,879,880],{},"Nginx là một web server mã nguồn mở mạnh mẽ, được sử dụng phổ biến để phục vụ nội dung tĩnh, reverse proxy, cân bằng tải, bảo mật và hỗ trợ PHP thông qua FastCGI. Trong bài viết này, chúng ta sẽ đi qua các cấu hình từ cơ bản đến nâng cao, bao gồm:",[15,882,883,886,889,892,895,898,901,904],{},[18,884,885],{},"Cách cài đặt Nginx",[18,887,888],{},"Cấu hình máy chủ mặc định (default host)",[18,890,891],{},"Tích hợp với PHP-FPM",[18,893,894],{},"Thiết lập Load Balancer (cân bằng tải)",[18,896,897],{},"Gzip, HTTP/2, Rate limiting",[18,899,900],{},"Redirect, Rewrites",[18,902,903],{},"Hardening & Security",[18,905,906],{},"Logging nâng cao",[718,908],{},[10,910,134],{"id":911},"️-cài-đặt-nginx",[389,913,914],{},"Hướng dẫn cài đặt Nginx trên Ubuntu:",[70,916],{":files":917},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo apt update\\nsudo apt install nginx\\n\"}]",[389,919,920],{},"Sau khi cài đặt, bạn có thể kiểm tra trạng thái Nginx:",[70,922],{":files":923},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo systemctl status nginx\"}]",[389,925,926],{},[456,927,928],{},"Kiểm tra tường lửa:",[389,930,931],{},"Sau khi cài đặt Nginx, bạn nên đảm bảo rằng tường lửa (firewall) cho phép lưu lượng HTTP và HTTPS để máy chủ có thể phục vụ nội dung web.",[70,933],{":files":934},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo ufw allow ‘Nginx Full’\\nsudo ufw status\\n\"}]",[389,936,937],{},"Lệnh sudo ufw allow 'Nginx Full' sẽ mở cả hai cổng 80 (HTTP) và 443 (HTTPS).\nSau đó, dùng sudo ufw status để xác nhận rằng các cổng này đã được mở.",[421,939,941],{"type":940},"warning",[389,942,943],{},"Nếu bạn chưa bật ufw (Uncomplicated Firewall), bạn có thể bật bằng lệnh sudo ufw enable. Tuy nhiên, hãy đảm bảo cấu hình chính xác để không bị khóa SSH.",[389,945,946],{},"Kiểm tra hoạt động của Nginx:",[389,948,949,950,953,954,957],{},"Mở trình duyệt và truy cập địa chỉ:\n👉 ",[21,951,952],{},"http://\u003Cđịa_chỉ_IP_của_bạn>"," hoặc ",[21,955,956],{},"http://localhost"," nếu kiểm tra cục bộ.",[389,959,960],{},"Bạn sẽ thấy trang mặc định “Welcome to nginx!” nếu mọi thứ hoạt động đúng cách.",[10,962,139],{"id":963},"️-cấu-hình-default-host-trong-nginx",[389,965,966],{},"Trên Ubuntu, file cấu hình của Nginx thường được lưu tại các vị trí sau:",[15,968,969,975],{},[18,970,971,974],{},[21,972,973],{},"/etc/nginx/sites-available/default"," (Nếu sử dụng thư mục sites-available và sites-enabled).",[18,976,977,980],{},[21,978,979],{},"/etc/nginx/conf.d/default.conf"," (Thông dụng cho các cấu hình đơn giản).",[389,982,983],{},"Mặc định, khi cài đặt Nginx, sẽ có một file cấu hình default trong thư mục /etc/nginx/sites-available/ với một số cấu hình cơ bản. Bạn có thể sửa file này để cấu hình server block cho website của mình.",[389,985,986],{},[456,987,988],{},"Cấu hình Default Host",[389,990,991],{},"Mở file cấu hình Nginx mặc định:",[70,993],{":files":994},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"sudo nano /etc/nginx/sites-available/default\"}]",[389,996,997,998,1001,1002,1005,1006,777],{},"Mặc định, Nginx sẽ chọn block đầu tiên khi không tìm thấy ",[21,999,1000],{},"server_name"," tương ứng. Để cấu hình rõ ràng host mặc định, bạn thêm ",[21,1003,1004],{},"default_server"," vào dòng ",[21,1007,1008],{},"listen",[70,1010],{":files":1011},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80 default_server;\\n    server_name _;\\n    root /var/www/html;\\n    index index.html index.htm;\\n\\n    location / {\\n        try_files $uri $uri/ =404;\\n    }\\n}\\n\"}]",[389,1013,1014],{},[456,1015,1016],{},"Ghi chú:",[15,1018,1019,1025,1031,1037,1043],{},[18,1020,1021,1024],{},[21,1022,1023],{},"listen 80 default_server;",": Cấu hình Nginx lắng nghe cổng 80 (HTTP) và đánh dấu đây là default_server (server mặc định cho các yêu cầu không khớp với server block khác).",[18,1026,1027,1030],{},[21,1028,1029],{},"root /var/www/html;",": Đường dẫn tới thư mục chứa các tệp tin của website. Bạn có thể thay đổi đường dẫn này thành thư mục của website bạn muốn phục vụ.",[18,1032,1033,1036],{},[21,1034,1035],{},"server_name _;",": Chỉ thị này cho phép server chấp nhận tất cả các yêu cầu không khớp với server block khác. Nếu bạn có tên miền cụ thể, hãy thay thế dấu gạch dưới (_) bằng tên miền của bạn.",[18,1038,1039,1042],{},[21,1040,1041],{},"location /",": Đây là phần cấu hình định tuyến cho các yêu cầu đến. Cấu hình này giúp Nginx tìm kiếm các tệp tin khi người dùng truy cập vào website.",[18,1044,1045,1048],{},[21,1046,1047],{},"try_files $uri $uri/ =404;",": Nếu yêu cầu không trùng khớp với tệp tin hoặc thư mục, sẽ trả về lỗi 404.",[389,1050,1051],{},"Sau khi chỉnh sửa xong, bạn cần kiểm tra xem cấu hình có chính xác không:",[70,1053],{":files":1054},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo nginx -t\"}]",[389,1056,1057],{},"Nếu không có lỗi nào, bạn có thể khởi động lại Nginx để áp dụng cấu hình mới:",[70,1059],{":files":1060},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo systemctl restart nginx\"}]",[389,1062,1063],{},"Giới thiệu về sites-available và sites-enabled",[389,1065,1066],{},"Trong Nginx, thư mục sites-available và sites-enabled là một cơ chế để quản lý các website (virtual hosts) mà Nginx có thể phục vụ. Cấu trúc này giúp dễ dàng bật/tắt các website mà không cần phải xóa hoặc thay đổi cấu hình trực tiếp.",[630,1068,1069],{},[18,1070,1071,777],{},[21,1072,1073],{},"sites-available",[15,1075,1076,1079,1082],{},[18,1077,1078],{},"Đây là nơi bạn tạo và lưu trữ tất cả các file cấu hình của các website hoặc ứng dụng mà bạn muốn Nginx phục vụ.",[18,1080,1081],{},"Mỗi file cấu hình trong sites-available đại diện cho một website hoặc ứng dụng riêng biệt.",[18,1083,1084],{},"Ví dụ: /etc/nginx/sites-available/example.com là cấu hình cho website example.com.",[630,1086,1087],{"start":75},[18,1088,1089,777],{},[21,1090,1091],{},"sites-enabled",[15,1093,1094,1097,1100],{},[18,1095,1096],{},"Đây là nơi chứa các liên kết tượng trưng (symlink) đến các file cấu hình trong sites-available mà bạn muốn Nginx thực thi.",[18,1098,1099],{},"Các liên kết này cho phép Nginx biết được website nào sẽ được kích hoạt.",[18,1101,1102],{},"Bạn không nên trực tiếp chỉnh sửa các file trong sites-enabled. Thay vào đó, bạn tạo symlink từ sites-available.",[389,1104,1105],{},"Cách thức hoạt động:",[15,1107,1108,1111],{},[18,1109,1110],{},"Khi bạn tạo một file cấu hình trong sites-available, bạn có thể kích hoạt nó bằng cách tạo một symlink đến file đó trong thư mục sites-enabled.",[18,1112,1113,1114,549],{},"Để tạo symlink, sử dụng lệnh ",[21,1115,1116],{},"ln -s",[389,1118,1119],{},"Ví dụ, nếu bạn có cấu hình example.com trong sites-available, bạn có thể tạo symlink vào sites-enabled như sau:",[70,1121],{":files":1122},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/\"}]",[10,1124,144],{"id":1125},"cấu-hình-nginx-với-php-fpm",[389,1127,1128],{},"Để xử lý các file PHP, bạn cần kết nối Nginx với PHP-FPM qua socket hoặc TCP:",[70,1130],{":files":1131},"[{\"title\":\"php-fpm.conf\",\"language\":\"nginx\",\"content\":\"location ~ \\\\.php$ {\\n  try_files $uri =404;\\n  fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\\n  fastcgi_index index.php;\\n  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n  include fastcgi_params;\\n}\\n\"}]",[389,1133,1134],{},[456,1135,750],{},[15,1137,1138,1141],{},[18,1139,1140],{},"Đường dẫn socket có thể thay đổi tùy phiên bản PHP.",[18,1142,1143],{},"Nếu dùng TCP:",[70,1145],{":files":1146},"[{\"title\":\"php-fpm.conf\",\"language\":\"nginx\",\"content\":\"fastcgi_pass 127.0.0.1:9000;\"}]",[718,1148],{},[10,1150,149],{"id":1151},"load-balancer-trong-nginx",[389,1153,1154],{},"Nginx hỗ trợ cấu hình cân bằng tải với nhiều thuật toán lựa chọn backend:",[15,1156,1157,1163,1169,1175],{},[18,1158,1159,1162],{},[21,1160,1161],{},"round-robin",": Mặc định, phân phối đều cho các request.",[18,1164,1165,1168],{},[21,1166,1167],{},"least_conn",": Chọn server ít kết nối nhất.",[18,1170,1171,1174],{},[21,1172,1173],{},"ip_hash",": Duy trì session cho client.",[18,1176,1177,1180],{},[21,1178,1179],{},"least_time",": chọn server có thời gian phản hồi ít nhất",[389,1182,1183],{},"Có thể thêm trọng số cho server bằng cách thêm số sau ip:port",[15,1185,1186],{},[18,1187,1188],{},"Ex: server 192.168.1.0:8000 weight=3;",[70,1190],{":files":1191},"[{\"title\":\"upstream.conf\",\"language\":\"nginx\",\"content\":\"upstream myapp1 {\\n    ip_hash;\\n    server 192.168.1.10:8000;\\n    server 192.168.2.10:8000;\\n    # server 192.168.1.10:8000 weight=3;\\n}\\n\"}]",[389,1193,1194],{},"Cấu hình server block proxy đến upstream:",[70,1196],{":files":1197},"[{\"title\":\"proxy.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80 default_server;\\n  server_name _;\\n  root /var/www/html;\\n  index index.html index.htm;\\n\\n  location / {\\n      proxy_pass http://myapp1;\\n      proxy_set_header Host $host;\\n      proxy_set_header X-Real-IP $remote_addr;\\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n      proxy_set_header X-Forwarded-Proto $scheme;\\n  }\\n}\\n\"}]",[718,1199],{},[10,1201,154],{"id":1202},"gzip-compression",[389,1204,156],{},[70,1206],{":files":1207},"[{\"title\":\"gzip.conf\",\"language\":\"nginx\",\"content\":\"gzip on;\\ngzip_disable \\\"msie6\\\";\\ngzip_vary on;\\ngzip_proxied any;\\ngzip_comp_level 6;\\ngzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n\"}]",[718,1209],{},[10,1211,159],{"id":1212},"kích-hoạt-http2",[389,1214,161],{},[70,1216],{":files":1217},"[{\"title\":\"http2.conf\",\"language\":\"nginx\",\"content\":\"listen 443 ssl http2;\\n\"}]",[718,1219],{},[10,1221,164],{"id":1222},"rate-limiting",[389,1224,166],{},[70,1226],{":files":1227},"[{\"title\":\"rate-limiting.conf\",\"language\":\"nginx\",\"content\":\"limit_req_zone $binary_remote_addr zone=mylimit:10m rate=1r/s;\\n\\nlocation /api/ {\\n    limit_req zone=mylimit burst=5;\\n}\\n\"}]",[718,1229],{},[10,1231,169],{"id":1232},"redirect-và-rewrites",[389,1234,1235],{},"Chuyển hướng toàn bộ traffic HTTP sang HTTPS:",[70,1237],{":files":1238},"[{\"title\":\"redirect.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80;\\n    server_name example.com;\\n    return 301 https://$host$request_uri;\\n}\\nserver {\\n    listen 443 ssl;\\n    server_name example.com;\\n    ssl_certificate /path/to/cert.pem;\\n    ssl_certificate_key /path/to/key.pem;\\n}\\n\"}]",[389,1240,1241],{},"Viết lại URL cho SPA:",[70,1243],{":files":1244},"[{\"title\":\"rewrite.conf\",\"language\":\"nginx\",\"content\":\"location /api/ {\\n    rewrite ^/api/(.*)$ /$1 break;\\n}\\n\"}]",[718,1246],{},[10,1248,174],{"id":1249},"hardening-security",[389,1251,1252],{},"Bảo vệ server bằng cách từ chối truy cập file nhạy cảm:",[70,1254],{":files":1255},"[{\"title\":\"deny.conf\",\"language\":\"nginx\",\"content\":\"location ~* \\\\\\\\.(git|env|bak|log)$ {\\n  deny all;\\n}\\n\"}]",[389,1257,1258],{},"Ẩn thông tin server:",[70,1260],{":files":1261},"[{\"title\":\"security.conf\",\"language\":\"nginx\",\"content\":\"server_tokens off;\\n\"}]",[389,1263,1264],{},"Chống clickjacking và XSS:",[70,1266],{":files":1267},"[{\"title\":\"headers.conf\",\"language\":\"nginx\",\"content\":\"add_header X-Content-Security-Policy \\\"default-src 'self'\\\";\\nadd_header X-Frame-Options \\\"DENY\\\";\\nadd_header X-XSS-Protection \\\"1; mode=block\\\";\\nadd_header Referrer-Policy \\\"no-referrer\\\";\\n\"}]",[718,1269],{},[10,1271,179],{"id":1272},"logging-nâng-cao",[389,1274,181],{},[70,1276],{":files":1277},"[{\"title\":\"logging.conf\",\"language\":\"nginx\",\"content\":\"log_format main '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n               '$status $body_bytes_sent \\\"$http_referer\\\" '\\n               '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\naccess_log /var/log/nginx/access.log main;\\n\"}]",[718,1279],{},[10,1281,124],{"id":821},[15,1283,1284,1291,1298,1305],{},[18,1285,1286],{},[26,1287,1290],{"href":1288,"rel":1289},"https://nginx.org/en/docs/",[30],"Nginx Documentation",[18,1292,1293],{},[26,1294,1297],{"href":1295,"rel":1296},"https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/",[30],"Nginx Load Balancing Guide",[18,1299,1300],{},[26,1301,1304],{"href":1302,"rel":1303},"https://www.php.net/manual/en/install.fpm.configuration.php",[30],"Nginx + PHP-FPM Setup",[18,1306,1307],{},[26,1308,1311],{"href":1309,"rel":1310},"https://owasp.org/www-project-secure-headers/",[30],"OWASP Nginx Hardening Guide",[718,1313],{},[451,1315],{},[389,1317,1318],{},[456,1319,853],{},[389,1321,1322],{},"Nginx là công cụ cực kỳ mạnh mẽ và linh hoạt, không chỉ giới hạn ở web server mà còn là reverse proxy, caching layer, và load balancer. Việc nắm vững và khai thác tốt các tính năng sẽ giúp hệ thống của bạn hiệu suất cao, bảo mật và dễ mở rộng.",{"title":74,"searchDepth":75,"depth":75,"links":1324},[],"Hướng dẫn chi tiết về cấu hình mặc định, PHP-FPM và thiết lập Load Balancer với Nginx.","/images/blog/basic-nginx/banner.webp","nginx, cấu hình, load balancer, php-fpm",{},{"title":129,"description":1325},"blog/basic-nginx",[1332],"nginx","HD2m_BWB56LMZrpcr_Dma_Q9HlPP695j9xqke5zmgZ8",{"id":1335,"title":188,"body":1336,"date":859,"description":1515,"extension":79,"image":1516,"keywords":1517,"meta":1518,"navigation":83,"path":187,"published":83,"seo":1519,"stem":1520,"tags":1521,"__hash__":1523},"blog/blog/basic-redis.md",{"type":7,"value":1337,"toc":1501},[1338,1342,1345,1348,1359,1361,1364,1366,1370,1372,1375,1378,1380,1383,1386,1388,1391,1394,1396,1399,1402,1404,1407,1410,1413,1416,1419,1422,1425,1428,1431,1433,1436,1439,1441,1444,1447,1454,1457,1460,1462,1465,1468,1470,1473,1475,1478,1483,1486],[389,1339,1340],{},[456,1341,188],{},[389,1343,1344],{},"Redis là một kho dữ liệu key-value trong bộ nhớ, mã nguồn mở, nổi tiếng với hiệu suất và tính linh hoạt. Redis hỗ trợ nhiều kiểu dữ liệu, phù hợp cho việc sử dụng bộ nhớ đệm, ứng dụng thời gian thực, hệ thống pub/sub, và nhiều hơn nữa.",[389,1346,1347],{},"Trong hướng dẫn này, chúng ta sẽ tìm hiểu:",[15,1349,1350,1353,1356],{},[18,1351,1352],{},"Các kiểu dữ liệu trong Redis",[18,1354,1355],{},"Các lệnh phổ biến của Redis",[18,1357,1358],{},"Cách tích hợp Redis vào dự án Node.js",[718,1360],{},[10,1362,193],{"id":1363},"các-kiểu-dữ-liệu-lệnh-redis",[389,1365,195],{},[1367,1368,198],"h2",{"id":1369},"_1-chuỗi-strings",[389,1371,200],{},[70,1373],{":files":1374},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SET name \\\"Jay\\\"\\nGET name\\nINCR counter\\n\"}]",[1367,1376,203],{"id":1377},"_2-danh-sách-lists",[389,1379,205],{},[70,1381],{":files":1382},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"LPUSH mylist \\\"apple\\\"\\nRPUSH mylist \\\"banana\\\"\\nLRANGE mylist 0 -1\\n\"}]",[1367,1384,208],{"id":1385},"_3-tập-hợp-sets",[389,1387,210],{},[70,1389],{":files":1390},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SADD myset \\\"apple\\\"\\nSADD myset \\\"banana\\\"\\nSADD myset \\\"apple\\\" # Trùng lặp, sẽ không được thêm\\nSMEMBERS myset\\n\"}]",[1367,1392,213],{"id":1393},"_4-băm-hashes",[389,1395,215],{},[70,1397],{":files":1398},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"HSET user:1000 name \\\"Jay\\\" age 30\\nHGETALL user:1000\\n\"}]",[1367,1400,218],{"id":1401},"_5-tập-hợp-có-thứ-tự-sorted-sets",[389,1403,220],{},[70,1405],{":files":1406},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ZADD mysortedset 1 \\\"apple\\\"\\nZADD mysortedset 2 \\\"banana\\\"\\nZRANGE mysortedset 0 -1\\n\"}]",[1367,1408,223],{"id":1409},"_6-bitmaps-hyperloglogs-streams",[389,1411,1412],{},"Đây là các cấu trúc nâng cao hơn:\nBitmaps được sử dụng cho các thao tác cấp bit, cho phép bạn thao tác các bit riêng lẻ trong một chuỗi.",[70,1414],{":files":1415},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SETBIT mybitmap 0 1\\nSETBIT mybitmap 1 1\\nBITCOUNT mybitmap\\n\"}]",[389,1417,1418],{},"HyperLogLogs được sử dụng để ước tính số lượng phần tử duy nhất trong một tập hợp, rất hữu ích cho các trường hợp như theo dõi số lượng khách truy cập duy nhất.",[70,1420],{":files":1421},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"PFADD myhll \\\"apple\\\" \\\"banana\\\" \\\"orange\\\"\\nPFCOUNT myhll\\n\"}]",[389,1423,1424],{},"Streams được thiết kế cho các đường dẫn dữ liệu thời gian thực và nguồn sự kiện, cho phép bạn thêm và truy vấn dữ liệu theo chuỗi thời gian.",[70,1426],{":files":1427},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"XADD mystream * name \\\"Jay\\\" age 30\\nXRANGE mystream - +\\n\"}]",[10,1429,228],{"id":1430},"tích-hợp-redis-với-nodejs",[389,1432,230],{},[1367,1434,233],{"id":1435},"_1-cài-đặt-redis-và-ioredis",[70,1437],{":files":1438},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"npm install ioredis\\n# hoặc\\nyarn add ioredis\\n\"}]",[389,1440,235],{},[70,1442],{":files":1443},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"docker run -d -p 6379:6379 redis\\n\"}]",[1367,1445,238],{"id":1446},"_2-thiết-lập-cơ-bản",[389,1448,1449,1450,1453],{},"Tạo một tệp có tên ",[21,1451,1452],{},"redis.js"," và thêm đoạn mã sau:",[70,1455],{":files":1456},"[{\"title\":\"redis.js\",\"language\":\"javascript\",\"content\":\"// redis.ts\\nimport Redis from 'ioredis';\\n\\nconst redis = new Redis({\\n  host: '127.0.0.1',\\n  port: 6379,\\n  // password: 'mật_khẩu_nếu_có'\\n});\\n\\nexport default redis;\\n\"}]",[1367,1458,243],{"id":1459},"_3-sử-dụng-redis-trong-ứng-dụng",[389,1461,245],{},[70,1463],{":files":1464},"[{\"title\":\"example.js\",\"language\":\"javascript\",\"content\":\"// example.ts\\nimport redis from './redis';\\n\\n// Chuỗi\\nawait redis.set('greeting', 'Hello Redis');\\nconst greeting = await redis.get('greeting');\\nconsole.log(greeting); // Hello Redis\\n\\n// Danh sách\\nawait redis.lpush('queue', 'task1');\\nconst task = await redis.rpop('queue');\\nconsole.log(task); // task1\\n\\n// Băm\\nawait redis.hset('user:1', { name: 'Jay', role: 'admin' });\\nconst user = await redis.hgetall('user:1');\\nconsole.log(user); // { name: 'Jay', role: 'admin' }\\n\\n// Tập hợp có thứ tự\\nawait redis.zadd('scores', 100, 'Jay');\\nconst scores = await redis.zrange('scores', 0, -1, 'WITHSCORES');\\nconsole.log(scores);\\n\\n// Pub/Sub\\nredis.subscribe('news');\\nredis.on('message', (channel, message) => {\\n  console.log(`Nhận tin nhắn từ ${channel}: ${message}`);\\n});\\n\\nconst publisher = new Redis();\\npublisher.publish('news', 'Tin nóng!');\\n\"}]",[1367,1466,248],{"id":1467},"_4-ví-dụ-về-bộ-nhớ-đệm",[389,1469,250],{},[70,1471],{":files":1472},"[{\"title\":\"cache.js\",\"language\":\"javascript\",\"content\":\"import redis from './redis';\\n\\nasync function getUserData(userId) {\\n  const cacheKey = `user:${userId}`;\\n  const cachedData = await redis.get(cacheKey);\\n\\n  if (cachedData) {\\n    return JSON.parse(cachedData);\\n  }\\n\\n  // Mô phỏng truy vấn cơ sở dữ liệu\\n  const userData = await queryDatabase(userId);\\n  await redis.set(cacheKey, JSON.stringify(userData), 'EX', 3600); // Lưu vào bộ nhớ đệm trong 1 giờ\\n  return userData;\\n}\\n\\nasync function queryDatabase(userId) {\\n  // Mô phỏng truy vấn cơ sở dữ liệu\\n  return { id: userId, name: 'Jay', age: 30 };\\n}\\n\"}]",[1367,1474,253],{"id":660},[389,1476,1477],{},"Redis là một công cụ mạnh mẽ cho bộ nhớ đệm và các ứng dụng thời gian thực. Bằng cách tích hợp Redis vào các dự án Node.js, bạn có thể cải thiện đáng kể hiệu suất và khả năng mở rộng. Hướng dẫn này đã bao quát các khái niệm cơ bản về kiểu dữ liệu, lệnh, và cách sử dụng Redis trong ứng dụng Node.js.\nHãy khám phá thêm các tính năng nâng cao như giao dịch, scripting Lua, và clustering khi bạn đã quen thuộc hơn với Redis.\nRedis là một công cụ đa năng có thể nâng cao đáng kể ứng dụng của bạn.",[389,1479,1480],{},[456,1481,1482],{},"Happy Coding",[1367,1484,258],{"id":1485},"_6-tài-nguyên-tham-khảo",[15,1487,1488,1495],{},[18,1489,1490],{},[26,1491,1494],{"href":1492,"target":1493},"https://redis.io/documentation","_blank","Tài liệu Redis",[18,1496,1497],{},[26,1498,1500],{"href":1499,"target":1493},"https://github.com/redis/ioredis","Tài liệu ioredis",{"title":74,"searchDepth":75,"depth":75,"links":1502},[1503,1504,1505,1506,1507,1508,1509,1510,1511,1512,1513,1514],{"id":1369,"depth":75,"text":198},{"id":1377,"depth":75,"text":203},{"id":1385,"depth":75,"text":208},{"id":1393,"depth":75,"text":213},{"id":1401,"depth":75,"text":218},{"id":1409,"depth":75,"text":223},{"id":1435,"depth":75,"text":233},{"id":1446,"depth":75,"text":238},{"id":1459,"depth":75,"text":243},{"id":1467,"depth":75,"text":248},{"id":660,"depth":75,"text":253},{"id":1485,"depth":75,"text":258},"Tìm hiểu các khái niệm cơ bản về Redis bao gồm các kiểu dữ liệu và phương thức, cũng như cách tích hợp Redis vào ứng dụng Node.js để sử dụng bộ nhớ đệm và các tính năng thời gian thực.","/images/blog/basic-redis/banner.webp","redis, nodejs, cache, in-memory database",{},{"title":188,"description":1515},"blog/basic-redis",[1522],"redis","3d0XvNroUY6-txkS2aldMngWhf075Own2Hqsb5sjDmM",{"id":1525,"title":263,"body":1526,"date":859,"description":1634,"extension":79,"image":1635,"keywords":1636,"meta":1637,"navigation":83,"path":262,"published":83,"seo":1638,"stem":1639,"tags":1640,"__hash__":1642},"blog/blog/common-docker-file.md",{"type":7,"value":1527,"toc":1625},[1528,1532,1535,1540,1545,1548,1551,1554,1561,1564,1567,1570,1573,1576,1579,1582,1587,1590,1593,1605,1608,1611,1614,1617],[389,1529,1530],{},[456,1531,263],{},[389,1533,1534],{},"Docker là một công cụ ảo hóa nhẹ giúp phát triển, triển khai và chạy ứng dụng trong các container. Nó cho phép bạn đóng gói ứng dụng và tất cả các phụ thuộc của nó vào một container duy nhất, giúp dễ dàng triển khai trên bất kỳ môi trường nào mà không cần lo lắng về sự khác biệt giữa các môi trường.",[421,1536,1537],{"type":423},[389,1538,1539],{},"Đây là một số Dockerfile cho các dự án thường gặp, bạn có thể tham khảo và điều chỉnh theo nhu cầu của mình.",[389,1541,1542,1543],{},"Nội dung bài viết được tổng hợp và tích góp từ nhiều nguồn khác nhau, bao gồm cả các dự án thực tế mà mình đã làm.\n",[451,1544],{},[1367,1546,268],{"id":1547},"dockerfile-cho-nodejs",[389,1549,1550],{},"Dockerfile cho Node.js rất quan trọng khi triển khai ứng dụng JavaScript phía server. Đây là một Dockerfile đã được tối ưu cho một dự án Node.js điển hình:",[70,1552],{":files":1553},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\nCOPY package*.json ./\\n\\nRUN npm ci --only=production\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"server.js\\\"]\\n\"}]",[389,1555,1556,1557,1560],{},"Cách 2, sử dụng ",[21,1558,1559],{},"pm2",". Về cơ bản thì cách này nhẹ hơn kha khá so với npm",[70,1562],{":files":1563},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci --only=production\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nRUN npm install -g pm2\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"pm2-runtime\\\", \\\"start\\\", \\\"server.js\\\"]\\n\"}]",[1367,1565,273],{"id":1566},"dockerfile-nodejs-nestjs",[70,1568],{":files":1569},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\n\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app/dist ./dist\\n\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"dist/main\\\"]\\n\"}]",[1367,1571,277],{"id":1572},"dockerfile-nodejs-expressjs",[70,1574],{":files":1575},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\n\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"index.js\\\"]\\n\"}]",[1367,1577,281],{"id":1578},"dockerfile-reactjs",[389,1580,1581],{},"Có thể sử dụng Dockerfile này cho các dự án như Vue, Angular,...",[389,1583,1584,1586],{},[456,1585,750],{}," ở đây thư mục chứa nginx/nginx.conf đặt cùng cấp với Dockerfile",[70,1588],{":files":1589},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\nWORKDIR /app\\n\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM nginx:alpine\\n\\nCOPY --from=build /app/build /usr/share/nginx/html\\nCOPY nginx.conf /etc/nginx/nginx.conf\\n\\nEXPOSE 3000\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\"},{\"title\":\"nginx.conf\",\"language\":\"nginx\",\"content\":\"worker_processes auto;\\nerror_log /var/log/nginx/error.log warn;\\npid /var/run/nginx.pid;\\n\\nevents {\\n    worker_connections 1024;\\n}\\n\\nhttp {\\n    include /etc/nginx/mime.types;\\n    default_type application/octet-stream;\\n\\n    log_format main '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n                  '$status $body_bytes_sent \\\"$http_referer\\\" '\\n                  '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\n\\n    access_log /var/log/nginx/access.log main;\\n\\n    server_tokens off;\\n\\n    gzip on;\\n    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n\\n    server {\\n        listen 3000;  # Lắng nghe trên cổng 3000\\n        server_name localhost;\\n\\n        root /usr/share/nginx/html;\\n        index index.html;\\n\\n        location / {\\n            try_files $uri $uri/ /index.html;\\n        }\\n\\n        location ~* \\\\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {\\n            expires 1y;\\n            add_header Cache-Control \\\"public, no-transform\\\";\\n        }\\n\\n        error_page 404 /404.html;\\n        location = /404.html {\\n            internal;\\n        }\\n\\n        error_page 500 502 503 504 /50x.html;\\n        location = /50x.html {\\n            internal;\\n        }\\n\\n        location ~ /\\\\.ht {\\n            deny all;\\n        }\\n\\n        add_header X-Frame-Options \\\"SAMEORIGIN\\\";\\n        add_header X-Content-Type-Options \\\"nosniff\\\";\\n        add_header X-XSS-Protection \\\"1; mode=block\\\";\\n        add_header Referrer-Policy \\\"no-referrer-when-downgrade\\\";\\n        add_header Content-Security-Policy \\\"default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; font-src 'self'; connect-src 'self'; frame-ancestors 'self';\\\";\\n    }\\n}\\n\"}]",[1367,1591,286],{"id":1592},"dockerfile-cho-php-với-laravel",[389,1594,1595,1597,1598,415,1601,1604],{},[456,1596,750],{}," thư mục ",[456,1599,1600],{},"conf/nginx.conf",[456,1602,1603],{},"conf/supervisord.conf"," cùng cấp với Dockerfile",[70,1606],{":files":1607},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Composer Dependencies\\nFROM composer:2 AS composer\\n\\nWORKDIR /app\\nCOPY composer.json composer.lock ./\\n\\nRUN composer install --no-dev --optimize-autoloader --no-interaction\\n\\n# Stage 2: Build\\nFROM php:8.2-fpm-alpine AS php\\n\\nWORKDIR /var/www/html\\nCOPY --from=composer /app/vendor ./vendor\\nCOPY . .\\n\\nRUN apk add --no-cache \\\\\\n        libzip-dev \\\\\\n        libpng-dev \\\\\\n        libjpeg-turbo-dev \\\\\\n        freetype-dev \\\\\\n        && docker-php-ext-configure gd --with-freetype --with-jpeg \\\\\\n        && docker-php-ext-install -j$(nproc) gd pdo_mysql zip opcache\\n\\nRUN { \\\\\\n        echo 'opcache.enable=1'; \\\\\\n        echo 'opcache.revalidate_freq=0'; \\\\\\n        echo 'opcache.validate_timestamps=1'; \\\\\\n        echo 'opcache.max_accelerated_files=10000'; \\\\\\n        echo 'opcache.memory_consumption=192'; \\\\\\n        echo 'opcache.max_wasted_percentage=10'; \\\\\\n        echo 'opcache.interned_strings_buffer=16'; \\\\\\n        echo 'opcache.fast_shutdown=1'; \\\\\\n    } > /usr/local/etc/php/conf.d/opcache-recommended.ini\\n\\nRUN chown -R www-data:www-data /var/www/html/storage /var/www/html/bootstrap/cache\\n\\n# Stage 3: Nginx và Supervisord\\nFROM nginx:alpine AS nginx\\n\\nWORKDIR /var/www/html\\nCOPY --from=php /var/www/html /var/www/html\\nCOPY conf/nginx.conf /etc/nginx/conf.d/default.conf\\n\\nRUN apk add --no-cache supervisor\\n\\nCOPY conf/supervisord.conf /etc/supervisor/conf.d/supervisord.conf\\n\\nEXPOSE 80\\nCMD [\\\"supervisord\\\", \\\"-c\\\", \\\"/etc/supervisor/conf.d/supervisord.conf\\\"]\\n\"},{\"title\":\"nginx.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80;\\n  server_name localhost;\\n\\n  root /var/www/html/public;\\n  index index.php index.html index.htm;\\n\\n  location / {\\n      try_files $uri $uri/ /index.php?$query_string;\\n  }\\n\\n  location ~ \\\\.php$ {\\n      include fastcgi_params;\\n      fastcgi_pass 127.0.0.1:9000;\\n      fastcgi_index index.php;\\n      fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n  }\\n\\n  location ~ /\\\\.ht {\\n      deny all;\\n  }\\n\\n  error_log /var/log/nginx/error.log;\\n  access_log /var/log/nginx/access.log;\\n}\\n\"},{\"title\":\"conf/supervisord.conf\",\"language\":\"ini\",\"content\":\"[supervisord]\\nnodaemon=true\\n\\n[program:php-fpm]\\ncommand=php-fpm\\nautostart=true\\nautorestart=true\\nstderr_logfile=/var/log/php-fpm.err.log\\nstdout_logfile=/var/log/php-fpm.out.log\\n\\n[program:nginx]\\ncommand=nginx -g \\\"daemon off;\\\"\\nautostart=true\\nautorestart=true\\nstderr_logfile=/var/log/nginx.err.log\\nstdout_logfile=/var/log/nginx.out.log\\n\"}]",[1367,1609,291],{"id":1610},"dockerfile-cho-nextjs",[70,1612],{":files":1613},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"# Stage 1: Build\\nFROM node:18-alpine AS build\\n\\nWORKDIR /app\\nCOPY package*.json ./\\n\\nRUN npm ci\\n\\nCOPY . .\\n\\nRUN npm run build\\n\\n# Stage 2: Run\\nFROM node:18-alpine\\n\\nWORKDIR /app\\nCOPY --from=build /app/node_modules ./node_modules\\nCOPY --from=build /app .\\n\\nENV NODE_ENV=production\\nENV PORT=3000\\n\\nEXPOSE 3000\\nCMD [\\\"npm\\\", \\\"start\\\"]\\n\"},{\"title\":\"conf/nginx.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 3000;\\n    server_name localhost;\\n\\n    location / {\\n        proxy_pass http://localhost:3000;\\n        proxy_http_version 1.1;\\n        proxy_set_header Upgrade $http_upgrade;\\n        proxy_set_header Connection 'upgrade';\\n        proxy_set_header Host $host;\\n        proxy_cache_bypass $http_upgrade;\\n    }\\n}\\n\"}]",[1367,1615,295],{"id":1616},"đang-cập-nhật",[389,1618,1619,1620,1624],{},"Nếu bạn có các cấu hình hoặc Dockerfile khác muốn chia sẻ, vui lòng gửi email về ",[26,1621,1623],{"href":1622},"mailto:vinhtieng123@gmail.com","vinhtieng123@gmail.com",". Mình rất trân trọng điều đó.",{"title":74,"searchDepth":75,"depth":75,"links":1626},[1627,1628,1629,1630,1631,1632,1633],{"id":1547,"depth":75,"text":268},{"id":1566,"depth":75,"text":273},{"id":1572,"depth":75,"text":277},{"id":1578,"depth":75,"text":281},{"id":1592,"depth":75,"text":286},{"id":1610,"depth":75,"text":291},{"id":1616,"depth":75,"text":295},"Tìm hiểu về Docker và khám phá các Dockerfile phổ biến cho nhiều dự án như Node.js, PHP với Laravel, React, Vue, Nuxt và Next.js. Khám phá các kỹ thuật tối ưu và thực hành tốt nhất.","/images/blog/common-docker-file/banner.webp","docker, dockerfile, file docker mẫu, dockerfile cho nodejs, dockerfile cho php, dockerfile cho react, dockerfile cho vue, dockerfile cho nuxt, dockerfile cho next",{},{"title":263,"description":1634},"blog/common-docker-file",[1641],"docker","ngoWrLm6syqa7aWjq2s0Or4XmD2WS_C5jmz1Gb9eNJc",{"id":382,"title":300,"body":1644,"date":77,"description":302,"extension":79,"image":697,"keywords":698,"meta":1855,"navigation":83,"path":299,"published":83,"seo":1856,"stem":701,"tags":1857,"__hash__":703},{"type":7,"value":1645,"toc":1853},[1646,1648,1650,1657,1659,1667,1671,1673,1687,1689,1693,1699,1701,1703,1709,1719,1721,1723,1735,1737,1741,1743,1745,1747,1749,1759,1761,1763,1771,1777,1779,1781,1793,1797,1802,1804,1806,1820,1822,1824,1826,1828,1832,1834,1836],[10,1647,305],{"id":387},[389,1649,391],{},[389,1651,1652],{},[395,1653,397,1654],{},[26,1655,400],{"href":400,"rel":1656},[30],[10,1658,310],{"id":404},[389,1660,407,1661,411,1663,415,1665,419],{},[21,1662,410],{},[21,1664,414],{},[21,1666,418],{},[421,1668,1669],{"type":423},[389,1670,426],{},[389,1672,429],{},[15,1674,1675,1679,1683],{},[18,1676,434,1677],{},[21,1678,437],{},[18,1680,440,1681],{},[21,1682,443],{},[18,1684,446,1685],{},[21,1686,449],{},[451,1688],{},[389,1690,1691],{},[456,1692,458],{},[15,1694,1695],{},[18,1696,1697,465],{},[456,1698,410],{},[389,1700,468],{},[70,1702],{":files":471},[15,1704,1705],{},[18,1706,1707,478],{},[456,1708,414],{},[421,1710,1711],{"type":423},[389,1712,483,1713,411,1715,411,1717,493],{},[21,1714,486],{},[21,1716,489],{},[21,1718,492],{},[389,1720,496],{},[70,1722],{":files":499},[15,1724,1725],{},[18,1726,1727,506,1729,415,1731,511,1733],{},[456,1728,418],{},[21,1730,410],{},[21,1732,414],{},[70,1734],{":files":514},[10,1736,315],{"id":517},[389,1738,520,1739,524],{},[21,1740,523],{},[389,1742,527],{},[70,1744],{":files":530},[389,1746,533],{},[70,1748],{":files":536},[389,1750,539,1751,415,1753,544,1755,415,1757,549],{},[21,1752,410],{},[21,1754,414],{},[21,1756,410],{},[21,1758,414],{},[389,1760,552],{},[70,1762],{":files":555},[389,1764,558,1765,562,1767,566,1769,570],{},[21,1766,561],{},[21,1768,565],{},[21,1770,569],{},[389,1772,573,1773,577,1775,581],{},[21,1774,576],{},[21,1776,580],{},[389,1778,584],{},[70,1780],{":files":587},[389,1782,590,1783,594,1785,415,1787,601,1789,604,1791,607],{},[21,1784,593],{},[21,1786,597],{},[21,1788,600],{},[21,1790,597],{},[21,1792,600],{},[421,1794,1795],{"type":610},[389,1796,613],{},[389,1798,616,1799,622],{},[26,1800,621],{"href":619,"rel":1801},[30],[10,1803,320],{"id":625},[389,1805,628],{},[630,1807,1808,1810,1812],{},[18,1809,634],{},[18,1811,637],{},[18,1813,640,1814],{},[15,1815,1816,1818],{},[18,1817,645],{},[18,1819,648],{},[70,1821],{":files":651},[389,1823,654],{},[70,1825],{":files":657},[10,1827,325],{"id":660},[389,1829,663,1830,666],{},[21,1831,523],{},[389,1833,669],{},[10,1835,330],{"id":672},[15,1837,1838,1843,1848],{},[18,1839,1840],{},[26,1841,681],{"href":679,"rel":1842},[30],[18,1844,1845],{},[26,1846,688],{"href":686,"rel":1847},[30],[18,1849,1850],{},[26,1851,523],{"href":693,"rel":1852},[30],{"title":74,"searchDepth":75,"depth":75,"links":1854},[],{},{"title":300,"description":302},[88],{"id":1859,"title":335,"body":1860,"date":2040,"description":337,"extension":79,"image":2041,"keywords":2042,"meta":2043,"navigation":83,"path":334,"published":83,"seo":2044,"stem":2045,"tags":2046,"__hash__":2049},"blog/blog/use-effect-and-use-layout-effect.md",{"type":7,"value":1861,"toc":2034},[1862,1865,1873,1875,1878,1884,1899,1904,1921,1926,1937,1941,1955,1960],[10,1863,340],{"id":1864},"useeffect-và-uselayouteffect-trong-react",[389,1866,1867,1868,415,1870,1872],{},"React cung cấp hai hook mạnh mẽ để xử lý hiệu ứng phụ: ",[21,1869,349],{},[21,1871,355],{},". Tuy chúng có cú pháp giống nhau, nhưng cách chúng hoạt động khác biệt và ảnh hưởng trực tiếp đến trải nghiệm người dùng cũng như hiệu suất của ứng dụng.",[718,1874],{},[1367,1876,345],{"id":1877},"tóm-tắt-quy-trình-thực-thi",[1879,1880,1882],"h3",{"id":1881},"useeffect",[21,1883,349],{},[15,1885,1886,1892],{},[18,1887,1888,1889,549],{},"Chạy ",[456,1890,1891],{},"sau khi React cập nhật DOM xong và render UI xong",[18,1893,1894,1895,1898],{},"Thích hợp cho các ",[456,1896,1897],{},"tác vụ không ảnh hưởng trực tiếp đến layout",", như gọi API, đăng ký sự kiện, log, animation nhẹ…",[389,1900,1901],{},[456,1902,1903],{},"Quy trình:",[630,1905,1906,1909,1912,1915,1918],{},[18,1907,1908],{},"Cập nhật lại state",[18,1910,1911],{},"Cập nhật DOM (mutated)",[18,1913,1914],{},"React render lại UI",[18,1916,1917],{},"Clean up nếu có",[18,1919,1920],{},"Gọi useEffect callback",[1879,1922,1924],{"id":1923},"uselayouteffect",[21,1925,355],{},[15,1927,1928,1934],{},[18,1929,1930,1931,549],{},"Chạy ngay sau khi DOM được cập nhật, nhưng ",[456,1932,1933],{},"trước khi browser vẽ lại giao diện (paint)",[18,1935,1936],{},"Dùng khi bạn cần đo lường DOM, thay đổi layout hoặc ngăn nhấp nháy giao diện.",[389,1938,1939],{},[456,1940,1903],{},[630,1942,1943,1945,1947,1950,1953],{},[18,1944,1908],{},[18,1946,1911],{},[18,1948,1949],{},"Clean up nếu dependencies thay đổi",[18,1951,1952],{},"Gọi useLayoutEffect callback",[18,1954,1914],{},[389,1956,1957],{},[456,1958,1959],{},"Khi nào dùng cái nào?",[1961,1962,1963,1976],"table",{},[1964,1965,1966],"thead",{},[1967,1968,1969,1973],"tr",{},[1970,1971,1972],"th",{},"Tình huống",[1970,1974,1975],{},"Nên dùng",[1977,1978,1979,1989,1998,2007,2016,2025],"tbody",{},[1967,1980,1981,1985],{},[1982,1983,1984],"td",{},"Gọi API, thao tác không ảnh hưởng layout",[1982,1986,1987],{},[21,1988,349],{},[1967,1990,1991,1994],{},[1982,1992,1993],{},"Đo kích thước DOM, scroll, position",[1982,1995,1996],{},[21,1997,355],{},[1967,1999,2000,2003],{},[1982,2001,2002],{},"Cập nhật class, focus vào input",[1982,2004,2005],{},[21,2006,355],{},[1967,2008,2009,2012],{},[1982,2010,2011],{},"Hiệu ứng animation nhẹ sau render",[1982,2013,2014],{},[21,2015,349],{},[1967,2017,2018,2021],{},[1982,2019,2020],{},"Ngăn nháy layout (flicker) khi hiển thị components",[1982,2022,2023],{},[21,2024,355],{},[1967,2026,2027,2030],{},[1982,2028,2029],{},"Cập nhật DOM trước khi browser vẽ lại",[1982,2031,2032],{},[21,2033,355],{},{"title":74,"searchDepth":75,"depth":75,"links":2035},[2036],{"id":1877,"depth":75,"text":345,"children":2037},[2038,2039],{"id":1881,"depth":352,"text":349},{"id":1923,"depth":352,"text":355},"2025-05-06T00:00:00.000Z","/images/blog/use-effect-and-use-layout-effect/banner.webp","react, useEffect, useLayoutEffect, react hooks, hiệu năng react",{},{"title":335,"description":337},"blog/use-effect-and-use-layout-effect",[2047,2048],"react","hooks","HXO6Sisd7tUFKWbj14nolEED4VvAwDgBBQlMW2pMGXc",{"id":4,"title":5,"body":2051,"date":77,"description":78,"extension":79,"image":80,"keywords":81,"meta":2092,"navigation":83,"path":84,"published":83,"seo":2093,"stem":86,"tags":2094,"__hash__":89},{"type":7,"value":2052,"toc":2090},[2053,2055,2076,2078,2082,2084],[10,2054,13],{"id":12},[15,2056,2057,2064,2068,2072],{},[18,2058,2059,24,2061,32],{},[21,2060,23],{},[26,2062,31],{"href":28,"rel":2063},[30],[18,2065,2066,38],{},[21,2067,37],{},[18,2069,2070,44],{},[21,2071,43],{},[18,2073,2074,50],{},[21,2075,49],{},[10,2077,54],{"id":53},[15,2079,2080],{},[18,2081,59],{},[10,2083,63],{"id":62},[15,2085,2086],{},[18,2087,68,2088],{},[70,2089],{":files":72},{"title":74,"searchDepth":75,"depth":75,"links":2091},[],{},{"title":5,"description":78},[88],{"id":2096,"title":372,"body":2097,"date":2040,"description":374,"extension":79,"image":2139,"keywords":2140,"meta":2141,"navigation":83,"path":371,"published":83,"seo":2142,"stem":2143,"tags":2144,"__hash__":2146},"blog/blog/useful-script.md",{"type":7,"value":2098,"toc":2137},[2099,2102,2107,2114,2117,2125,2128,2131,2134],[10,2100,377],{"id":2101},"nén-ảnh-và-convert-ảnh-sang-định-dạng-webp",[15,2103,2104],{},[18,2105,2106],{},"Cài đặt cwebp",[389,2108,2109,2110],{},"Đối với window thì có thể xem hướng dẫn tại: ",[26,2111,2112],{"href":2112,"rel":2113},"https://developers.google.com/speed/webp/download?hl=vi",[30],[70,2115],{":files":2116},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"# Cài đặt cwebp trên Ubuntu\\nsudo apt-get install webp\\n# Cài đặt cwebp trên MacOS\\nbrew install webp\\n\"}]",[15,2118,2119],{},[18,2120,2121,2122],{},"Script nén ảnh",[70,2123],{":files":2124},"[{\"title\":\"compress-image.sh\",\"language\":\"bash\",\"content\":\"#!/bin/bash\\n# Kiểm tra đối số đầu vào\\nif [ -z \\\"$1\\\" ]; then\\n  echo \\\"❌ Vui lòng cung cấp đường dẫn file ảnh.\\\"\\n  echo \\\"👉 Ví dụ: ./compress-local-image.sh ./image.png\\\"\\n  exit 1\\nfi\\n\\nINPUT=\\\"$1\\\"\\n\\n# Kiểm tra file tồn tại\\nif [ ! -f \\\"$INPUT\\\" ]; then\\n  echo \\\"❌ File không tồn tại: $INPUT\\\"\\n  exit 1\\nfi\\n\\n# Lấy tên file\\nBASENAME=$(basename \\\"$INPUT\\\")\\nFILENAME=\\\"${BASENAME%.*}\\\"\\nEXT=\\\"${BASENAME##*.}\\\"\\n\\n# Nén và chuyển sang WebP\\necho \\\"🔄 Đang nén và chuyển sang WebP...\\\"\\ncwebp -q 80 \\\"$INPUT\\\" -o \\\"${FILENAME}.webp\\\"\\n\\necho \\\"✅ Đã tạo file: ${FILENAME}.webp\\\"\\n\"}]",[389,2126,2127],{},"Sau khi tạo xong file, cần phải gán quyền thực thi cho file script bằng lệnh sau:",[70,2129],{":files":2130},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"chmod +x compress-image.sh\\n\"}]",[389,2132,2133],{},"Sau đó có thể chạy script để có thể thực hiện nén ảnh và chuyển đổi sang định dạng webp.",[70,2135],{":files":2136},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"./compress-image.sh ./image.png\\n\"}]",{"title":74,"searchDepth":75,"depth":75,"links":2138},[],"/images/blog/useful-script/banner.webp","scripts, useful scripts",{},{"title":372,"description":374},"blog/useful-script",[2145],"scripts","p2CPfckDeoI2knSQ-ynr8rSQk_PPFQZKh6qH2TkcMP0",1746583197463]