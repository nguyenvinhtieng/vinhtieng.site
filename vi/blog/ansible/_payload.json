[{"data":1,"prerenderedAt":1608},["ShallowReactive",2],{"blog-ansible":3,"search":191,"related-posts-ansible":442,"all-post":443},{"id":4,"title":5,"body":6,"date":179,"description":180,"extension":181,"image":182,"meta":183,"navigation":184,"path":185,"published":184,"seo":186,"stem":187,"tags":188,"__hash__":190},"blog/blog/ansible.md","Tổng quan và cấu hình Ansible",{"type":7,"value":8,"toc":176},"minimal",[9,16,19,22,27,30,34,37,40,42,46,49,52,63,65,69,72,75,77,81,88,97,100,108,111,113,117,120,123,128,131,133,137,163,165,168,173],[10,11,12],"p",{},[13,14,15],"strong",{},"Hướng dẫn chi tiết về cài đặt và triển khai Ansible",[10,17,18],{},"Ansible là một công cụ tự động hóa mạnh mẽ, giúp quản lý cấu hình, triển khai ứng dụng và điều phối hệ thống một cách dễ dàng. Trong bài viết này, chúng ta sẽ tìm hiểu cách cài đặt, cấu hình và sử dụng Ansible thông qua các ví dụ thực tế.",[20,21],"hr",{},[23,24,26],"h1",{"id":25},"️-cài-đặt-ansible","🛠️ Cài đặt Ansible",[10,28,29],{},"Hướng dẫn cài đặt Ansible trên Ubuntu:",[31,32],"code-block",{":files":33},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo apt update -y\\nsudo apt install software-properties-common -y\\nsudo apt-add-repository --yes --update ppa:ansible/ansible\\nsudo apt install ansible -y\\n\"}]",[10,35,36],{},"Sau khi cài đặt, bạn có thể kiểm tra phiên bản Ansible:",[31,38],{":files":39},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible --version\"}]",[20,41],{},[23,43,45],{"id":44},"cấu-hình-ssh","🔑 Cấu hình SSH",[10,47,48],{},"Để Ansible có thể kết nối đến các máy chủ từ xa, bạn cần cấu hình SSH. Dưới đây là cách sao chép SSH key đến máy chủ khác:",[31,50],{":files":51},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ssh-copy-id -i ~/.ssh/id_rsa.pub vinhtieng@123.3123.12\"}]",[10,53,54,57,58,62],{},[13,55,56],{},"Lưu ý:"," Thay ",[59,60,61],"code",{},"vinhtieng@123.3123.12"," bằng tên người dùng và địa chỉ IP của máy chủ từ xa.",[20,64],{},[23,66,68],{"id":67},"hosts-inventory","📋 Hosts - Inventory",[10,70,71],{},"File inventory là nơi bạn định nghĩa danh sách các máy chủ mà Ansible sẽ quản lý. Đây là một ví dụ cơ bản:",[31,73],{":files":74},"[{\"title\":\"inventory\",\"language\":\"ini\",\"content\":\"[webservers]\\nweb1.example.com\\nweb2.example.com\\n\\n[databases]\\ndb1.example.com\\n\\n[webservers:vars]\\nansible_user=your_ssh_user\\nansible_ssh_private_key_file=/path/to/private/key\\n\\n[webservers1]\\nweb1.example.com ansible_user=user1 ansible_ssh_private_key_file=/path/to/key1\\nweb2.example.com ansible_user=user2 ansible_ssh_private_key_file=/path/to/key2\\n\"}]",[20,76],{},[23,78,80],{"id":79},"kiểm-tra-kết-nối-ping","🏓 Kiểm tra kết nối (Ping)",[10,82,83,84,87],{},"Bạn có thể kiểm tra kết nối đến các máy chủ bằng lệnh ",[59,85,86],{},"ping",":",[89,90,91],"ol",{},[92,93,94],"li",{},[13,95,96],{},"Ping với file hosts mặc định:",[31,98],{":files":99},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -m ping all\"}]",[89,101,103],{"start":102},2,[92,104,105],{},[13,106,107],{},"Ping với file inventory tùy chỉnh:",[31,109],{":files":110},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible -i my_hosts all -m ping\"}]",[20,112],{},[23,114,116],{"id":115},"playbook-task-module","📜 Playbook - Task - Module",[10,118,119],{},"Playbook là nơi bạn định nghĩa các tác vụ (tasks) cần thực hiện trên các máy chủ. Dưới đây là cách chạy một playbook:",[31,121],{":files":122},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ansible-playbook my_playbook.yml -i inventory_file\"}]",[10,124,125],{},[13,126,127],{},"Ví dụ về Playbook đơn giản:",[31,129],{":files":130},"[{\"title\":\"my_playbook.yml\",\"language\":\"yaml\",\"content\":\"---\\n- name: Cài đặt và khởi động Apache\\n  hosts: webservers\\n  become: yes\\n  tasks:\\n    - name: Cài đặt Apache\\n      apt:\\n        name: apache2\\n        state: present\\n    - name: Đảm bảo Apache đang chạy\\n      service:\\n        name: apache2\\n        state: started\\n\"}]",[20,132],{},[23,134,136],{"id":135},"tài-liệu-tham-khảo","📚 Tài liệu tham khảo",[138,139,140,149,156],"ul",{},[92,141,142],{},[143,144,148],"a",{"href":145,"rel":146},"https://docs.ansible.com/",[147],"nofollow","Ansible Documentation",[92,150,151],{},[143,152,155],{"href":153,"rel":154},"https://galaxy.ansible.com/",[147],"Ansible Galaxy",[92,157,158],{},[143,159,162],{"href":160,"rel":161},"https://docs.ansible.com/ansible/latest/user_guide/playbooks.html",[147],"Ansible Playbook Guide",[20,164],{},[166,167],"br",{},[10,169,170],{},[13,171,172],{},"Tóm lại:",[10,174,175],{},"Ansible là công cụ mạnh mẽ giúp tự động hóa các tác vụ quản trị hệ thống. Việc nắm vững cách sử dụng Ansible sẽ giúp bạn tiết kiệm thời gian và giảm thiểu lỗi trong quá trình quản lý hệ thống.",{"title":177,"searchDepth":102,"depth":102,"links":178},"",[],"2025-04-25T00:00:00.000Z","Hướng dẫn chi tiết về cài đặt, cấu hình SSH, inventory và sử dụng Playbook trong Ansible.","md","/images/blog/ansible/banner.webp",{},true,"/blog/ansible",{"title":5,"description":180},"blog/ansible",[189],"ansible","QLdDCES4ar5K9ObyqIX8AeZrR8-g_7S6VB95J6m5f4w",[192,196,200,204,207,211,215,219,224,229,234,239,244,249,254,259,264,269,274,278,283,288,293,298,303,308,313,318,323,328,333,338,343,348,353,358,363,368,373,378,383,388,393,398,403,408,413,418,423,428,433,438],{"id":185,"title":5,"titles":193,"content":194,"level":195},[],"Hướng dẫn chi tiết về cài đặt, cấu hình SSH, inventory và sử dụng Playbook trong Ansible. Hướng dẫn chi tiết về cài đặt và triển khai Ansible Ansible là một công cụ tự động hóa mạnh mẽ, giúp quản lý cấu hình, triển khai ứng dụng và điều phối hệ thống một cách dễ dàng. Trong bài viết này, chúng ta sẽ tìm hiểu cách cài đặt, cấu hình và sử dụng Ansible thông qua các ví dụ thực tế.",1,{"id":197,"title":26,"titles":198,"content":199,"level":195},"/blog/ansible#️-cài-đặt-ansible",[],"Hướng dẫn cài đặt Ansible trên Ubuntu: Sau khi cài đặt, bạn có thể kiểm tra phiên bản Ansible:",{"id":201,"title":45,"titles":202,"content":203,"level":195},"/blog/ansible#cấu-hình-ssh",[],"Để Ansible có thể kết nối đến các máy chủ từ xa, bạn cần cấu hình SSH. Dưới đây là cách sao chép SSH key đến máy chủ khác: Lưu ý: Thay vinhtieng@123.3123.12 bằng tên người dùng và địa chỉ IP của máy chủ từ xa.",{"id":205,"title":68,"titles":206,"content":71,"level":195},"/blog/ansible#hosts-inventory",[],{"id":208,"title":80,"titles":209,"content":210,"level":195},"/blog/ansible#kiểm-tra-kết-nối-ping",[],"Bạn có thể kiểm tra kết nối đến các máy chủ bằng lệnh ping: Ping với file hosts mặc định: Ping với file inventory tùy chỉnh:",{"id":212,"title":116,"titles":213,"content":214,"level":195},"/blog/ansible#playbook-task-module",[],"Playbook là nơi bạn định nghĩa các tác vụ (tasks) cần thực hiện trên các máy chủ. Dưới đây là cách chạy một playbook: Ví dụ về Playbook đơn giản:",{"id":216,"title":136,"titles":217,"content":218,"level":195},"/blog/ansible#tài-liệu-tham-khảo",[],"Ansible DocumentationAnsible GalaxyAnsible Playbook Guide Tóm lại: Ansible là công cụ mạnh mẽ giúp tự động hóa các tác vụ quản trị hệ thống. Việc nắm vững cách sử dụng Ansible sẽ giúp bạn tiết kiệm thời gian và giảm thiểu lỗi trong quá trình quản lý hệ thống.",{"id":220,"title":221,"titles":222,"content":223,"level":195},"/blog/basic-nginx","Tổng quan và cấu hình thông dụng Nginx",[],"Hướng dẫn chi tiết về cấu hình mặc định, PHP-FPM và thiết lập Load Balancer với Nginx. Hướng dẫn chi tiết về cấu hình và triển khai Nginx Nginx là một web server mã nguồn mở mạnh mẽ, được sử dụng phổ biến để phục vụ nội dung tĩnh, reverse proxy, cân bằng tải, bảo mật và hỗ trợ PHP thông qua FastCGI. Trong bài viết này, chúng ta sẽ đi qua các cấu hình từ cơ bản đến nâng cao, bao gồm: Cách cài đặt NginxCấu hình máy chủ mặc định (default host)Tích hợp với PHP-FPMThiết lập Load Balancer (cân bằng tải)Gzip, HTTP/2, Rate limitingRedirect, RewritesHardening & SecurityLogging nâng cao",{"id":225,"title":226,"titles":227,"content":228,"level":195},"/blog/basic-nginx#️-cài-đặt-nginx","🛠️ Cài đặt Nginx",[],"Hướng dẫn cài đặt Nginx trên Ubuntu: Sau khi cài đặt, bạn có thể kiểm tra trạng thái Nginx: Kiểm tra tường lửa: Sau khi cài đặt Nginx, bạn nên đảm bảo rằng tường lửa (firewall) cho phép lưu lượng HTTP và HTTPS để máy chủ có thể phục vụ nội dung web. Lệnh sudo ufw allow 'Nginx Full' sẽ mở cả hai cổng 80 (HTTP) và 443 (HTTPS).\nSau đó, dùng sudo ufw status để xác nhận rằng các cổng này đã được mở. Nếu bạn chưa bật ufw (Uncomplicated Firewall), bạn có thể bật bằng lệnh sudo ufw enable. Tuy nhiên, hãy đảm bảo cấu hình chính xác để không bị khóa SSH. Kiểm tra hoạt động của Nginx: Mở trình duyệt và truy cập địa chỉ:\n👉 http://\u003Cđịa_chỉ_IP_của_bạn> hoặc http://localhost nếu kiểm tra cục bộ. Bạn sẽ thấy trang mặc định “Welcome to nginx!” nếu mọi thứ hoạt động đúng cách.",{"id":230,"title":231,"titles":232,"content":233,"level":195},"/blog/basic-nginx#️-cấu-hình-default-host-trong-nginx","⚙️ Cấu hình Default Host trong Nginx",[],"Trên Ubuntu, file cấu hình của Nginx thường được lưu tại các vị trí sau: /etc/nginx/sites-available/default (Nếu sử dụng thư mục sites-available và sites-enabled)./etc/nginx/conf.d/default.conf (Thông dụng cho các cấu hình đơn giản). Mặc định, khi cài đặt Nginx, sẽ có một file cấu hình default trong thư mục /etc/nginx/sites-available/ với một số cấu hình cơ bản. Bạn có thể sửa file này để cấu hình server block cho website của mình. Cấu hình Default Host Mở file cấu hình Nginx mặc định: Mặc định, Nginx sẽ chọn block đầu tiên khi không tìm thấy server_name tương ứng. Để cấu hình rõ ràng host mặc định, bạn thêm default_server vào dòng listen: Ghi chú: listen 80 default_server;: Cấu hình Nginx lắng nghe cổng 80 (HTTP) và đánh dấu đây là default_server (server mặc định cho các yêu cầu không khớp với server block khác).root /var/www/html;: Đường dẫn tới thư mục chứa các tệp tin của website. Bạn có thể thay đổi đường dẫn này thành thư mục của website bạn muốn phục vụ.server_name _;: Chỉ thị này cho phép server chấp nhận tất cả các yêu cầu không khớp với server block khác. Nếu bạn có tên miền cụ thể, hãy thay thế dấu gạch dưới (_) bằng tên miền của bạn.location /: Đây là phần cấu hình định tuyến cho các yêu cầu đến. Cấu hình này giúp Nginx tìm kiếm các tệp tin khi người dùng truy cập vào website.try_files $uri $uri/ =404;: Nếu yêu cầu không trùng khớp với tệp tin hoặc thư mục, sẽ trả về lỗi 404. Sau khi chỉnh sửa xong, bạn cần kiểm tra xem cấu hình có chính xác không: Nếu không có lỗi nào, bạn có thể khởi động lại Nginx để áp dụng cấu hình mới: Giới thiệu về sites-available và sites-enabled Trong Nginx, thư mục sites-available và sites-enabled là một cơ chế để quản lý các website (virtual hosts) mà Nginx có thể phục vụ. Cấu trúc này giúp dễ dàng bật/tắt các website mà không cần phải xóa hoặc thay đổi cấu hình trực tiếp. sites-available: Đây là nơi bạn tạo và lưu trữ tất cả các file cấu hình của các website hoặc ứng dụng mà bạn muốn Nginx phục vụ.Mỗi file cấu hình trong sites-available đại diện cho một website hoặc ứng dụng riêng biệt.Ví dụ: /etc/nginx/sites-available/example.com là cấu hình cho website example.com. sites-enabled: Đây là nơi chứa các liên kết tượng trưng (symlink) đến các file cấu hình trong sites-available mà bạn muốn Nginx thực thi.Các liên kết này cho phép Nginx biết được website nào sẽ được kích hoạt.Bạn không nên trực tiếp chỉnh sửa các file trong sites-enabled. Thay vào đó, bạn tạo symlink từ sites-available. Cách thức hoạt động: Khi bạn tạo một file cấu hình trong sites-available, bạn có thể kích hoạt nó bằng cách tạo một symlink đến file đó trong thư mục sites-enabled.Để tạo symlink, sử dụng lệnh ln -s. Ví dụ, nếu bạn có cấu hình example.com trong sites-available, bạn có thể tạo symlink vào sites-enabled như sau:",{"id":235,"title":236,"titles":237,"content":238,"level":195},"/blog/basic-nginx#cấu-hình-nginx-với-php-fpm","🐘 Cấu hình Nginx với PHP-FPM",[],"Để xử lý các file PHP, bạn cần kết nối Nginx với PHP-FPM qua socket hoặc TCP: Lưu ý: Đường dẫn socket có thể thay đổi tùy phiên bản PHP.Nếu dùng TCP:",{"id":240,"title":241,"titles":242,"content":243,"level":195},"/blog/basic-nginx#load-balancer-trong-nginx","🌐 Load Balancer trong Nginx",[],"Nginx hỗ trợ cấu hình cân bằng tải với nhiều thuật toán lựa chọn backend: round-robin: Mặc định, phân phối đều cho các request.least_conn: Chọn server ít kết nối nhất.ip_hash: Duy trì session cho client.least_time: chọn server có thời gian phản hồi ít nhất Có thể thêm trọng số cho server bằng cách thêm số sau ip:port Ex: server 192.168.1.0:8000 weight=3; Cấu hình server block proxy đến upstream:",{"id":245,"title":246,"titles":247,"content":248,"level":195},"/blog/basic-nginx#gzip-compression","📦 Gzip Compression",[],"Bật gzip giúp tăng tốc độ tải trang bằng cách nén nội dung trả về:",{"id":250,"title":251,"titles":252,"content":253,"level":195},"/blog/basic-nginx#kích-hoạt-http2","⚡ Kích hoạt HTTP/2",[],"HTTP/2 cải thiện hiệu suất thông qua multiplexing và header compression:",{"id":255,"title":256,"titles":257,"content":258,"level":195},"/blog/basic-nginx#rate-limiting","🚦 Rate Limiting",[],"Giới hạn số lượng request để tránh DDoS và abuse:",{"id":260,"title":261,"titles":262,"content":263,"level":195},"/blog/basic-nginx#redirect-và-rewrites","🔁 Redirect và Rewrites",[],"Chuyển hướng toàn bộ traffic HTTP sang HTTPS: Viết lại URL cho SPA:",{"id":265,"title":266,"titles":267,"content":268,"level":195},"/blog/basic-nginx#hardening-security","🔐 Hardening & Security",[],"Bảo vệ server bằng cách từ chối truy cập file nhạy cảm: Ẩn thông tin server: Chống clickjacking và XSS:",{"id":270,"title":271,"titles":272,"content":273,"level":195},"/blog/basic-nginx#logging-nâng-cao","📊 Logging nâng cao",[],"Cấu hình custom log format để dễ debug:",{"id":275,"title":136,"titles":276,"content":277,"level":195},"/blog/basic-nginx#tài-liệu-tham-khảo",[],"Nginx DocumentationNginx Load Balancing GuideNginx + PHP-FPM SetupOWASP Nginx Hardening Guide Tóm lại: Nginx là công cụ cực kỳ mạnh mẽ và linh hoạt, không chỉ giới hạn ở web server mà còn là reverse proxy, caching layer, và load balancer. Việc nắm vững và khai thác tốt các tính năng sẽ giúp hệ thống của bạn hiệu suất cao, bảo mật và dễ mở rộng.",{"id":279,"title":280,"titles":281,"content":282,"level":195},"/blog/basic-redis","Cơ Bản Về Redis và Tích Hợp Với Node.js",[],"Tìm hiểu các khái niệm cơ bản về Redis bao gồm các kiểu dữ liệu và phương thức, cũng như cách tích hợp Redis vào ứng dụng Node.js để sử dụng bộ nhớ đệm và các tính năng thời gian thực. Cơ Bản Về Redis và Tích Hợp Với Node.js Redis là một kho dữ liệu key-value trong bộ nhớ, mã nguồn mở, nổi tiếng với hiệu suất và tính linh hoạt. Redis hỗ trợ nhiều kiểu dữ liệu, phù hợp cho việc sử dụng bộ nhớ đệm, ứng dụng thời gian thực, hệ thống pub/sub, và nhiều hơn nữa. Trong hướng dẫn này, chúng ta sẽ tìm hiểu: Các kiểu dữ liệu trong RedisCác lệnh phổ biến của RedisCách tích hợp Redis vào dự án Node.js",{"id":284,"title":285,"titles":286,"content":287,"level":195},"/blog/basic-redis#các-kiểu-dữ-liệu-lệnh-redis","📦 Các Kiểu Dữ Liệu & Lệnh Redis",[],"Redis hỗ trợ nhiều cấu trúc dữ liệu khác nhau:",{"id":289,"title":290,"titles":291,"content":292,"level":102},"/blog/basic-redis#_1-chuỗi-strings","1. Chuỗi (Strings)",[285],"Chuỗi là kiểu dữ liệu cơ bản nhất trong Redis. Bạn có thể lưu trữ bất kỳ giá trị nào dưới dạng chuỗi, bao gồm cả số nguyên và JSON được tuần tự hóa.",{"id":294,"title":295,"titles":296,"content":297,"level":102},"/blog/basic-redis#_2-danh-sách-lists","2. Danh sách (Lists)",[285],"Danh sách là các tập hợp có thứ tự của chuỗi. Bạn có thể thêm phần tử vào đầu hoặc cuối danh sách.",{"id":299,"title":300,"titles":301,"content":302,"level":102},"/blog/basic-redis#_3-tập-hợp-sets","3. Tập hợp (Sets)",[285],"Tập hợp là các tập hợp không có thứ tự của các chuỗi duy nhất. Chúng hỗ trợ các phép toán như hợp, giao, và hiệu.",{"id":304,"title":305,"titles":306,"content":307,"level":102},"/blog/basic-redis#_4-băm-hashes","4. Băm (Hashes)",[285],"Băm là các bản đồ giữa trường chuỗi và giá trị chuỗi, rất lý tưởng để biểu diễn các đối tượng.",{"id":309,"title":310,"titles":311,"content":312,"level":102},"/blog/basic-redis#_5-tập-hợp-có-thứ-tự-sorted-sets","5. Tập hợp có thứ tự (Sorted Sets)",[285],"Tập hợp có thứ tự tương tự như tập hợp nhưng có một điểm số liên kết với mỗi phần tử, cho phép truy xuất theo thứ tự.",{"id":314,"title":315,"titles":316,"content":317,"level":102},"/blog/basic-redis#_6-bitmaps-hyperloglogs-streams","6. Bitmaps, HyperLogLogs, Streams",[285],"Đây là các cấu trúc nâng cao hơn:\nBitmaps được sử dụng cho các thao tác cấp bit, cho phép bạn thao tác các bit riêng lẻ trong một chuỗi. HyperLogLogs được sử dụng để ước tính số lượng phần tử duy nhất trong một tập hợp, rất hữu ích cho các trường hợp như theo dõi số lượng khách truy cập duy nhất. Streams được thiết kế cho các đường dẫn dữ liệu thời gian thực và nguồn sự kiện, cho phép bạn thêm và truy vấn dữ liệu theo chuỗi thời gian.",{"id":319,"title":320,"titles":321,"content":322,"level":195},"/blog/basic-redis#tích-hợp-redis-với-nodejs","🔧 Tích Hợp Redis Với Node.js",[],"Bạn có thể sử dụng thư viện ioredis hoặc redis client phổ biến. Dưới đây là một ví dụ với ioredis.",{"id":324,"title":325,"titles":326,"content":327,"level":102},"/blog/basic-redis#_1-cài-đặt-redis-và-ioredis","1. Cài Đặt Redis và ioredis",[320],"Đảm bảo rằng bạn đã cài đặt và chạy Redis. Bạn có thể sử dụng Docker để chạy Redis một cách dễ dàng:",{"id":329,"title":330,"titles":331,"content":332,"level":102},"/blog/basic-redis#_2-thiết-lập-cơ-bản","2. Thiết Lập Cơ Bản",[320],"Tạo một tệp có tên redis.js và thêm đoạn mã sau:",{"id":334,"title":335,"titles":336,"content":337,"level":102},"/blog/basic-redis#_3-sử-dụng-redis-trong-ứng-dụng","3. Sử Dụng Redis Trong Ứng Dụng",[320],"Bây giờ bạn có thể sử dụng Redis trong ứng dụng của mình. Dưới đây là một ví dụ về việc thiết lập và lấy giá trị:",{"id":339,"title":340,"titles":341,"content":342,"level":102},"/blog/basic-redis#_4-ví-dụ-về-bộ-nhớ-đệm","4. Ví Dụ Về Bộ Nhớ Đệm",[320],"Bạn có thể sử dụng Redis làm bộ nhớ đệm để lưu trữ dữ liệu được truy cập thường xuyên. Dưới đây là một ví dụ về việc lưu trữ kết quả truy vấn cơ sở dữ liệu vào bộ nhớ đệm:",{"id":344,"title":345,"titles":346,"content":347,"level":102},"/blog/basic-redis#_5-kết-luận","5. Kết Luận",[320],"Redis là một công cụ mạnh mẽ cho bộ nhớ đệm và các ứng dụng thời gian thực. Bằng cách tích hợp Redis vào các dự án Node.js, bạn có thể cải thiện đáng kể hiệu suất và khả năng mở rộng. Hướng dẫn này đã bao quát các khái niệm cơ bản về kiểu dữ liệu, lệnh, và cách sử dụng Redis trong ứng dụng Node.js.\nHãy khám phá thêm các tính năng nâng cao như giao dịch, scripting Lua, và clustering khi bạn đã quen thuộc hơn với Redis.\nRedis là một công cụ đa năng có thể nâng cao đáng kể ứng dụng của bạn. Happy Coding",{"id":349,"title":350,"titles":351,"content":352,"level":102},"/blog/basic-redis#_6-tài-nguyên-tham-khảo","6. Tài Nguyên Tham Khảo",[320],"Tài liệu RedisTài liệu ioredis",{"id":354,"title":355,"titles":356,"content":357,"level":195},"/blog/common-docker-file","Các Dockerfile Phổ Biến Cho Nhiều Dự Án Khác Nhau",[],"Tìm hiểu về Docker và khám phá các Dockerfile phổ biến cho nhiều dự án như Node.js, PHP với Laravel, React, Vue, Nuxt và Next.js. Khám phá các kỹ thuật tối ưu và thực hành tốt nhất. Các Dockerfile Phổ Biến Cho Nhiều Dự Án Khác Nhau Docker là một công cụ ảo hóa nhẹ giúp phát triển, triển khai và chạy ứng dụng trong các container. Nó cho phép bạn đóng gói ứng dụng và tất cả các phụ thuộc của nó vào một container duy nhất, giúp dễ dàng triển khai trên bất kỳ môi trường nào mà không cần lo lắng về sự khác biệt giữa các môi trường. Đây là một số Dockerfile cho các dự án thường gặp, bạn có thể tham khảo và điều chỉnh theo nhu cầu của mình.",{"id":359,"title":360,"titles":361,"content":362,"level":102},"/blog/common-docker-file#_1-dockerfile-cho-nodejs","1. Dockerfile cho Node.js",[355],"Dockerfile cho Node.js rất quan trọng khi triển khai ứng dụng JavaScript phía server. Đây là một Dockerfile đã được tối ưu cho một dự án Node.js điển hình:",{"id":364,"title":365,"titles":366,"content":367,"level":102},"/blog/common-docker-file#_2-dockerfile-cho-php-với-laravel","2. Dockerfile cho PHP với Laravel",[355],"Laravel là một framework PHP phổ biến để xây dựng ứng dụng web. Dưới đây là Dockerfile cho một dự án Laravel:",{"id":369,"title":370,"titles":371,"content":372,"level":102},"/blog/common-docker-file#_3-dockerfile-cho-react","3. Dockerfile cho React",[355],"React thường được tạo bằng Create React App. Đây là Dockerfile cho dự án React:",{"id":374,"title":375,"titles":376,"content":377,"level":102},"/blog/common-docker-file#_4-dockerfile-cho-vue","4. Dockerfile cho Vue",[355],"Vue cũng được xây dựng tương tự như React. Dưới đây là Dockerfile cho Vue:",{"id":379,"title":380,"titles":381,"content":382,"level":102},"/blog/common-docker-file#_5-dockerfile-cho-nuxtjs","5. Dockerfile cho Nuxt.js",[355],"Nuxt.js là một framework mạnh mẽ để xây dựng ứng dụng Vue. Đây là Dockerfile cho dự án Nuxt:",{"id":384,"title":385,"titles":386,"content":387,"level":102},"/blog/common-docker-file#_6-dockerfile-cho-nextjs","6. Dockerfile cho Next.js",[355],"Next.js là một framework React phổ biến cho việc render phía server. Đây là Dockerfile cho dự án Next:",{"id":389,"title":390,"titles":391,"content":392,"level":102},"/blog/common-docker-file#đang-cập-nhật","Đang cập nhật...",[355],"Nếu bạn có các cấu hình hoặc Dockerfile khác muốn chia sẻ, vui lòng gửi email về vinhtieng123@gmail.com. Mình rất trân trọng điều đó.",{"id":394,"title":395,"titles":396,"content":397,"level":195},"/blog/jwt","Tất tần tật về JWT",[],"Giới thiệu về JWT, các thành phần của JWT, cách sử dụng JWT trong ứng dụng và các vấn đề liên quan đến bảo mật.",{"id":399,"title":400,"titles":401,"content":402,"level":195},"/blog/jwt#_1-giới-thiệu-về-jwt","1. Giới thiệu về JWT",[],"JWT (JSON Web Token) là một tiêu chuẩn mở (RFC 7519) cho phép truyền tải thông tin giữa các bên dưới dạng JSON. JWT thường được sử dụng để xác thực và phân quyền trong các ứng dụng web. Một JWT token trông như sau: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c Trang web chính thức của JWT: jwt.io",{"id":404,"title":405,"titles":406,"content":407,"level":195},"/blog/jwt#_2-các-thành-phần-của-jwt","2. Các thành phần của JWT",[],"JWT bao gồm ba phần chính: Header, Payload và Signature. Mỗi phần được mã hóa bằng Base64Url và được phân tách bằng dấu chấm (.). Header: Chứa thông tin về thuật toán mã hóa và loại token. Ví dụ: Payload: Chứa thông tin mà bạn muốn truyền tải. Đây có thể là thông tin người dùng, quyền truy cập, thời gian hết hạn, v.v. Ví dụ:Signature: Được tạo bằng cách mã hóa Header và Payload với một khóa bí mật và thuật toán đã chỉ định trong Header. Điều này giúp đảm bảo rằng token không bị thay đổi trong quá trình truyền tải. Ví dụ:",{"id":409,"title":410,"titles":411,"content":412,"level":195},"/blog/jwt#_3-viết-lại-hàm-để-generate-jwt-token-và-verify-jwt-token-trong-nodejs","3. Viết lại hàm để generate JWT token và verify JWT token trong NodeJs",[],"Khi làm việc với jwt và nodeJs, hầu hết mọi người sẽ sử dụng thư viện jsonwebtoken để tạo và xác thực JWT token. Tuy nhiên, để hiểu rõ hơn về cách hoạt động của JWT, chúng ta có thể tự viết hàm để tạo và xác thực JWT token. Giả sử chúng ta muốn tạo JWT token từ thông tin user_id=123, khi đó phần payload sẽ là: Ở phần header, chúng ta sẽ sử dụng thuật toán HS256 để mã hóa JWT token. Để tạo JWT token, chúng ta cần mã hóa Header và Payload bằng Base64Url. Sau đó, chúng ta sẽ tạo chữ ký bằng cách sử dụng thuật toán HMACSHA256 với khóa bí mật (secret key) và kết hợp Header và Payload. Đầu tiên chúng ta cần viết 1 hàm để mã hóa Base64Url: Ở đây, vì chúng ta sử dụng NodeJs nên có thể sử dụng Buffer để mã hóa Base64Url. Nếu bạn đang làm việc với JavaScript trên trình duyệt, bạn có thể sử dụng btoa() để mã hóa Base64Url. Khi muốn giải mã, bạn có thể sử dụng atob(). Hàm này là hàm có sẵn trong trình duyệt. Tiếp theo, chúng ta sẽ triển khai hàm tạo JWT token. Thay vì tự mã hóa thủ công bằng cách base64UrlEncode Header và Payload rồi nối với secret key, chúng ta sẽ thực hiện đúng theo chuẩn thực tế bằng cách sử dụng thuật toán HMAC-SHA256 để tạo chữ ký số. Trong Node.js, chúng ta có thể dễ dàng thực hiện điều này bằng cách dùng thư viện tích hợp sẵn là crypto, cụ thể là hàm createHmac. Hàm này sẽ giúp chúng ta tạo ra chữ ký (signature) từ chuỗi đã mã hóa gồm Header và Payload, kết hợp với secret key để đảm bảo tính toàn vẹn và xác thực của token. Full code mã hóa JWT token sẽ như sau:",{"id":414,"title":415,"titles":416,"content":417,"level":195},"/blog/jwt#_4-xác-thực-jwt-token","4. Xác thực JWT token",[],"Để xác thực JWT token, chúng ta cần kiểm tra chữ ký (signature) của token. Đầu tiên, chúng ta sẽ tách Header, Payload và Signature từ token. Sau đó, chúng ta sẽ mã hóa lại Header và Payload bằng cùng một khóa bí mật và thuật toán đã chỉ định trong Header. Cuối cùng, chúng ta so sánh chữ ký đã tạo với chữ ký trong token. Hàm verifyJWT sẽ trả về true nếu chữ ký hợp lệ và false nếu không hợp lệ.\nNếu bạn muốn kiểm tra xem token có hết hạn hay không, bạn có thể thêm một trường exp vào payload. Trường này sẽ chứa thời gian hết hạn của token dưới dạng timestamp (số giây kể từ 1/1/1970).",{"id":419,"title":420,"titles":421,"content":422,"level":195},"/blog/jwt#_5-kết-luận","5. Kết luận",[],"JWT là một công cụ mạnh mẽ để xác thực và phân quyền trong các ứng dụng web. Bằng cách hiểu rõ cách hoạt động của JWT, bạn có thể tự tạo và xác thực JWT token mà không cần phụ thuộc vào thư viện bên ngoài. Tuy nhiên, trong thực tế, bạn nên sử dụng thư viện jsonwebtoken để tiết kiệm thời gian và công sức. Hy vọng bài viết này đã giúp bạn hiểu rõ hơn về JWT và cách sử dụng nó trong ứng dụng của mình. Nếu bạn có bất kỳ câu hỏi nào, hãy liên hệ với mình qua các kênh liên lạc như email, facebook, zalo hoặc telegram nhé!",{"id":424,"title":425,"titles":426,"content":427,"level":195},"/blog/jwt#_6-tài-liệu-tham-khảo","6. Tài liệu tham khảo",[],"jwt.ioRFC 7519 - JSON Web Token (JWT)jsonwebtoken",{"id":429,"title":430,"titles":431,"content":432,"level":195},"/blog/useful-npm-package","Các npm package hay cho FE và BE",[],"Các thư viện npm hay được tổng hợp thông qua các bài viết, các bài chia sẻ trong suốt quá trình làm việc",{"id":434,"title":435,"titles":436,"content":437,"level":195},"/blog/useful-npm-package#frontend","Frontend",[],"react-query - React Query Thư viện quản lý trạng thái cho React, giúp xử lý các yêu cầu API và cache dữ liệu một cách dễ dàng.@progress/kendo-react-pdf - Thư viện tạo PDF cho React, hay hơn các thư viện khác ở chỗ hình ảnh sẽ được xuất ra dưới định dạng SVG, giúp cho việc xuất ảnh chất lượng cao và nét hơn, không bị vỡ ảnh khi zoom in.react-split-pane - Thư viện tạo giao diện chia tách (split view) cho React, giúp dễ dàng tạo các layout với các phần tử có thể kéo và thả.Code template cho custom send and listen event documentreact-window - Thư viện giúp tối ưu hóa hiệu suất cho bảng và danh sách lớn trong React bằng cách chỉ render các phần tử đang hiển thị trên UI nhẹ và dễ sử dụng.",{"id":439,"title":440,"titles":441,"content":177,"level":195},"/blog/useful-npm-package#backend","Backend",[],[],[444,561,1027,1217,1311,1548],{"id":4,"title":5,"body":445,"date":179,"description":180,"extension":181,"image":182,"meta":558,"navigation":184,"path":185,"published":184,"seo":559,"stem":187,"tags":560,"__hash__":190},{"type":7,"value":446,"toc":556},[447,451,453,455,457,459,461,463,465,467,469,471,473,479,481,483,485,487,489,491,495,501,503,509,511,513,515,517,519,523,525,527,529,546,548,550,554],[10,448,449],{},[13,450,15],{},[10,452,18],{},[20,454],{},[23,456,26],{"id":25},[10,458,29],{},[31,460],{":files":33},[10,462,36],{},[31,464],{":files":39},[20,466],{},[23,468,45],{"id":44},[10,470,48],{},[31,472],{":files":51},[10,474,475,57,477,62],{},[13,476,56],{},[59,478,61],{},[20,480],{},[23,482,68],{"id":67},[10,484,71],{},[31,486],{":files":74},[20,488],{},[23,490,80],{"id":79},[10,492,83,493,87],{},[59,494,86],{},[89,496,497],{},[92,498,499],{},[13,500,96],{},[31,502],{":files":99},[89,504,505],{"start":102},[92,506,507],{},[13,508,107],{},[31,510],{":files":110},[20,512],{},[23,514,116],{"id":115},[10,516,119],{},[31,518],{":files":122},[10,520,521],{},[13,522,127],{},[31,524],{":files":130},[20,526],{},[23,528,136],{"id":135},[138,530,531,536,541],{},[92,532,533],{},[143,534,148],{"href":145,"rel":535},[147],[92,537,538],{},[143,539,155],{"href":153,"rel":540},[147],[92,542,543],{},[143,544,162],{"href":160,"rel":545},[147],[20,547],{},[166,549],{},[10,551,552],{},[13,553,172],{},[10,555,175],{},{"title":177,"searchDepth":102,"depth":102,"links":557},[],{},{"title":5,"description":180},[189],{"id":562,"title":221,"body":563,"date":179,"description":1019,"extension":181,"image":1020,"meta":1021,"navigation":184,"path":220,"published":184,"seo":1022,"stem":1023,"tags":1024,"__hash__":1026},"blog/blog/basic-nginx.md",{"type":7,"value":564,"toc":1017},[565,570,573,599,601,604,607,610,613,616,621,624,627,630,637,640,651,654,657,660,674,677,682,685,688,702,705,710,742,745,748,751,754,757,760,767,778,785,796,799,811,814,817,820,823,826,830,838,841,843,846,849,875,878,883,886,889,892,894,897,899,902,904,907,909,912,914,917,919,922,924,927,930,933,936,939,941,944,947,950,953,956,959,962,964,967,969,972,974,976,1006,1008,1010,1014],[10,566,567],{},[13,568,569],{},"Hướng dẫn chi tiết về cấu hình và triển khai Nginx",[10,571,572],{},"Nginx là một web server mã nguồn mở mạnh mẽ, được sử dụng phổ biến để phục vụ nội dung tĩnh, reverse proxy, cân bằng tải, bảo mật và hỗ trợ PHP thông qua FastCGI. Trong bài viết này, chúng ta sẽ đi qua các cấu hình từ cơ bản đến nâng cao, bao gồm:",[138,574,575,578,581,584,587,590,593,596],{},[92,576,577],{},"Cách cài đặt Nginx",[92,579,580],{},"Cấu hình máy chủ mặc định (default host)",[92,582,583],{},"Tích hợp với PHP-FPM",[92,585,586],{},"Thiết lập Load Balancer (cân bằng tải)",[92,588,589],{},"Gzip, HTTP/2, Rate limiting",[92,591,592],{},"Redirect, Rewrites",[92,594,595],{},"Hardening & Security",[92,597,598],{},"Logging nâng cao",[20,600],{},[23,602,226],{"id":603},"️-cài-đặt-nginx",[10,605,606],{},"Hướng dẫn cài đặt Nginx trên Ubuntu:",[31,608],{":files":609},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo apt update\\nsudo apt install nginx\\n\"}]",[10,611,612],{},"Sau khi cài đặt, bạn có thể kiểm tra trạng thái Nginx:",[31,614],{":files":615},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo systemctl status nginx\"}]",[10,617,618],{},[13,619,620],{},"Kiểm tra tường lửa:",[10,622,623],{},"Sau khi cài đặt Nginx, bạn nên đảm bảo rằng tường lửa (firewall) cho phép lưu lượng HTTP và HTTPS để máy chủ có thể phục vụ nội dung web.",[31,625],{":files":626},"[{\"title\":\"bash\",\"language\":\"nginx\",\"content\":\"sudo ufw allow ‘Nginx Full’\\nsudo ufw status\\n\"}]",[10,628,629],{},"Lệnh sudo ufw allow 'Nginx Full' sẽ mở cả hai cổng 80 (HTTP) và 443 (HTTPS).\nSau đó, dùng sudo ufw status để xác nhận rằng các cổng này đã được mở.",[631,632,634],"alert",{"type":633},"warning",[10,635,636],{},"Nếu bạn chưa bật ufw (Uncomplicated Firewall), bạn có thể bật bằng lệnh sudo ufw enable. Tuy nhiên, hãy đảm bảo cấu hình chính xác để không bị khóa SSH.",[10,638,639],{},"Kiểm tra hoạt động của Nginx:",[10,641,642,643,646,647,650],{},"Mở trình duyệt và truy cập địa chỉ:\n👉 ",[59,644,645],{},"http://\u003Cđịa_chỉ_IP_của_bạn>"," hoặc ",[59,648,649],{},"http://localhost"," nếu kiểm tra cục bộ.",[10,652,653],{},"Bạn sẽ thấy trang mặc định “Welcome to nginx!” nếu mọi thứ hoạt động đúng cách.",[23,655,231],{"id":656},"️-cấu-hình-default-host-trong-nginx",[10,658,659],{},"Trên Ubuntu, file cấu hình của Nginx thường được lưu tại các vị trí sau:",[138,661,662,668],{},[92,663,664,667],{},[59,665,666],{},"/etc/nginx/sites-available/default"," (Nếu sử dụng thư mục sites-available và sites-enabled).",[92,669,670,673],{},[59,671,672],{},"/etc/nginx/conf.d/default.conf"," (Thông dụng cho các cấu hình đơn giản).",[10,675,676],{},"Mặc định, khi cài đặt Nginx, sẽ có một file cấu hình default trong thư mục /etc/nginx/sites-available/ với một số cấu hình cơ bản. Bạn có thể sửa file này để cấu hình server block cho website của mình.",[10,678,679],{},[13,680,681],{},"Cấu hình Default Host",[10,683,684],{},"Mở file cấu hình Nginx mặc định:",[31,686],{":files":687},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"sudo nano /etc/nginx/sites-available/default\"}]",[10,689,690,691,694,695,698,699,87],{},"Mặc định, Nginx sẽ chọn block đầu tiên khi không tìm thấy ",[59,692,693],{},"server_name"," tương ứng. Để cấu hình rõ ràng host mặc định, bạn thêm ",[59,696,697],{},"default_server"," vào dòng ",[59,700,701],{},"listen",[31,703],{":files":704},"[{\"title\":\"default.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80 default_server;\\n    server_name _;\\n    root /var/www/html;\\n    index index.html index.htm;\\n\\n    location / {\\n        try_files $uri $uri/ =404;\\n    }\\n}\\n\"}]",[10,706,707],{},[13,708,709],{},"Ghi chú:",[138,711,712,718,724,730,736],{},[92,713,714,717],{},[59,715,716],{},"listen 80 default_server;",": Cấu hình Nginx lắng nghe cổng 80 (HTTP) và đánh dấu đây là default_server (server mặc định cho các yêu cầu không khớp với server block khác).",[92,719,720,723],{},[59,721,722],{},"root /var/www/html;",": Đường dẫn tới thư mục chứa các tệp tin của website. Bạn có thể thay đổi đường dẫn này thành thư mục của website bạn muốn phục vụ.",[92,725,726,729],{},[59,727,728],{},"server_name _;",": Chỉ thị này cho phép server chấp nhận tất cả các yêu cầu không khớp với server block khác. Nếu bạn có tên miền cụ thể, hãy thay thế dấu gạch dưới (_) bằng tên miền của bạn.",[92,731,732,735],{},[59,733,734],{},"location /",": Đây là phần cấu hình định tuyến cho các yêu cầu đến. Cấu hình này giúp Nginx tìm kiếm các tệp tin khi người dùng truy cập vào website.",[92,737,738,741],{},[59,739,740],{},"try_files $uri $uri/ =404;",": Nếu yêu cầu không trùng khớp với tệp tin hoặc thư mục, sẽ trả về lỗi 404.",[10,743,744],{},"Sau khi chỉnh sửa xong, bạn cần kiểm tra xem cấu hình có chính xác không:",[31,746],{":files":747},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo nginx -t\"}]",[10,749,750],{},"Nếu không có lỗi nào, bạn có thể khởi động lại Nginx để áp dụng cấu hình mới:",[31,752],{":files":753},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo systemctl restart nginx\"}]",[10,755,756],{},"Giới thiệu về sites-available và sites-enabled",[10,758,759],{},"Trong Nginx, thư mục sites-available và sites-enabled là một cơ chế để quản lý các website (virtual hosts) mà Nginx có thể phục vụ. Cấu trúc này giúp dễ dàng bật/tắt các website mà không cần phải xóa hoặc thay đổi cấu hình trực tiếp.",[89,761,762],{},[92,763,764,87],{},[59,765,766],{},"sites-available",[138,768,769,772,775],{},[92,770,771],{},"Đây là nơi bạn tạo và lưu trữ tất cả các file cấu hình của các website hoặc ứng dụng mà bạn muốn Nginx phục vụ.",[92,773,774],{},"Mỗi file cấu hình trong sites-available đại diện cho một website hoặc ứng dụng riêng biệt.",[92,776,777],{},"Ví dụ: /etc/nginx/sites-available/example.com là cấu hình cho website example.com.",[89,779,780],{"start":102},[92,781,782,87],{},[59,783,784],{},"sites-enabled",[138,786,787,790,793],{},[92,788,789],{},"Đây là nơi chứa các liên kết tượng trưng (symlink) đến các file cấu hình trong sites-available mà bạn muốn Nginx thực thi.",[92,791,792],{},"Các liên kết này cho phép Nginx biết được website nào sẽ được kích hoạt.",[92,794,795],{},"Bạn không nên trực tiếp chỉnh sửa các file trong sites-enabled. Thay vào đó, bạn tạo symlink từ sites-available.",[10,797,798],{},"Cách thức hoạt động:",[138,800,801,804],{},[92,802,803],{},"Khi bạn tạo một file cấu hình trong sites-available, bạn có thể kích hoạt nó bằng cách tạo một symlink đến file đó trong thư mục sites-enabled.",[92,805,806,807,810],{},"Để tạo symlink, sử dụng lệnh ",[59,808,809],{},"ln -s",".",[10,812,813],{},"Ví dụ, nếu bạn có cấu hình example.com trong sites-available, bạn có thể tạo symlink vào sites-enabled như sau:",[31,815],{":files":816},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"sudo ln -s /etc/nginx/sites-available/example.com /etc/nginx/sites-enabled/\"}]",[23,818,236],{"id":819},"cấu-hình-nginx-với-php-fpm",[10,821,822],{},"Để xử lý các file PHP, bạn cần kết nối Nginx với PHP-FPM qua socket hoặc TCP:",[31,824],{":files":825},"[{\"title\":\"php-fpm.conf\",\"language\":\"nginx\",\"content\":\"location ~ \\\\.php$ {\\n  try_files $uri =404;\\n  fastcgi_pass unix:/var/run/php/php8.1-fpm.sock;\\n  fastcgi_index index.php;\\n  fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\\n  include fastcgi_params;\\n}\\n\"}]",[10,827,828],{},[13,829,56],{},[138,831,832,835],{},[92,833,834],{},"Đường dẫn socket có thể thay đổi tùy phiên bản PHP.",[92,836,837],{},"Nếu dùng TCP:",[31,839],{":files":840},"[{\"title\":\"php-fpm.conf\",\"language\":\"nginx\",\"content\":\"fastcgi_pass 127.0.0.1:9000;\"}]",[20,842],{},[23,844,241],{"id":845},"load-balancer-trong-nginx",[10,847,848],{},"Nginx hỗ trợ cấu hình cân bằng tải với nhiều thuật toán lựa chọn backend:",[138,850,851,857,863,869],{},[92,852,853,856],{},[59,854,855],{},"round-robin",": Mặc định, phân phối đều cho các request.",[92,858,859,862],{},[59,860,861],{},"least_conn",": Chọn server ít kết nối nhất.",[92,864,865,868],{},[59,866,867],{},"ip_hash",": Duy trì session cho client.",[92,870,871,874],{},[59,872,873],{},"least_time",": chọn server có thời gian phản hồi ít nhất",[10,876,877],{},"Có thể thêm trọng số cho server bằng cách thêm số sau ip:port",[138,879,880],{},[92,881,882],{},"Ex: server 192.168.1.0:8000 weight=3;",[31,884],{":files":885},"[{\"title\":\"upstream.conf\",\"language\":\"nginx\",\"content\":\"upstream myapp1 {\\n    ip_hash;\\n    server 192.168.1.10:8000;\\n    server 192.168.2.10:8000;\\n    # server 192.168.1.10:8000 weight=3;\\n}\\n\"}]",[10,887,888],{},"Cấu hình server block proxy đến upstream:",[31,890],{":files":891},"[{\"title\":\"proxy.conf\",\"language\":\"nginx\",\"content\":\"server {\\n  listen 80 default_server;\\n  server_name _;\\n  root /var/www/html;\\n  index index.html index.htm;\\n\\n  location / {\\n      proxy_pass http://myapp1;\\n      proxy_set_header Host $host;\\n      proxy_set_header X-Real-IP $remote_addr;\\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\\n      proxy_set_header X-Forwarded-Proto $scheme;\\n  }\\n}\\n\"}]",[20,893],{},[23,895,246],{"id":896},"gzip-compression",[10,898,248],{},[31,900],{":files":901},"[{\"title\":\"gzip.conf\",\"language\":\"nginx\",\"content\":\"gzip on;\\ngzip_disable \\\"msie6\\\";\\ngzip_vary on;\\ngzip_proxied any;\\ngzip_comp_level 6;\\ngzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;\\n\"}]",[20,903],{},[23,905,251],{"id":906},"kích-hoạt-http2",[10,908,253],{},[31,910],{":files":911},"[{\"title\":\"http2.conf\",\"language\":\"nginx\",\"content\":\"listen 443 ssl http2;\\n\"}]",[20,913],{},[23,915,256],{"id":916},"rate-limiting",[10,918,258],{},[31,920],{":files":921},"[{\"title\":\"rate-limiting.conf\",\"language\":\"nginx\",\"content\":\"limit_req_zone $binary_remote_addr zone=mylimit:10m rate=1r/s;\\n\\nlocation /api/ {\\n    limit_req zone=mylimit burst=5;\\n}\\n\"}]",[20,923],{},[23,925,261],{"id":926},"redirect-và-rewrites",[10,928,929],{},"Chuyển hướng toàn bộ traffic HTTP sang HTTPS:",[31,931],{":files":932},"[{\"title\":\"redirect.conf\",\"language\":\"nginx\",\"content\":\"server {\\n    listen 80;\\n    server_name example.com;\\n    return 301 https://$host$request_uri;\\n}\\nserver {\\n    listen 443 ssl;\\n    server_name example.com;\\n    ssl_certificate /path/to/cert.pem;\\n    ssl_certificate_key /path/to/key.pem;\\n}\\n\"}]",[10,934,935],{},"Viết lại URL cho SPA:",[31,937],{":files":938},"[{\"title\":\"rewrite.conf\",\"language\":\"nginx\",\"content\":\"location /api/ {\\n    rewrite ^/api/(.*)$ /$1 break;\\n}\\n\"}]",[20,940],{},[23,942,266],{"id":943},"hardening-security",[10,945,946],{},"Bảo vệ server bằng cách từ chối truy cập file nhạy cảm:",[31,948],{":files":949},"[{\"title\":\"deny.conf\",\"language\":\"nginx\",\"content\":\"location ~* \\\\\\\\.(git|env|bak|log)$ {\\n  deny all;\\n}\\n\"}]",[10,951,952],{},"Ẩn thông tin server:",[31,954],{":files":955},"[{\"title\":\"security.conf\",\"language\":\"nginx\",\"content\":\"server_tokens off;\\n\"}]",[10,957,958],{},"Chống clickjacking và XSS:",[31,960],{":files":961},"[{\"title\":\"headers.conf\",\"language\":\"nginx\",\"content\":\"add_header X-Content-Security-Policy \\\"default-src 'self'\\\";\\nadd_header X-Frame-Options \\\"DENY\\\";\\nadd_header X-XSS-Protection \\\"1; mode=block\\\";\\nadd_header Referrer-Policy \\\"no-referrer\\\";\\n\"}]",[20,963],{},[23,965,271],{"id":966},"logging-nâng-cao",[10,968,273],{},[31,970],{":files":971},"[{\"title\":\"logging.conf\",\"language\":\"nginx\",\"content\":\"log_format main '$remote_addr - $remote_user [$time_local] \\\"$request\\\" '\\n               '$status $body_bytes_sent \\\"$http_referer\\\" '\\n               '\\\"$http_user_agent\\\" \\\"$http_x_forwarded_for\\\"';\\naccess_log /var/log/nginx/access.log main;\\n\"}]",[20,973],{},[23,975,136],{"id":135},[138,977,978,985,992,999],{},[92,979,980],{},[143,981,984],{"href":982,"rel":983},"https://nginx.org/en/docs/",[147],"Nginx Documentation",[92,986,987],{},[143,988,991],{"href":989,"rel":990},"https://docs.nginx.com/nginx/admin-guide/load-balancer/http-load-balancer/",[147],"Nginx Load Balancing Guide",[92,993,994],{},[143,995,998],{"href":996,"rel":997},"https://www.php.net/manual/en/install.fpm.configuration.php",[147],"Nginx + PHP-FPM Setup",[92,1000,1001],{},[143,1002,1005],{"href":1003,"rel":1004},"https://owasp.org/www-project-secure-headers/",[147],"OWASP Nginx Hardening Guide",[20,1007],{},[166,1009],{},[10,1011,1012],{},[13,1013,172],{},[10,1015,1016],{},"Nginx là công cụ cực kỳ mạnh mẽ và linh hoạt, không chỉ giới hạn ở web server mà còn là reverse proxy, caching layer, và load balancer. Việc nắm vững và khai thác tốt các tính năng sẽ giúp hệ thống của bạn hiệu suất cao, bảo mật và dễ mở rộng.",{"title":177,"searchDepth":102,"depth":102,"links":1018},[],"Hướng dẫn chi tiết về cấu hình mặc định, PHP-FPM và thiết lập Load Balancer với Nginx.","/images/blog/basic-nginx/banner.webp",{},{"title":221,"description":1019},"blog/basic-nginx",[1025],"nginx","8D-dHSHdhh8kScgx34WULXvDYuSbAyCm1LK592MpIbY",{"id":1028,"title":280,"body":1029,"date":179,"description":1209,"extension":181,"image":1210,"meta":1211,"navigation":184,"path":279,"published":184,"seo":1212,"stem":1213,"tags":1214,"__hash__":1216},"blog/blog/basic-redis.md",{"type":7,"value":1030,"toc":1195},[1031,1035,1038,1041,1052,1054,1057,1059,1063,1065,1068,1071,1073,1076,1079,1081,1084,1087,1089,1092,1095,1097,1100,1103,1106,1109,1112,1115,1118,1121,1124,1126,1129,1132,1134,1137,1140,1147,1150,1153,1155,1158,1161,1163,1166,1169,1172,1177,1180],[10,1032,1033],{},[13,1034,280],{},[10,1036,1037],{},"Redis là một kho dữ liệu key-value trong bộ nhớ, mã nguồn mở, nổi tiếng với hiệu suất và tính linh hoạt. Redis hỗ trợ nhiều kiểu dữ liệu, phù hợp cho việc sử dụng bộ nhớ đệm, ứng dụng thời gian thực, hệ thống pub/sub, và nhiều hơn nữa.",[10,1039,1040],{},"Trong hướng dẫn này, chúng ta sẽ tìm hiểu:",[138,1042,1043,1046,1049],{},[92,1044,1045],{},"Các kiểu dữ liệu trong Redis",[92,1047,1048],{},"Các lệnh phổ biến của Redis",[92,1050,1051],{},"Cách tích hợp Redis vào dự án Node.js",[20,1053],{},[23,1055,285],{"id":1056},"các-kiểu-dữ-liệu-lệnh-redis",[10,1058,287],{},[1060,1061,290],"h2",{"id":1062},"_1-chuỗi-strings",[10,1064,292],{},[31,1066],{":files":1067},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SET name \\\"Jay\\\"\\nGET name\\nINCR counter\\n\"}]",[1060,1069,295],{"id":1070},"_2-danh-sách-lists",[10,1072,297],{},[31,1074],{":files":1075},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"LPUSH mylist \\\"apple\\\"\\nRPUSH mylist \\\"banana\\\"\\nLRANGE mylist 0 -1\\n\"}]",[1060,1077,300],{"id":1078},"_3-tập-hợp-sets",[10,1080,302],{},[31,1082],{":files":1083},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SADD myset \\\"apple\\\"\\nSADD myset \\\"banana\\\"\\nSADD myset \\\"apple\\\" # Trùng lặp, sẽ không được thêm\\nSMEMBERS myset\\n\"}]",[1060,1085,305],{"id":1086},"_4-băm-hashes",[10,1088,307],{},[31,1090],{":files":1091},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"HSET user:1000 name \\\"Jay\\\" age 30\\nHGETALL user:1000\\n\"}]",[1060,1093,310],{"id":1094},"_5-tập-hợp-có-thứ-tự-sorted-sets",[10,1096,312],{},[31,1098],{":files":1099},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"ZADD mysortedset 1 \\\"apple\\\"\\nZADD mysortedset 2 \\\"banana\\\"\\nZRANGE mysortedset 0 -1\\n\"}]",[1060,1101,315],{"id":1102},"_6-bitmaps-hyperloglogs-streams",[10,1104,1105],{},"Đây là các cấu trúc nâng cao hơn:\nBitmaps được sử dụng cho các thao tác cấp bit, cho phép bạn thao tác các bit riêng lẻ trong một chuỗi.",[31,1107],{":files":1108},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"SETBIT mybitmap 0 1\\nSETBIT mybitmap 1 1\\nBITCOUNT mybitmap\\n\"}]",[10,1110,1111],{},"HyperLogLogs được sử dụng để ước tính số lượng phần tử duy nhất trong một tập hợp, rất hữu ích cho các trường hợp như theo dõi số lượng khách truy cập duy nhất.",[31,1113],{":files":1114},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"PFADD myhll \\\"apple\\\" \\\"banana\\\" \\\"orange\\\"\\nPFCOUNT myhll\\n\"}]",[10,1116,1117],{},"Streams được thiết kế cho các đường dẫn dữ liệu thời gian thực và nguồn sự kiện, cho phép bạn thêm và truy vấn dữ liệu theo chuỗi thời gian.",[31,1119],{":files":1120},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"XADD mystream * name \\\"Jay\\\" age 30\\nXRANGE mystream - +\\n\"}]",[23,1122,320],{"id":1123},"tích-hợp-redis-với-nodejs",[10,1125,322],{},[1060,1127,325],{"id":1128},"_1-cài-đặt-redis-và-ioredis",[31,1130],{":files":1131},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"npm install ioredis\\n# hoặc\\nyarn add ioredis\\n\"}]",[10,1133,327],{},[31,1135],{":files":1136},"[{\"title\":\"bash\",\"language\":\"bash\",\"content\":\"docker run -d -p 6379:6379 redis\\n\"}]",[1060,1138,330],{"id":1139},"_2-thiết-lập-cơ-bản",[10,1141,1142,1143,1146],{},"Tạo một tệp có tên ",[59,1144,1145],{},"redis.js"," và thêm đoạn mã sau:",[31,1148],{":files":1149},"[{\"title\":\"redis.js\",\"language\":\"javascript\",\"content\":\"// redis.ts\\nimport Redis from 'ioredis';\\n\\nconst redis = new Redis({\\n  host: '127.0.0.1',\\n  port: 6379,\\n  // password: 'mật_khẩu_nếu_có'\\n});\\n\\nexport default redis;\\n\"}]",[1060,1151,335],{"id":1152},"_3-sử-dụng-redis-trong-ứng-dụng",[10,1154,337],{},[31,1156],{":files":1157},"[{\"title\":\"example.js\",\"language\":\"javascript\",\"content\":\"// example.ts\\nimport redis from './redis';\\n\\n// Chuỗi\\nawait redis.set('greeting', 'Hello Redis');\\nconst greeting = await redis.get('greeting');\\nconsole.log(greeting); // Hello Redis\\n\\n// Danh sách\\nawait redis.lpush('queue', 'task1');\\nconst task = await redis.rpop('queue');\\nconsole.log(task); // task1\\n\\n// Băm\\nawait redis.hset('user:1', { name: 'Jay', role: 'admin' });\\nconst user = await redis.hgetall('user:1');\\nconsole.log(user); // { name: 'Jay', role: 'admin' }\\n\\n// Tập hợp có thứ tự\\nawait redis.zadd('scores', 100, 'Jay');\\nconst scores = await redis.zrange('scores', 0, -1, 'WITHSCORES');\\nconsole.log(scores);\\n\\n// Pub/Sub\\nredis.subscribe('news');\\nredis.on('message', (channel, message) => {\\n  console.log(`Nhận tin nhắn từ ${channel}: ${message}`);\\n});\\n\\nconst publisher = new Redis();\\npublisher.publish('news', 'Tin nóng!');\\n\"}]",[1060,1159,340],{"id":1160},"_4-ví-dụ-về-bộ-nhớ-đệm",[10,1162,342],{},[31,1164],{":files":1165},"[{\"title\":\"cache.js\",\"language\":\"javascript\",\"content\":\"import redis from './redis';\\n\\nasync function getUserData(userId) {\\n  const cacheKey = `user:${userId}`;\\n  const cachedData = await redis.get(cacheKey);\\n\\n  if (cachedData) {\\n    return JSON.parse(cachedData);\\n  }\\n\\n  // Mô phỏng truy vấn cơ sở dữ liệu\\n  const userData = await queryDatabase(userId);\\n  await redis.set(cacheKey, JSON.stringify(userData), 'EX', 3600); // Lưu vào bộ nhớ đệm trong 1 giờ\\n  return userData;\\n}\\n\\nasync function queryDatabase(userId) {\\n  // Mô phỏng truy vấn cơ sở dữ liệu\\n  return { id: userId, name: 'Jay', age: 30 };\\n}\\n\"}]",[1060,1167,345],{"id":1168},"_5-kết-luận",[10,1170,1171],{},"Redis là một công cụ mạnh mẽ cho bộ nhớ đệm và các ứng dụng thời gian thực. Bằng cách tích hợp Redis vào các dự án Node.js, bạn có thể cải thiện đáng kể hiệu suất và khả năng mở rộng. Hướng dẫn này đã bao quát các khái niệm cơ bản về kiểu dữ liệu, lệnh, và cách sử dụng Redis trong ứng dụng Node.js.\nHãy khám phá thêm các tính năng nâng cao như giao dịch, scripting Lua, và clustering khi bạn đã quen thuộc hơn với Redis.\nRedis là một công cụ đa năng có thể nâng cao đáng kể ứng dụng của bạn.",[10,1173,1174],{},[13,1175,1176],{},"Happy Coding",[1060,1178,350],{"id":1179},"_6-tài-nguyên-tham-khảo",[138,1181,1182,1189],{},[92,1183,1184],{},[143,1185,1188],{"href":1186,"target":1187},"https://redis.io/documentation","_blank","Tài liệu Redis",[92,1190,1191],{},[143,1192,1194],{"href":1193,"target":1187},"https://github.com/redis/ioredis","Tài liệu ioredis",{"title":177,"searchDepth":102,"depth":102,"links":1196},[1197,1198,1199,1200,1201,1202,1203,1204,1205,1206,1207,1208],{"id":1062,"depth":102,"text":290},{"id":1070,"depth":102,"text":295},{"id":1078,"depth":102,"text":300},{"id":1086,"depth":102,"text":305},{"id":1094,"depth":102,"text":310},{"id":1102,"depth":102,"text":315},{"id":1128,"depth":102,"text":325},{"id":1139,"depth":102,"text":330},{"id":1152,"depth":102,"text":335},{"id":1160,"depth":102,"text":340},{"id":1168,"depth":102,"text":345},{"id":1179,"depth":102,"text":350},"Tìm hiểu các khái niệm cơ bản về Redis bao gồm các kiểu dữ liệu và phương thức, cũng như cách tích hợp Redis vào ứng dụng Node.js để sử dụng bộ nhớ đệm và các tính năng thời gian thực.","/images/blog/basic-redis/banner.webp",{},{"title":280,"description":1209},"blog/basic-redis",[1215],"redis","q7EVaSvL_1XBl8OsAP0K8b0SlDipTd8r_qProYyWMC0",{"id":1218,"title":355,"body":1219,"date":179,"description":1303,"extension":181,"image":1304,"meta":1305,"navigation":184,"path":354,"published":184,"seo":1306,"stem":1307,"tags":1308,"__hash__":1310},"blog/blog/common-docker-file.md",{"type":7,"value":1220,"toc":1294},[1221,1225,1228,1234,1236,1239,1241,1244,1247,1249,1252,1255,1257,1260,1263,1265,1268,1271,1273,1276,1279,1281,1283,1286],[10,1222,1223],{},[13,1224,355],{},[10,1226,1227],{},"Docker là một công cụ ảo hóa nhẹ giúp phát triển, triển khai và chạy ứng dụng trong các container. Nó cho phép bạn đóng gói ứng dụng và tất cả các phụ thuộc của nó vào một container duy nhất, giúp dễ dàng triển khai trên bất kỳ môi trường nào mà không cần lo lắng về sự khác biệt giữa các môi trường.",[631,1229,1231],{"type":1230},"info",[10,1232,1233],{},"Đây là một số Dockerfile cho các dự án thường gặp, bạn có thể tham khảo và điều chỉnh theo nhu cầu của mình.",[166,1235],{},[1060,1237,360],{"id":1238},"_1-dockerfile-cho-nodejs",[10,1240,362],{},[31,1242],{":files":1243},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM node:18-slim\\nWORKDIR /app\\nCOPY package*.json ./\\nRUN npm install --production\\nCOPY . .\\nEXPOSE 3000\\nCMD [\\\"node\\\", \\\"index.js\\\"]\\n\"}]",[1060,1245,365],{"id":1246},"_2-dockerfile-cho-php-với-laravel",[10,1248,367],{},[31,1250],{":files":1251},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM php:8.1-fpm-alpine\\nRUN apk add --no-cache libpng libjpeg-turbo libfreetype && \\\\\\n    docker-php-ext-configure gd --with-freetype --with-jpeg && \\\\\\n    docker-php-ext-install gd pdo pdo_mysql\\nWORKDIR /var/www\\nCOPY . .\\nRUN curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer\\nRUN composer install --optimize-autoloader --no-dev\\nEXPOSE 9000\\nCMD [\\\"php-fpm\\\"]\\n\"}]",[1060,1253,370],{"id":1254},"_3-dockerfile-cho-react",[10,1256,372],{},[31,1258],{":files":1259},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM node:18-slim as build\\nWORKDIR /app\\nCOPY . .\\nRUN npm install\\nRUN npm run build\\n\\nFROM nginx:alpine\\nCOPY --from=build /app/build /usr/share/nginx/html\\nEXPOSE 80\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\"}]",[1060,1261,375],{"id":1262},"_4-dockerfile-cho-vue",[10,1264,377],{},[31,1266],{":files":1267},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM node:18-slim as build\\nWORKDIR /app\\nCOPY . .\\nRUN npm install\\nRUN npm run build\\n\\nFROM nginx:alpine\\nCOPY --from=build /app/dist /usr/share/nginx/html\\nEXPOSE 80\\nCMD [\\\"nginx\\\", \\\"-g\\\", \\\"daemon off;\\\"]\\n\"}]",[1060,1269,380],{"id":1270},"_5-dockerfile-cho-nuxtjs",[10,1272,382],{},[31,1274],{":files":1275},"[{\"title\":\"Dockerfile\",\"language\":\"dockerfile\",\"content\":\"FROM node:18-slim as build\\nWORKDIR /app\\nCOPY . .\\nRUN npm install\\nRUN npm run build\\n\\nFROM node:18-slim\\nWORKDIR /app\\nCOPY --from=build /app /app\\nEXPOSE 3000\\nCMD [\\\"npm\\\", \\\"run\\\", \\\"start\\\"]\\n\"}]",[1060,1277,385],{"id":1278},"_6-dockerfile-cho-nextjs",[10,1280,387],{},[31,1282],{":files":1275},[1060,1284,390],{"id":1285},"đang-cập-nhật",[10,1287,1288,1289,1293],{},"Nếu bạn có các cấu hình hoặc Dockerfile khác muốn chia sẻ, vui lòng gửi email về ",[143,1290,1292],{"href":1291},"mailto:vinhtieng123@gmail.com","vinhtieng123@gmail.com",". Mình rất trân trọng điều đó.",{"title":177,"searchDepth":102,"depth":102,"links":1295},[1296,1297,1298,1299,1300,1301,1302],{"id":1238,"depth":102,"text":360},{"id":1246,"depth":102,"text":365},{"id":1254,"depth":102,"text":370},{"id":1262,"depth":102,"text":375},{"id":1270,"depth":102,"text":380},{"id":1278,"depth":102,"text":385},{"id":1285,"depth":102,"text":390},"Tìm hiểu về Docker và khám phá các Dockerfile phổ biến cho nhiều dự án như Node.js, PHP với Laravel, React, Vue, Nuxt và Next.js. Khám phá các kỹ thuật tối ưu và thực hành tốt nhất.","/images/blog/common-docker-file/banner.webp",{},{"title":355,"description":1303},"blog/common-docker-file",[1309],"docker","rfE4IC06PQiUtlAnitgLwR_B1ShNxO0-v7-su-8zJas",{"id":1312,"title":395,"body":1313,"date":1540,"description":397,"extension":181,"image":1541,"meta":1542,"navigation":184,"path":394,"published":184,"seo":1543,"stem":1544,"tags":1545,"__hash__":1547},"blog/blog/jwt.md",{"type":7,"value":1314,"toc":1538},[1315,1318,1321,1324,1329,1337,1340,1355,1362,1365,1391,1394,1401,1404,1407,1410,1413,1425,1428,1431,1446,1449,1452,1455,1458,1461,1479,1482,1501,1504,1506,1512,1515,1518],[23,1316,400],{"id":1317},"_1-giới-thiệu-về-jwt",[10,1319,1320],{},"JWT (JSON Web Token) là một tiêu chuẩn mở (RFC 7519) cho phép truyền tải thông tin giữa các bên dưới dạng JSON. JWT thường được sử dụng để xác thực và phân quyền trong các ứng dụng web.",[10,1322,1323],{},"Một JWT token trông như sau:",[631,1325,1326],{},[10,1327,1328],{},"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ.SflKxwRJSMeKKF2QT4fwpMeJf36POk6yJV_adQssw5c",[10,1330,1331,1332],{},"Trang web chính thức của JWT: ",[143,1333,1336],{"href":1334,"rel":1335},"https://jwt.io/",[147],"jwt.io",[23,1338,405],{"id":1339},"_2-các-thành-phần-của-jwt",[10,1341,1342,1343,1346,1347,1350,1351,1354],{},"JWT bao gồm ba phần chính: ",[59,1344,1345],{},"Header",", ",[59,1348,1349],{},"Payload"," và ",[59,1352,1353],{},"Signature",". Mỗi phần được mã hóa bằng Base64Url và được phân tách bằng dấu chấm (.).",[138,1356,1357],{},[92,1358,1359,1361],{},[13,1360,1345],{},": Chứa thông tin về thuật toán mã hóa và loại token. Ví dụ:",[31,1363],{":files":1364},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"alg\\\": \\\"HS256\\\",\\n  \\\"typ\\\": \\\"JWT\\\"\\n}\\n\"}]",[138,1366,1367,1375],{},[92,1368,1369,1371,1372],{},[13,1370,1349],{},": Chứa thông tin mà bạn muốn truyền tải. Đây có thể là thông tin người dùng, quyền truy cập, thời gian hết hạn, v.v. Ví dụ:",[31,1373],{":files":1374},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"{\\n  \\\"sub\\\": \\\"1234567890\\\",\\n  \\\"name\\\": \\\"John Doe\\\",\\n  \\\"iat\\\": 1516239022\\n}\\n\"}]",[92,1376,1377,1379,1380,1350,1382,1384,1385,1387,1388],{},[13,1378,1353],{},": Được tạo bằng cách mã hóa ",[59,1381,1345],{},[59,1383,1349],{}," với một khóa bí mật và thuật toán đã chỉ định trong ",[59,1386,1345],{},". Điều này giúp đảm bảo rằng token không bị thay đổi trong quá trình truyền tải. Ví dụ:",[31,1389],{":files":1390},"[{\"title\":\"json\",\"language\":\"json\",\"content\":\"HMACSHA256(\\n  base64UrlEncode(header) + \\\".\\\" +\\n  base64UrlEncode(payload),\\n  your-256-bit-secret\\n)\\n\"}]",[23,1392,410],{"id":1393},"_3-viết-lại-hàm-để-generate-jwt-token-và-verify-jwt-token-trong-nodejs",[10,1395,1396,1397,1400],{},"Khi làm việc với jwt và nodeJs, hầu hết mọi người sẽ sử dụng thư viện ",[59,1398,1399],{},"jsonwebtoken"," để tạo và xác thực JWT token. Tuy nhiên, để hiểu rõ hơn về cách hoạt động của JWT, chúng ta có thể tự viết hàm để tạo và xác thực JWT token.",[10,1402,1403],{},"Giả sử chúng ta muốn tạo JWT token từ thông tin user_id=123, khi đó phần payload sẽ là:",[31,1405],{":files":1406},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123\\n}\\n\"}]",[10,1408,1409],{},"Ở phần header, chúng ta sẽ sử dụng thuật toán HS256 để mã hóa JWT token.",[31,1411],{":files":1412},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const header = {\\n  alg: 'HS256',\\n  typ: 'JWT'\\n}\\n\"}]",[10,1414,1415,1416,1350,1418,1420,1421,1350,1423,810],{},"Để tạo JWT token, chúng ta cần mã hóa ",[59,1417,1345],{},[59,1419,1349],{}," bằng Base64Url. Sau đó, chúng ta sẽ tạo chữ ký bằng cách sử dụng thuật toán HMACSHA256 với khóa bí mật (secret key) và kết hợp ",[59,1422,1345],{},[59,1424,1349],{},[10,1426,1427],{},"Đầu tiên chúng ta cần viết 1 hàm để mã hóa Base64Url:",[31,1429],{":files":1430},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\"}]",[10,1432,1433,1434,1437,1438,1441,1442,1445],{},"Ở đây, vì chúng ta sử dụng NodeJs nên có thể sử dụng ",[59,1435,1436],{},"Buffer"," để mã hóa Base64Url. Nếu bạn đang làm việc với JavaScript trên trình duyệt, bạn có thể sử dụng ",[59,1439,1440],{},"btoa()"," để mã hóa Base64Url. Khi muốn giải mã, bạn có thể sử dụng ",[59,1443,1444],{},"atob()",". Hàm này là hàm có sẵn trong trình duyệt.",[10,1447,1448],{},"Tiếp theo, chúng ta sẽ triển khai hàm tạo JWT token. Thay vì tự mã hóa thủ công bằng cách base64UrlEncode Header và Payload rồi nối với secret key, chúng ta sẽ thực hiện đúng theo chuẩn thực tế bằng cách sử dụng thuật toán HMAC-SHA256 để tạo chữ ký số.",[10,1450,1451],{},"Trong Node.js, chúng ta có thể dễ dàng thực hiện điều này bằng cách dùng thư viện tích hợp sẵn là crypto, cụ thể là hàm createHmac. Hàm này sẽ giúp chúng ta tạo ra chữ ký (signature) từ chuỗi đã mã hóa gồm Header và Payload, kết hợp với secret key để đảm bảo tính toàn vẹn và xác thực của token.",[10,1453,1454],{},"Full code mã hóa JWT token sẽ như sau:",[31,1456],{":files":1457},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const crypto = require('crypto');\\nfunction base64UrlEncode(str) {\\n  return Buffer.from(str)\\n    .toString('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n}\\n\\nfunction createJWT(payload, secret) {\\n  const header = {\\n    alg: 'HS256',\\n    typ: 'JWT'\\n  };\\n\\n  const encodedHeader = base64UrlEncode(JSON.stringify(header));\\n  const encodedPayload = base64UrlEncode(JSON.stringify(payload));\\n\\n  const signature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return `${encodedHeader}.${encodedPayload}.${signature}`;\\n}\\n\"}]",[23,1459,415],{"id":1460},"_4-xác-thực-jwt-token",[10,1462,1463,1464,1346,1466,1350,1468,1470,1471,1350,1473,1475,1476,1478],{},"Để xác thực JWT token, chúng ta cần kiểm tra chữ ký (signature) của token. Đầu tiên, chúng ta sẽ tách ",[59,1465,1345],{},[59,1467,1349],{},[59,1469,1353],{}," từ token. Sau đó, chúng ta sẽ mã hóa lại ",[59,1472,1345],{},[59,1474,1349],{}," bằng cùng một khóa bí mật và thuật toán đã chỉ định trong ",[59,1477,1345],{},". Cuối cùng, chúng ta so sánh chữ ký đã tạo với chữ ký trong token.",[31,1480],{":files":1481},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"function verifyJWT(token, secret) {\\n  const [encodedHeader, encodedPayload, signature] = token.split('.');\\n  const expectedSignature = crypto\\n    .createHmac('sha256', secret)\\n    .update(`${encodedHeader}.${encodedPayload}`)\\n    .digest('base64')\\n    .replace(/=/g, '')\\n    .replace(/\\\\+/g, '-')\\n    .replace(/\\\\//g, '_');\\n\\n  return expectedSignature === signature;\\n}\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconsole.log('Token is valid:', isValid);\\n\"}]",[10,1483,1484,1485,1488,1489,1492,1493,1496,1497,1500],{},"Hàm ",[59,1486,1487],{},"verifyJWT"," sẽ trả về ",[59,1490,1491],{},"true"," nếu chữ ký hợp lệ và ",[59,1494,1495],{},"false"," nếu không hợp lệ.\nNếu bạn muốn kiểm tra xem token có hết hạn hay không, bạn có thể thêm một trường ",[59,1498,1499],{},"exp"," vào payload. Trường này sẽ chứa thời gian hết hạn của token dưới dạng timestamp (số giây kể từ 1/1/1970).",[31,1502],{":files":1503},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"const payload = {\\n  user_id: 123,\\n  exp: Math.floor(Date.now() / 1000) + (60 * 60) // Hết hạn sau 1 giờ\\n};\\nconst token = createJWT(payload, secret);\\nconst isValid = verifyJWT(token, secret);\\nconst decodedPayload = JSON.parse(Buffer.from(token.split('.')[1], 'base64').toString());\\nconst isExpired = decodedPayload.exp \u003C Math.floor(Date.now() / 1000);\\nconsole.log('Token is valid:', isValid);\\nconsole.log('Token is expired:', isExpired);\\n\"}]",[23,1505,420],{"id":1168},[10,1507,1508,1509,1511],{},"JWT là một công cụ mạnh mẽ để xác thực và phân quyền trong các ứng dụng web. Bằng cách hiểu rõ cách hoạt động của JWT, bạn có thể tự tạo và xác thực JWT token mà không cần phụ thuộc vào thư viện bên ngoài. Tuy nhiên, trong thực tế, bạn nên sử dụng thư viện ",[59,1510,1399],{}," để tiết kiệm thời gian và công sức.",[10,1513,1514],{},"Hy vọng bài viết này đã giúp bạn hiểu rõ hơn về JWT và cách sử dụng nó trong ứng dụng của mình. Nếu bạn có bất kỳ câu hỏi nào, hãy liên hệ với mình qua các kênh liên lạc như email, facebook, zalo hoặc telegram nhé!",[23,1516,425],{"id":1517},"_6-tài-liệu-tham-khảo",[138,1519,1520,1525,1532],{},[92,1521,1522],{},[143,1523,1336],{"href":1334,"rel":1524},[147],[92,1526,1527],{},[143,1528,1531],{"href":1529,"rel":1530},"https://datatracker.ietf.org/doc/html/rfc7519",[147],"RFC 7519 - JSON Web Token (JWT)",[92,1533,1534],{},[143,1535,1399],{"href":1536,"rel":1537},"https://www.npmjs.com/package/jsonwebtoken",[147],{"title":177,"searchDepth":102,"depth":102,"links":1539},[],"2025-05-05T00:00:00.000Z","/images/blog/jwt/banner.webp",{},{"title":395,"description":397},"blog/jwt",[1546],"npm","8un4y1GyUg96Mt6CYGM1woUPkHsT5GLAAqACQ5n_Xsc",{"id":1549,"title":430,"body":1550,"date":1540,"description":432,"extension":181,"image":1602,"meta":1603,"navigation":184,"path":429,"published":184,"seo":1604,"stem":1605,"tags":1606,"__hash__":1607},"blog/blog/useful-npm-package.md",{"type":7,"value":1551,"toc":1600},[1552,1555,1593,1596],[23,1553,435],{"id":1554},"frontend",[138,1556,1557,1569,1575,1581,1587],{},[92,1558,1559,1562,1563,1568],{},[59,1560,1561],{},"react-query"," - ",[143,1564,1567],{"href":1565,"rel":1566},"https://react-query.tanstack.com/",[147],"React Query"," Thư viện quản lý trạng thái cho React, giúp xử lý các yêu cầu API và cache dữ liệu một cách dễ dàng.",[92,1570,1571,1574],{},[59,1572,1573],{},"@progress/kendo-react-pdf"," - Thư viện tạo PDF cho React, hay hơn các thư viện khác ở chỗ hình ảnh sẽ được xuất ra dưới định dạng SVG, giúp cho việc xuất ảnh chất lượng cao và nét hơn, không bị vỡ ảnh khi zoom in.",[92,1576,1577,1580],{},[59,1578,1579],{},"react-split-pane"," - Thư viện tạo giao diện chia tách (split view) cho React, giúp dễ dàng tạo các layout với các phần tử có thể kéo và thả.",[92,1582,1583,1584],{},"Code template cho custom send and listen event document",[31,1585],{":files":1586},"[{\"title\":\"javascript\",\"language\":\"javascript\",\"content\":\"export const sendEvent = (eventName, detail) => {\\n  document.dispatchEvent(new CustomEvent(eventName, { detail }));\\n}\\nexport const listenEvent = (eventName, callback, context = document) => {\\n  context.addEventListener(eventName, callback);\\n  return () => context.removeEventListener(eventName, callback);\\n}\\n\"}]",[92,1588,1589,1592],{},[59,1590,1591],{},"react-window"," - Thư viện giúp tối ưu hóa hiệu suất cho bảng và danh sách lớn trong React bằng cách chỉ render các phần tử đang hiển thị trên UI nhẹ và dễ sử dụng.",[23,1594,440],{"id":1595},"backend",[138,1597,1598],{},[92,1599],{},{"title":177,"searchDepth":102,"depth":102,"links":1601},[],"/images/blog/useful-npm-package/banner.webp",{},{"title":430,"description":432},"blog/useful-npm-package",[1546],"McrzsCwI6Jukg_9ELFZ1y4aVGWPlazP9Y6unDL4W8VE",1746438991751]