import{c as S,_ as R,a as G}from"./CP-lT0i9.js";import{B as I,K as B,f as b,h as j,j as i,n as _,E as x,F as C,D as T,g,t as y,M as F,i as q,J as A,H as K,N as H,O as J,y as L,a as U,b as P,P as V,Q as W,I as z,w as X}from"./BPcgGW5H.js";import{u as Y}from"./S-zO4_YS.js";import{a as w}from"./DseuOzxD.js";import"./qWVjN82r.js";const Z={key:0,class:"flex justify-center mt-4"},ee={class:"inline-flex items-center gap-1"},te=["disabled"],re=["onClick"],ae=["disabled"],ne=I({__name:"Pagination",props:{currentPage:{},totalItems:{},perPage:{},maxVisiblePages:{}},emits:["update:page"],setup(o,{emit:l}){const a=o,m=l,n=B(()=>Math.ceil(a.totalItems/a.perPage)),s=B(()=>{const e=a.maxVisiblePages??5,t=Math.floor(e/2);let r=Math.max(1,a.currentPage-t),u=Math.min(n.value,r+e-1);u-r<e-1&&(r=Math.max(1,u-e+1));const h=[];for(let v=r;v<=u;v++)h.push(v);return h});function c(e){e<1||e>n.value||e===a.currentPage||m("update:page",e)}return(e,t)=>n.value>1?(g(),b("nav",Z,[i("ul",ee,[i("li",null,[i("button",{class:_(x(S)("w-10 rounded border border-neutral-200 aspect-square hover:bg-neutral-100 cursor-pointer disabled:bg-neutral-200 dark:border-neutral-800 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:disabled:bg-neutral-700 dark:text-neutral-400",{"cursor-not-allowed":e.currentPage===1})),disabled:e.currentPage===1,onClick:t[0]||(t[0]=r=>c(e.currentPage-1))}," « ",10,te)]),(g(!0),b(C,null,T(s.value,r=>(g(),b("li",{key:r},[i("button",{class:_(["w-10 rounded border border-neutral-200 aspect-square dark:border-neutral-800",{"bg-blue-500 text-white cursor-not-allowed":r===e.currentPage,"hover:bg-gray-100 cursor-pointer dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:text-neutral-200":r!==e.currentPage}]),onClick:u=>c(r)},y(r),11,re)]))),128)),i("li",null,[i("button",{class:_(x(S)("w-10 rounded border border-neutral-200 aspect-square hover:bg-neutral-100 cursor-pointer disabled:bg-neutral-200 dark:border-neutral-800 dark:bg-neutral-900 dark:hover:bg-neutral-800 dark:disabled:bg-neutral-600 dark:text-neutral-400",{"cursor-not-allowed":e.currentPage===n.value})),disabled:e.currentPage===n.value,onClick:t[1]||(t[1]=r=>c(e.currentPage+1))}," » ",10,ae)])])])):j("",!0)}}),se={class:"flex-1 text-neutral-400 truncate pr-12"},oe={class:"absolute inset-y-0 right-0 flex items-center gap-1 px-3 text-neutral-400"},le=I({__name:"SearchInput",props:{size:{type:String,default:"md"}},setup(o){const l=F(),a=()=>{l.toggleOpenSearchDialog()};return(m,n)=>{const s=K;return g(),b("div",{onClick:a,class:_(x(S)("relative w-full max-w-md border-gray-300 rounded-lg shadow-sm flex focus:ring-2 cursor-pointer dark:border-white dark:shadow-neutral-800",{"text-sm px-4 py-2":o.size==="md","text-lg px-6 py-3":o.size==="lg","text-xs px-2 py-1":o.size==="sm"}))},[i("p",se,y(m.$t("search.placeholder")),1),i("button",oe,[q(s,{name:"window",class:"text-lg"}),n[0]||(n[0]=A(" + ")),n[1]||(n[1]=i("span",{class:"font-mono text-xs"},"K",-1))])],2)}}});async function ie(){var a;const{data:o}=await H("blog-tags",()=>J("blog").select("tags").all());return(a=o.value)==null?void 0:a.reduce((m,n)=>((n.tags||[]).forEach(c=>m.add(c)),m),new Set)}function ce(){const o=L(),l=U();return{setParam:(e,t)=>{const r={...o.query};t==null||t===""?delete r[e]:r[e]=t.toString(),l.replace({query:r})},removeParam:e=>{const t={...o.query};delete t[e],l.push({query:t})},setParams:e=>{const t={...o.query};for(const[r,u]of Object.entries(e))u==null||u===""?delete t[r]:t[r]=u.toString();l.push({query:t})},route:o,getParam:e=>o.query[e],getParams:()=>o.query}}const ue={class:"min-h-screen text-gray-800 dark:text-gray-100 p-container z-10 pt-10"},de={class:"flex items-center justify-center mb-4"},pe={class:"flex flex-wrap gap-2 mb-4"},ge={class:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"},me={key:0,class:"text-center text-gray-500"},$=9,D="tags",N="page",Pe=I({__name:"index",async setup(o){var E;let l,a;const{setParams:m,getParam:n}=ce(),s=P(((E=n(D))==null?void 0:E.split(","))||[]),c=P(parseInt(n(N)||"1")||1),e=P([]),t=P(0),r=([l,a]=V(()=>ie()),l=await l,a(),l),u=async()=>{const p=()=>{let d=J("blog").where("published","=",!0).order("date","DESC");return s.value.length&&(d=d.orWhere(f=>(s.value.forEach(Q=>{f=f.where("tags","LIKE",`%${Q}%`)}),f))),d},M=await p().limit($).skip((c.value-1)*$).all(),k=await p().count();e.value=M,t.value=k};[l,a]=V(()=>u()),await l,a(),W([s,c],async()=>{m({[D]:s.value.join(","),[N]:c.value.toString()}),await u()},{deep:!0});const h=p=>{c.value=p},v=p=>{s.value.includes(p)?s.value.splice(s.value.indexOf(p),1):s.value.push(p),h(1)},O=()=>{c.value=1,s.value=[],u()};return Y({title:"Blog",meta:[{name:"description",content:"A technical blog sharing tips, tutorials, and deep-dives on web development, JavaScript, TypeScript, and modern technologies."},{name:"author",content:"Vinh Tieng"},{name:"keywords",content:"blog, web development, JavaScript, TypeScript, tutorials, tips"},{name:"robots",content:"index, follow"},{property:"og:title",content:"Blog"},{property:"og:description",content:"A technical blog sharing tips, tutorials, and deep-dives on web development, JavaScript, TypeScript, and modern technologies."},{property:"og:type",content:"website"},{property:"og:url",content:`${w}/blog`},{property:"og:image",content:`${w}/images/cover.webp`},{property:"twitter:title",content:"Blog"},{property:"twitter:description",content:"A technical blog sharing tips, tutorials, and deep-dives on web development, JavaScript, TypeScript, and modern technologies."},{property:"twitter:image",content:`${w}/images/cover.webp`},{property:"twitter:card",content:"summary_large_image"}],link:[{rel:"canonical",href:`${w}/blog`}]}),(p,M)=>{const k=G;return g(),b("main",ue,[i("div",de,[q(le)]),i("div",pe,[(g(!0),b(C,null,T(x(r),d=>(g(),z(R,{key:d,label:d,"is-active":s.value.includes(d),onClick:f=>v(d)},{default:X(()=>[A(y(d),1)]),_:2},1032,["label","is-active","onClick"]))),128))]),i("div",ge,[(g(!0),b(C,null,T(e.value,d=>(g(),z(k,{key:d.id,post:d},null,8,["post"]))),128))]),e.value.length===0?(g(),b("div",me,[i("p",null,[A(y(p.$t("no_posts"))+" ",1),i("span",{onClick:O,class:"text-blue-500 hover:underline cursor-pointer"},y(p.$t("refresh")),1)])])):j("",!0),q(ne,{currentPage:c.value,totalItems:t.value,perPage:$,maxVisiblePages:5,"onUpdate:page":h},null,8,["currentPage","totalItems"])])}}});export{Pe as default};
